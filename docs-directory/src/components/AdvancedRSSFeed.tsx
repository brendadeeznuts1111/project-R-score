import { useState, useEffect, useRef, useCallback } from 'react';\nimport { Rss, RefreshCw, Calendar, ExternalLink, Zap, Code, Package, Bug, AlertTriangle, TrendingUp, Clock, Filter, Search, Bell, Share2, Download } from 'lucide-react';\n\ninterface RSSItem {\n  title: string;\n  link: string;\n  guid: string;\n  description: string;\n  pubDate: string;\n  category?: 'release' | 'feature' | 'company' | 'security' | 'performance';\n  tags?: string[];\n  read?: boolean;\n  bookmarked?: boolean;\n}\n\ninterface ParsedRSSFeed {\n  title: string;\n  description: string;\n  lastBuildDate: string;\n  items: RSSItem[];\n}\n\ninterface FeedStats {\n  totalItems: number;\n  unreadCount: number;\n  bookmarkedCount: number;\n  lastUpdated: string;\n  categories: Record<string, number>;\n}\n\nexport default function AdvancedRSSFeed() {\n  const [feed, setFeed] = useState<ParsedRSSFeed | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedCategory, setSelectedCategory] = useState<'all' | 'release' | 'feature' | 'company' | 'security' | 'performance'>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showUnreadOnly, setShowUnreadOnly] = useState(false);\n  const [sortBy, setSortBy] = useState<'date' | 'title' | 'category'>('date');\n  const [expandedItem, setExpandedItem] = useState<string | null>(null);\n  const [autoRefresh, setAutoRefresh] = useState(false);\n  const [refreshInterval, setRefreshInterval] = useState(300000); // 5 minutes\n  const [stats, setStats] = useState<FeedStats | null>(null);\n  \n  const refreshTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // Enhanced sample data with more realistic content\n  const enhancedSampleFeed: ParsedRSSFeed = {\n    title: 'bun.com',\n    description: 'A fast all-in-one JavaScript runtime and toolkit',\n    lastBuildDate: new Date().toISOString(),\n    items: [\n      {\n        title: 'Bun v1.3.8: World\\'s Fastest Markdown Parser',\n        link: 'https://bun.com/blog/bun-v1.3.8',\n        guid: 'https://bun.com/blog/bun-v1.3.8',\n        description: 'üöÄ Introducing Bun.markdown - a builtin CommonMark-compliant Markdown parser written in Zig! Features lightning-fast parsing, GitHub Flavored Markdown support, and multiple output formats (HTML, React, ANSI). Also includes bun build --metafile-md for LLM-friendly module graph metadata and critical Windows regression fixes.',\n        pubDate: new Date(Date.now() - 86400000).toISOString(), // 1 day ago\n        category: 'release',\n        tags: ['markdown', 'parser', 'zig', 'performance', 'v1.3.8'],\n        read: false,\n        bookmarked: false\n      },\n      {\n        title: 'Performance Breakthrough: 500x Faster postMessage',\n        link: 'https://bun.com/blog/how-we-made-postMessage-string-500x-faster',\n        guid: 'https://bun.com/blog/postmessage-500x-faster',\n        description: 'üí• Revolutionary optimization: postMessage(string) is now 500x faster through zero-copy implementation! This breakthrough eliminates unnecessary string copies and leverages Bun\\'s internal string representation for maximum performance.',\n        pubDate: new Date(Date.now() - 172800000).toISOString(), // 2 days ago\n        category: 'performance',\n        tags: ['performance', 'optimization', 'webworkers', '500x'],\n        read: false,\n        bookmarked: true\n      },\n      {\n        title: 'Bun v1.3.7: Major Performance Upgrades',\n        link: 'https://bun.com/blog/bun-v1.3.7',\n        guid: 'https://bun.com/blog/bun-v1.3.7',\n        description: '‚ö° Massive performance improvements: 50% faster Buffer.from(array), 35% faster async/await, 3x faster array.flat(), 90% faster padStart/padEnd. New APIs: Bun.JSON5, Bun.JSONL, Bun.wrapAnsi() (33-88x faster than npm), advanced profiler tools, and enhanced Node.js compatibility.',\n        pubDate: new Date(Date.now() - 259200000).toISOString(), // 3 days ago\n        category: 'release',\n        tags: ['performance', 'v1.3.7', 'buffers', 'async', 'json5'],\n        read: true,\n        bookmarked: false\n      },\n      {\n        title: 'Security Alert: Critical Vulnerability Patched',\n        link: 'https://bun.com/blog/security-patch-cve-2025',\n        guid: 'https://bun.com/blog/security-patch',\n        description: 'üõ°Ô∏è Critical security update: Patches CVE-2025-1234 affecting file system operations. All users are strongly recommended to update immediately. This release also includes additional security hardening for production environments.',\n        pubDate: new Date(Date.now() - 345600000).toISOString(), // 4 days ago\n        category: 'security',\n        tags: ['security', 'cve', 'patch', 'critical'],\n        read: false,\n        bookmarked: true\n      },\n      {\n        title: 'Anthropic Acquisition: Bun Powers Claude Code',\n        link: 'https://bun.com/blog/bun-joins-anthropic',\n        guid: 'https://bun.com/blog/bun-joins-anthropic',\n        description: 'ü§ñ Major announcement: Bun has been acquired by Anthropic! Bun will serve as the core infrastructure powering Claude Code, Claude Agent SDK, and future AI coding products. This partnership will accelerate Bun\\'s development and bring AI-powered tools to the JavaScript ecosystem.',\n        pubDate: new Date(Date.now() - 432000000).toISOString(), // 5 days ago\n        category: 'company',\n        tags: ['anthropic', 'acquisition', 'ai', 'claude', 'partnership'],\n        read: true,\n        bookmarked: false\n      },\n      {\n        title: 'Vercel Native Bun Runtime Support',\n        link: 'https://bun.com/blog/vercel-adds-native-bun-support',\n        guid: 'https://bun.com/blog/vercel-support',\n        description: '‚ö° Vercel now supports native Bun runtime! Deploy your Bun applications with full access to Bun APIs, improved cold start performance, and seamless integration with Vercel\\'s edge network. Game-changing for serverless applications!',\n        pubDate: new Date(Date.now() - 518400000).toISOString(), // 6 days ago\n        category: 'company',\n        tags: ['vercel', 'serverless', 'edge', 'deployment', 'partnership'],\n        read: false,\n        bookmarked: false\n      },\n      {\n        title: 'New Feature: Unified SQL API',\n        link: 'https://bun.com/blog/unified-sql-api',\n        guid: 'https://bun.com/blog/sql-api',\n        description: 'üóÑÔ∏è Introducing Bun\\'s unified SQL API supporting PostgreSQL, MySQL, and SQLite with a single interface! Features connection pooling, transaction management, and built-in query optimization. Database operations have never been easier!',\n        pubDate: new Date(Date.now() - 604800000).toISOString(), // 1 week ago\n        category: 'feature',\n        tags: ['sql', 'database', 'postgresql', 'mysql', 'sqlite'],\n        read: true,\n        bookmarked: false\n      }\n    ]\n  };\n\n  // Calculate statistics\n  const calculateStats = useCallback((feedData: ParsedRSSFeed): FeedStats => {\n    const categories: Record<string, number> = {};\n    let unreadCount = 0;\n    let bookmarkedCount = 0;\n    \n    feedData.items.forEach(item => {\n      if (item.category) {\n        categories[item.category] = (categories[item.category] || 0) + 1;\n      }\n      if (!item.read) unreadCount++;\n      if (item.bookmarked) bookmarkedCount++;\n    });\n    \n    return {\n      totalItems: feedData.items.length,\n      unreadCount,\n      bookmarkedCount,\n      lastUpdated: feedData.lastBuildDate,\n      categories\n    };\n  }, []);\n\n  // Fetch RSS feed\n  const fetchRSSFeed = useCallback(async (signal?: AbortSignal) => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // Cancel previous request if exists\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n      \n      abortControllerRef.current = new AbortController();\n      \n      // Simulate network request with sample data\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      // Check if request was aborted\n      if (signal?.aborted || abortControllerRef.current.signal.aborted) {\n        return;\n      }\n      \n      setFeed(enhancedSampleFeed);\n      setStats(calculateStats(enhancedSampleFeed));\n      \n    } catch (err) {\n      if (!signal?.aborted) {\n        setError('Failed to load RSS feed. Please try again.');\n      }\n    } finally {\n      if (!signal?.aborted) {\n        setLoading(false);\n      }\n    }\n  }, [calculateStats]);\n\n  // Initial load\n  useEffect(() => {\n    fetchRSSFeed();\n    \n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n    };\n  }, [fetchRSSFeed]);\n\n  // Auto-refresh functionality\n  useEffect(() => {\n    if (autoRefresh) {\n      refreshTimerRef.current = setInterval(() => {\n        fetchRSSFeed();\n      }, refreshInterval);\n    } else {\n      if (refreshTimerRef.current) {\n        clearInterval(refreshTimerRef.current);\n        refreshTimerRef.current = null;\n      }\n    }\n    \n    return () => {\n      if (refreshTimerRef.current) {\n        clearInterval(refreshTimerRef.current);\n      }\n    };\n  }, [autoRefresh, refreshInterval, fetchRSSFeed]);\n\n  // Filter and sort items\n  const filteredAndSortedItems = feed?.items\n    .filter(item => {\n      // Category filter\n      if (selectedCategory !== 'all' && item.category !== selectedCategory) {\n        return false;\n      }\n      \n      // Unread filter\n      if (showUnreadOnly && item.read) {\n        return false;\n      }\n      \n      // Search filter\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase();\n        return (\n          item.title.toLowerCase().includes(query) ||\n          item.description.toLowerCase().includes(query) ||\n          item.tags?.some(tag => tag.toLowerCase().includes(query))\n        );\n      }\n      \n      return true;\n    })\n    .sort((a, b) => {\n      switch (sortBy) {\n        case 'date':\n          return new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime();\n        case 'title':\n          return a.title.localeCompare(b.title);\n        case 'category':\n          return (a.category || '').localeCompare(b.category || '');\n        default:\n          return 0;\n      }\n    }) || [];\n\n  // Mark item as read\n  const markAsRead = (guid: string) => {\n    if (!feed) return;\n    \n    const updatedFeed = {\n      ...feed,\n      items: feed.items.map(item =>\n        item.guid === guid ? { ...item, read: true } : item\n      )\n    };\n    \n    setFeed(updatedFeed);\n    setStats(calculateStats(updatedFeed));\n  };\n\n  // Toggle bookmark\n  const toggleBookmark = (guid: string) => {\n    if (!feed) return;\n    \n    const updatedFeed = {\n      ...feed,\n      items: feed.items.map(item =>\n        item.guid === guid ? { ...item, bookmarked: !item.bookmarked } : item\n      )\n    };\n    \n    setFeed(updatedFeed);\n    setStats(calculateStats(updatedFeed));\n  };\n\n  // Export functionality\n  const exportFeed = (format: 'json' | 'csv' | 'rss') => {\n    if (!feed) return;\n    \n    let content = '';\n    let filename = '';\n    let mimeType = '';\n    \n    switch (format) {\n      case 'json':\n        content = JSON.stringify(feed, null, 2);\n        filename = 'bun-rss-feed.json';\n        mimeType = 'application/json';\n        break;\n      case 'csv':\n        content = 'Title,Link,Category,PubDate,Description\\n' + \n          feed.items.map(item => \n            `\"${item.title}\",\"${item.link}\",\"${item.category}\",\"${item.pubDate}\",\"${item.description.replace(/\"/g, '\"\"')}\"`\n          ).join('\\n');\n        filename = 'bun-rss-feed.csv';\n        mimeType = 'text/csv';\n        break;\n      case 'rss':\n        content = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<rss version=\"2.0\">\n<channel>\n  <title>${feed.title}</title>\n  <description>${feed.description}</description>\n  <lastBuildDate>${feed.lastBuildDate}</lastBuildDate>\n  ${feed.items.map(item => `\n  <item>\n    <title>${item.title}</title>\n    <link>${item.link}</link>\n    <description>${item.description}</description>\n    <pubDate>${item.pubDate}</pubDate>\n  </item>`).join('')}\n</channel>\n</rss>`;\n        filename = 'bun-rss-export.xml';\n        mimeType = 'application/rss+xml';\n        break;\n    }\n    \n    const blob = new Blob([content], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  // Get icon for category\n  const getCategoryIcon = (category?: string) => {\n    switch (category) {\n      case 'release':\n        return <Package className=\"w-5 h-5 text-blue-500\" />;\n      case 'feature':\n        return <Code className=\"w-5 h-5 text-purple-500\" />;\n      case 'company':\n        return <AlertTriangle className=\"w-5 h-5 text-orange-500\" />;\n      case 'security':\n        return <Bug className=\"w-5 h-5 text-red-500\" />;\n      case 'performance':\n        return <Zap className=\"w-5 h-5 text-yellow-500\" />;\n      default:\n        return <Rss className=\"w-5 h-5 text-gray-500\" />;\n    }\n  };\n\n  // Format relative time\n  const getRelativeTime = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n    \n    if (diffDays === 0) return 'Today';\n    if (diffDays === 1) return 'Yesterday';\n    if (diffDays < 7) return `${diffDays} days ago`;\n    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;\n    return `${Math.floor(diffDays / 30)} months ago`;\n  };\n\n  if (loading && !feed) {\n    return (\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <div className=\"flex items-center justify-center space-x-3 py-12\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-cloudflare-orange\"></div>\n          <span className=\"text-lg text-gray-600 dark:text-gray-400\">Loading advanced RSS feed...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error && !feed) {\n    return (\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <AlertTriangle className=\"w-6 h-6 text-red-500\" />\n              <div>\n                <h3 className=\"text-lg font-semibold text-red-800 dark:text-red-200\">Error Loading RSS Feed</h3>\n                <p className=\"text-red-600 dark:text-red-400\">{error}</p>\n              </div>\n            </div>\n            <button\n              onClick={() => fetchRSSFeed()}\n              className=\"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600\"\n            >\n              Retry\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <Rss className=\"w-10 h-10 text-cloudflare-orange\" />\n            <div>\n              <h1 className=\"text-3xl font-bold\">Advanced RSS Feed</h1>\n              <p className=\"text-gray-600 dark:text-gray-400\">Real-time Bun updates with smart filtering</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-3\">\n            {/* Auto-refresh toggle */}\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => setAutoRefresh(!autoRefresh)}\n                className={`p-2 rounded-md transition-colors ${\n                  autoRefresh ? 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400' : 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'\n                }`}\n              >\n                {autoRefresh ? <Bell className=\"w-5 h-5\" /> : <Bell className=\"w-5 h-5\" />}\n              </button>\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">Auto-refresh</span>\n            </div>\n            \n            {/* Refresh button */}\n            <button\n              onClick={() => fetchRSSFeed()}\n              disabled={loading}\n              className=\"p-2 bg-cloudflare-orange text-white rounded-md hover:bg-orange-600 disabled:opacity-50\"\n            >\n              <RefreshCw className={`w-5 h-5 ${loading ? 'animate-spin' : ''}`} />\n            </button>\n            \n            {/* Export dropdown */}\n            <div className=\"relative group\">\n              <button className=\"p-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\">\n                <Download className=\"w-5 h-5\" />\n              </button>\n              <div className=\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all\">\n                <button\n                  onClick={() => exportFeed('json')}\n                  className=\"block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700\"\n                >\n                  Export as JSON\n                </button>\n                <button\n                  onClick={() => exportFeed('csv')}\n                  className=\"block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700\"\n                >\n                  Export as CSV\n                </button>\n                <button\n                  onClick={() => exportFeed('rss')}\n                  className=\"block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700\"\n                >\n                  Export as RSS\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Stats */}\n        {stats && (\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6\">\n            <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded\">\n              <div className=\"text-2xl font-bold text-blue-500\">{stats.totalItems}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Items</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded\">\n              <div className=\"text-2xl font-bold text-green-500\">{stats.unreadCount}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Unread</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded\">\n              <div className=\"text-2xl font-bold text-yellow-500\">{stats.bookmarkedCount}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Bookmarked</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded\">\n              <div className=\"text-2xl font-bold text-purple-500\">{Object.keys(stats.categories).length}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Categories</div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Filters and Controls */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {/* Search */}\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search feed...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700\"\n            />\n          </div>\n          \n          {/* Category filter */}\n          <select\n            value={selectedCategory}\n            onChange={(e) => setSelectedCategory(e.target.value as any)}\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700\"\n          >\n            <option value=\"all\">All Categories</option>\n            <option value=\"release\">Releases</option>\n            <option value=\"feature\">Features</option>\n            <option value=\"company\">Company</option>\n            <option value=\"security\">Security</option>\n            <option value=\"performance\">Performance</option>\n          </select>\n          \n          {/* Sort */}\n          <select\n            value={sortBy}\n            onChange={(e) => setSortBy(e.target.value as any)}\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700\"\n          >\n            <option value=\"date\">Sort by Date</option>\n            <option value=\"title\">Sort by Title</option>\n            <option value=\"category\">Sort by Category</option>\n          </select>\n          \n          {/* Unread filter */}\n          <button\n            onClick={() => setShowUnreadOnly(!showUnreadOnly)}\n            className={`w-full px-4 py-2 rounded-md transition-colors ${\n              showUnreadOnly\n                ? 'bg-cloudflare-orange text-white'\n                : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300'\n            }`}\n          >\n            <Filter className=\"w-4 h-4 inline mr-2\" />\n            {showUnreadOnly ? 'Showing Unread' : 'Show All'}\n          </button>\n        </div>\n      </div>\n\n      {/* Feed Items */}\n      <div className=\"space-y-4\">\n        {filteredAndSortedItems.map((item) => {\n          const isExpanded = expandedItem === item.guid;\n          \n          return (\n            <div\n              key={item.guid}\n              className={`bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all ${\n                !item.read ? 'ring-2 ring-cloudflare-orange ring-opacity-50' : ''\n              }`}\n            >\n              <div className=\"p-6\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-start space-x-4 flex-1\">\n                    <div className=\"mt-1\">\n                      {getCategoryIcon(item.category)}\n                    </div>\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h3 className={`text-xl font-semibold ${\n                          !item.read ? 'text-gray-900 dark:text-gray-100' : 'text-gray-700 dark:text-gray-300'\n                        }`}>\n                          {item.title}\n                        </h3>\n                        \n                        {/* Status indicators */}\n                        <div className=\"flex items-center space-x-2\">\n                          {!item.read && (\n                            <span className=\"w-2 h-2 bg-cloudflare-orange rounded-full\"></span>\n                          )}\n                          {item.bookmarked && (\n                            <span className=\"text-yellow-500\">‚≠ê</span>\n                          )}\n                        </div>\n                        \n                        {/* Category badge */}\n                        <span className={`px-2 py-1 text-xs rounded-full ${\n                          item.category === 'release' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400' :\n                          item.category === 'feature' ? 'bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400' :\n                          item.category === 'company' ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400' :\n                          item.category === 'security' ? 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400' :\n                          item.category === 'performance' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400' :\n                          'bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400'\n                        }`}>\n                          {item.category || 'general'}\n                        </span>\n                      </div>\n                      \n                      {/* Tags */}\n                      {item.tags && item.tags.length > 0 && (\n                        <div className=\"flex flex-wrap gap-2 mb-3\">\n                          {item.tags.map((tag, index) => (\n                            <span key={index} className=\"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded text-xs\">\n                              #{tag}\n                            </span>\n                          ))}\n                        </div>\n                      )}\n                      \n                      {/* Metadata */}\n                      <div className=\"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-3\">\n                        <div className=\"flex items-center space-x-1\">\n                          <Clock className=\"w-4 h-4\" />\n                          <span>{getRelativeTime(item.pubDate)}</span>\n                        </div>\n                        <a\n                          href={item.link}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"flex items-center space-x-1 hover:text-cloudflare-orange transition-colors\"\n                        >\n                          <ExternalLink className=\"w-4 h-4\" />\n                          <span>Read more</span>\n                        </a>\n                      </div>\n                      \n                      {/* Description */}\n                      <div className=\"text-gray-600 dark:text-gray-400\">\n                        {isExpanded ? (\n                          <div>\n                            <p className=\"whitespace-pre-wrap\">{item.description}</p>\n                            <button\n                              onClick={() => setExpandedItem(null)}\n                              className=\"mt-3 text-cloudflare-orange hover:text-orange-600 text-sm font-medium\"\n                            >\n                              Show less\n                            </button>\n                          </div>\n                        ) : (\n                          <div>\n                            <p className=\"line-clamp-3\">{item.description}</p>\n                            {item.description.length > 200 && (\n                              <button\n                                onClick={() => setExpandedItem(item.guid)}\n                                className=\"mt-2 text-cloudflare-orange hover:text-orange-600 text-sm font-medium\"\n                              >\n                                Read more\n                              </button>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Actions */}\n                  <div className=\"flex flex-col space-y-2 ml-4\">\n                    {!item.read && (\n                      <button\n                        onClick={() => markAsRead(item.guid)}\n                        className=\"p-2 text-gray-500 hover:text-cloudflare-orange transition-colors\"\n                        title=\"Mark as read\"\n                      >\n                        <div className=\"w-4 h-4 border-2 border-current rounded\"></div>\n                      </button>\n                    )}\n                    <button\n                      onClick={() => toggleBookmark(item.guid)}\n                      className=\"p-2 text-gray-500 hover:text-yellow-500 transition-colors\"\n                      title=\"Bookmark\"\n                    >\n                      <span className={item.bookmarked ? 'text-yellow-500' : ''}>\n                        {item.bookmarked ? '‚≠ê' : '‚òÜ'}\n                      </span>\n                    </button>\n                    <button\n                      className=\"p-2 text-gray-500 hover:text-blue-500 transition-colors\"\n                      title=\"Share\"\n                    >\n                      <Share2 className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      \n      {filteredAndSortedItems.length === 0 && (\n        <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\n          <Rss className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n          <p>No items found matching your filters.</p>\n        </div>\n      )}\n    </div>\n  );\n}
