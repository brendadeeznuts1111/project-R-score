import { useState, useEffect, useRef, useCallback } from 'react';\nimport { Rss, RefreshCw, Calendar, ExternalLink, Bell, BellOff, Download, Search, Filter, Clock, Eye, EyeOff, Bookmark, BookmarkCheck, AlertCircle, CheckCircle, TrendingUp, Zap, Code, Package, Bug, AlertTriangle, Globe, Server, Database } from 'lucide-react';\n\n// RSS Feed Interfaces\ninterface RSSItem {\n  title: string;\n  link: string;\n  guid: string;\n  description: string;\n  pubDate: string;\n  category?: 'release' | 'feature' | 'company' | 'security' | 'performance' | 'announcement';\n  tags?: string[];\n  read?: boolean;\n  bookmarked?: boolean;\n  notified?: boolean;\n  priority?: 'low' | 'medium' | 'high' | 'critical';\n}\n\ninterface ParsedRSSFeed {\n  title: string;\n  description: string;\n  lastBuildDate: string;\n  items: RSSItem[];\n}\n\ninterface FeedStats {\n  totalItems: number;\n  unreadCount: number;\n  bookmarkedCount: number;\n  lastUpdated: string;\n  categories: Record<string, number>;\n  newItemsSinceLastCheck: number;\n}\n\ninterface NotificationSettings {\n  enabled: boolean;\n  categories: string[];\n  keywords: string[];\n  priority: 'low' | 'medium' | 'high' | 'critical';\n  desktop: boolean;\n  sound: boolean;\n}\n\ninterface RPOIntegration {\n  enabled: boolean;\n  endpoint: string;\n  apiKey: string;\n  lastSync: string;\n  syncStatus: 'connected' | 'disconnected' | 'error';\n}\n\nexport default function RSSFeedManager() {\n  // Core State\n  const [feed, setFeed] = useState<ParsedRSSFeed | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // UI State\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showUnreadOnly, setShowUnreadOnly] = useState(false);\n  const [showNotifiedOnly, setShowNotifiedOnly] = useState(false);\n  const [sortBy, setSortBy] = useState<'date' | 'title' | 'category' | 'priority'>('date');\n  const [expandedItem, setExpandedItem] = useState<string | null>(null);\n  \n  // Auto-refresh & Notifications\n  const [autoRefresh, setAutoRefresh] = useState(false);\n  const [refreshInterval, setRefreshInterval] = useState(300000); // 5 minutes\n  const [notificationSettings, setNotificationSettings] = useState<NotificationSettings>({\n    enabled: true,\n    categories: ['release', 'security', 'critical'],\n    keywords: ['Bun v1.3', 'critical', 'security', 'vulnerability'],\n    priority: 'medium',\n    desktop: true,\n    sound: false\n  });\n  \n  // RPO Integration\n  const [rpoIntegration, setRpoIntegration] = useState<RPOIntegration>({\n    enabled: false,\n    endpoint: 'https://api.github.com/repos/oven-sh/bun/releases',\n    apiKey: '',\n    lastSync: '',\n    syncStatus: 'disconnected'\n  });\n  \n  // Refs\n  const refreshTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n  const lastCheckRef = useRef<string>(new Date().toISOString());\n  \n  // Enhanced sample data with realistic content\n  const enhancedSampleFeed: ParsedRSSFeed = {\n    title: 'bun.com',\n    description: 'A fast all-in-one JavaScript runtime and toolkit',\n    lastBuildDate: new Date().toISOString(),\n    items: [\n      {\n        title: 'ðŸš€ Bun v1.3.8: World\\'s Fastest Markdown Parser Released',\n        link: 'https://bun.com/blog/bun-v1.3.8',\n        guid: 'bun-v1.3.8',\n        description: 'BREAKING: Bun v1.3.8 introduces the world\\'s fastest Markdown parser written in Zig! Features CommonMark compliance, GitHub Flavored Markdown, and LLM-friendly build analysis with --metafile-md. Performance improvements include 50% faster parsing and zero dependencies.',\n        pubDate: new Date(Date.now() - 3600000).toISOString(), // 1 hour ago\n        category: 'release',\n        tags: ['markdown', 'parser', 'zig', 'performance', 'v1.3.8', 'critical'],\n        read: false,\n        bookmarked: false,\n        notified: false,\n        priority: 'critical'\n      },\n      {\n        title: 'ðŸ›¡ï¸ Critical Security Update: CVE-2025-1234 Patched',\n        link: 'https://bun.com/blog/security-patch-cve-2025-1234',\n        guid: 'security-patch-2025',\n        description: 'SECURITY: Critical vulnerability patched in Bun v1.3.7.1. CVE-2025-1234 affects file system operations in Windows environments. All users are strongly recommended to update immediately. This patch also includes additional security hardening.',\n        pubDate: new Date(Date.now() - 7200000).toISOString(), // 2 hours ago\n        category: 'security',\n        tags: ['security', 'cve', 'patch', 'critical', 'windows'],\n        read: false,\n        bookmarked: true,\n        notified: true,\n        priority: 'critical'\n      },\n      {\n        title: 'ðŸ“Š Performance Breakthrough: 500x Faster postMessage',\n        link: 'https://bun.com/blog/postmessage-500x-faster',\n        guid: 'postmessage-optimization',\n        description: 'PERFORMANCE: Revolutionary optimization makes postMessage(string) 500x faster through zero-copy implementation. This breakthrough eliminates unnecessary string copies and leverages Bun\\'s internal string representation for maximum performance.',\n        pubDate: new Date(Date.now() - 86400000).toISOString(), // 1 day ago\n        category: 'performance',\n        tags: ['performance', 'optimization', 'webworkers', '500x', 'breakthrough'],\n        read: true,\n        bookmarked: false,\n        notified: false,\n        priority: 'high'\n      },\n      {\n        title: 'ðŸ¤– Anthropic Acquisition: Bun Powers Claude Code',\n        link: 'https://bun.com/blog/bun-joins-anthropic',\n        guid: 'anthropic-acquisition',\n        description: 'COMPANY: Major announcement - Bun has been acquired by Anthropic! Bun will serve as the core infrastructure powering Claude Code, Claude Agent SDK, and future AI coding products. This partnership will accelerate Bun\\'s development.',\n        pubDate: new Date(Date.now() - 172800000).toISOString(), // 2 days ago\n        category: 'company',\n        tags: ['anthropic', 'acquisition', 'ai', 'claude', 'partnership'],\n        read: true,\n        bookmarked: true,\n        notified: true,\n        priority: 'high'\n      },\n      {\n        title: 'âš¡ Vercel Native Bun Runtime Support',\n        link: 'https://bun.com/blog/vercel-adds-native-bun-support',\n        guid: 'vercel-integration',\n        description: 'INTEGRATION: Vercel now supports native Bun runtime! Deploy your Bun applications with full access to Bun APIs, improved cold start performance, and seamless integration with Vercel\\'s edge network.',\n        pubDate: new Date(Date.now() - 259200000).toISOString(), // 3 days ago\n        category: 'feature',\n        tags: ['vercel', 'serverless', 'edge', 'deployment', 'integration'],\n        read: false,\n        bookmarked: false,\n        notified: false,\n        priority: 'medium'\n      }\n    ]\n  };\n\n  // Calculate statistics\n  const calculateStats = useCallback((feedData: ParsedRSSFeed): FeedStats => {\n    const categories: Record<string, number> = {};\n    let unreadCount = 0;\n    let bookmarkedCount = 0;\n    let newItemsSinceLastCheck = 0;\n    \n    feedData.items.forEach(item => {\n      if (item.category) {\n        categories[item.category] = (categories[item.category] || 0) + 1;\n      }\n      if (!item.read) unreadCount++;\n      if (item.bookmarked) bookmarkedCount++;\n      if (new Date(item.pubDate) > new Date(lastCheckRef.current)) {\n        newItemsSinceLastCheck++;\n      }\n    });\n    \n    return {\n      totalItems: feedData.items.length,\n      unreadCount,\n      bookmarkedCount,\n      lastUpdated: feedData.lastBuildDate,\n      categories,\n      newItemsSinceLastCheck\n    };\n  }, []);\n\n  // Parse RSS feed from URL\n  const parseRSSFeed = useCallback(async (xmlString: string): Promise<ParsedRSSFeed> => {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(xmlString, 'text/xml');\n    \n    // Check for parsing errors\n    const parseError = xmlDoc.querySelector('parsererror');\n    if (parseError) {\n      throw new Error('Invalid RSS feed format');\n    }\n    \n    const channel = xmlDoc.querySelector('channel');\n    if (!channel) {\n      throw new Error('Invalid RSS feed: no channel found');\n    }\n    \n    const title = channel.querySelector('title')?.textContent || '';\n    const description = channel.querySelector('description')?.textContent || '';\n    const lastBuildDate = channel.querySelector('lastBuildDate')?.textContent || \n                         channel.querySelector('pubDate')?.textContent || '';\n    \n    const itemElements = channel.querySelectorAll('item');\n    const items: RSSItem[] = [];\n    \n    itemElements.forEach(item => {\n      const title = item.querySelector('title')?.textContent || '';\n      const link = item.querySelector('link')?.textContent || '';\n      const guid = item.querySelector('guid')?.textContent || link;\n      const description = item.querySelector('description')?.textContent || '';\n      const pubDate = item.querySelector('pubDate')?.textContent || '';\n      \n      // Auto-categorize based on content\n      let category: RSSItem['category'] = 'announcement';\n      const titleLower = title.toLowerCase();\n      const descLower = description.toLowerCase();\n      \n      if (titleLower.includes('v') || titleLower.includes('release') || descLower.includes('fixes')) {\n        category = 'release';\n      } else if (titleLower.includes('security') || descLower.includes('cve') || descLower.includes('vulnerability')) {\n        category = 'security';\n      } else if (titleLower.includes('performance') || descLower.includes('faster') || descLower.includes('optimization')) {\n        category = 'performance';\n      } else if (titleLower.includes('anthropic') || titleLower.includes('vercel') || titleLower.includes('partnership')) {\n        category = 'company';\n      } else if (titleLower.includes('new') || titleLower.includes('feature') || titleLower.includes('api')) {\n        category = 'feature';\n      }\n      \n      // Auto-priority based on content\n      let priority: RSSItem['priority'] = 'medium';\n      if (category === 'security' || descLower.includes('critical') || titleLower.includes('breaking')) {\n        priority = 'critical';\n      } else if (category === 'release' || category === 'performance') {\n        priority = 'high';\n      }\n      \n      // Extract tags\n      const tags: string[] = [];\n      const tagMatches = description.match(/\\b(v\\d+\\.\\d+|\\d+x faster|\\d+% faster|CVE-\\d+|\\w+-\\w+)\\b/gi);\n      if (tagMatches) {\n        tags.push(...tagMatches.map(tag => tag.toLowerCase()));\n      }\n      \n      items.push({\n        title,\n        link,\n        guid,\n        description,\n        pubDate,\n        category,\n        tags: [...new Set(tags)], // Remove duplicates\n        read: false,\n        bookmarked: false,\n        notified: false,\n        priority\n      });\n    });\n    \n    return {\n      title,\n      description,\n      lastBuildDate,\n      items\n    };\n  }, []);\n\n  // Fetch RSS feed from URL\n  const fetchRSSFeed = useCallback(async (signal?: AbortSignal) => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // Cancel previous request\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n      \n      abortControllerRef.current = new AbortController();\n      \n      // Try to fetch actual RSS feed\n      try {\n        const response = await fetch('https://bun.com/rss.xml', {\n          signal: abortControllerRef.current.signal,\n          headers: {\n            'User-Agent': 'Bun-Powered-Docs-RSS-Reader/1.0',\n            'Accept': 'application/rss+xml, application/xml, text/xml'\n          }\n        });\n        \n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        }\n        \n        const xmlText = await response.text();\n        const parsedFeed = await parseRSSFeed(xmlText);\n        \n        // Check for new items and trigger notifications\n        if (feed && notificationSettings.enabled) {\n          const newItems = parsedFeed.items.filter(newItem => \n            !feed.items.some(existingItem => existingItem.guid === newItem.guid)\n          );\n          \n          if (newItems.length > 0) {\n            await triggerNotifications(newItems);\n          }\n        }\n        \n        setFeed(parsedFeed);\n        lastCheckRef.current = new Date().toISOString();\n        \n      } catch (fetchError) {\n        console.warn('Failed to fetch live RSS feed, using sample data:', fetchError);\n        // Fallback to sample data\n        setFeed(enhancedSampleFeed);\n      }\n      \n      // Sync with RPO if enabled\n      if (rpoIntegration.enabled) {\n        await syncWithRPO();\n      }\n      \n    } catch (err) {\n      if (!signal?.aborted) {\n        setError(err instanceof Error ? err.message : 'Failed to load RSS feed');\n      }\n    } finally {\n      if (!signal?.aborted) {\n        setLoading(false);\n      }\n    }\n  }, [feed, notificationSettings, rpoIntegration.enabled, parseRSSFeed]);\n\n  // Trigger notifications for new items\n  const triggerNotifications = useCallback(async (newItems: RSSItem[]) => {\n    if (!notificationSettings.enabled) return;\n    \n    const filteredItems = newItems.filter(item => {\n      // Category filter\n      if (notificationSettings.categories.length > 0 && \n          !notificationSettings.categories.includes(item.category || '')) {\n        return false;\n      }\n      \n      // Priority filter\n      const priorityLevels = ['low', 'medium', 'high', 'critical'];\n      const itemPriorityLevel = priorityLevels.indexOf(item.priority || 'medium');\n      const minPriorityLevel = priorityLevels.indexOf(notificationSettings.priority);\n      \n      if (itemPriorityLevel < minPriorityLevel) {\n        return false;\n      }\n      \n      // Keyword filter\n      if (notificationSettings.keywords.length > 0) {\n        const hasKeyword = notificationSettings.keywords.some(keyword => \n          item.title.toLowerCase().includes(keyword.toLowerCase()) ||\n          item.description.toLowerCase().includes(keyword.toLowerCase()) ||\n          item.tags?.some(tag => tag.toLowerCase().includes(keyword.toLowerCase()))\n        );\n        \n        if (!hasKeyword) return false;\n      }\n      \n      return true;\n    });\n    \n    for (const item of filteredItems) {\n      if (notificationSettings.desktop && 'Notification' in window) {\n        new Notification(`New ${item.category}: ${item.title}`, {\n          body: item.description.substring(0, 200) + '...',\n          icon: '/favicon.ico',\n          tag: item.guid,\n          requireInteraction: item.priority === 'critical'\n        });\n      }\n      \n      if (notificationSettings.sound) {\n        // Play notification sound (you'd need to add an audio file)\n        // const audio = new Audio('/notification.mp3');\n        // audio.play().catch(() => {});\n      }\n      \n      // Mark as notified\n      item.notified = true;\n    }\n  }, [notificationSettings]);\n\n  // Sync with RPO (Repository Operations)\n  const syncWithRPO = useCallback(async () => {\n    if (!rpoIntegration.enabled || !rpoIntegration.apiKey) {\n      return;\n    }\n    \n    try {\n      setRpoIntegration(prev => ({ ...prev, syncStatus: 'connected' }));\n      \n      // Fetch releases from GitHub API\n      const response = await fetch(rpoIntegration.endpoint, {\n        headers: {\n          'Authorization': `token ${rpoIntegration.apiKey}`,\n          'Accept': 'application/vnd.github.v3+json'\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error(`GitHub API error: ${response.status}`);\n      }\n      \n      const releases = await response.json();\n      \n      // Convert GitHub releases to RSS items\n      const rpoItems: RSSItem[] = releases.slice(0, 10).map((release: any) => ({\n        title: `ðŸš€ ${release.name}`,\n        link: release.html_url,\n        guid: release.id,\n        description: release.body || '',\n        pubDate: release.published_at,\n        category: 'release',\n        tags: release.tag_name ? [release.tag_name] : [],\n        read: false,\n        bookmarked: false,\n        notified: false,\n        priority: release.prerelease ? 'medium' : 'high'\n      }));\n      \n      // Merge with existing feed\n      if (feed) {\n        const mergedFeed = {\n          ...feed,\n          items: [...rpoItems, ...feed.items].slice(0, 50) // Keep only latest 50\n        };\n        setFeed(mergedFeed);\n      }\n      \n      setRpoIntegration(prev => ({ \n        ...prev, \n        lastSync: new Date().toISOString(),\n        syncStatus: 'connected'\n      }));\n      \n    } catch (error) {\n      console.error('RPO sync failed:', error);\n      setRpoIntegration(prev => ({ ...prev, syncStatus: 'error' }));\n    }\n  }, [rpoIntegration, feed]);\n\n  // Request notification permission\n  const requestNotificationPermission = useCallback(async () => {\n    if ('Notification' in window) {\n      const permission = await Notification.requestPermission();\n      if (permission === 'granted') {\n        setNotificationSettings(prev => ({ ...prev, desktop: true }));\n      }\n    }\n  }, []);\n\n  // Mark item as read\n  const markAsRead = useCallback((guid: string) => {\n    if (!feed) return;\n    \n    const updatedFeed = {\n      ...feed,\n      items: feed.items.map(item =>\n        item.guid === guid ? { ...item, read: true } : item\n      )\n    };\n    \n    setFeed(updatedFeed);\n  }, [feed]);\n\n  // Toggle bookmark\n  const toggleBookmark = useCallback((guid: string) => {\n    if (!feed) return;\n    \n    const updatedFeed = {\n      ...feed,\n      items: feed.items.map(item =>\n        item.guid === guid ? { ...item, bookmarked: !item.bookmarked } : item\n      )\n    };\n    \n    setFeed(updatedFeed);\n  }, [feed]);\n\n  // Filter and sort items\n  const filteredAndSortedItems = feed?.items\n    .filter(item => {\n      // Category filter\n      if (selectedCategory !== 'all' && item.category !== selectedCategory) {\n        return false;\n      }\n      \n      // Unread filter\n      if (showUnreadOnly && item.read) {\n        return false;\n      }\n      \n      // Notified filter\n      if (showNotifiedOnly && !item.notified) {\n        return false;\n      }\n      \n      // Search filter\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase();\n        return (\n          item.title.toLowerCase().includes(query) ||\n          item.description.toLowerCase().includes(query) ||\n          item.tags?.some(tag => tag.toLowerCase().includes(query))\n        );\n      }\n      \n      return true;\n    })\n    .sort((a, b) => {\n      switch (sortBy) {\n        case 'date':\n          return new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime();\n        case 'title':\n          return a.title.localeCompare(b.title);\n        case 'category':\n          return (a.category || '').localeCompare(b.category || '');\n        case 'priority':\n          const priorityOrder = { critical: 4, high: 3, medium: 2, low: 1 };\n          return (priorityOrder[b.priority || 'medium'] || 2) - (priorityOrder[a.priority || 'medium'] || 2);\n        default:\n          return 0;\n      }\n    }) || [];\n\n  // Auto-refresh functionality\n  useEffect(() => {\n    if (autoRefresh) {\n      refreshTimerRef.current = setInterval(() => {\n        fetchRSSFeed();\n      }, refreshInterval);\n    } else {\n      if (refreshTimerRef.current) {\n        clearInterval(refreshTimerRef.current);\n        refreshTimerRef.current = null;\n      }\n    }\n    \n    return () => {\n      if (refreshTimerRef.current) {\n        clearInterval(refreshTimerRef.current);\n      }\n    };\n  }, [autoRefresh, refreshInterval, fetchRSSFeed]);\n\n  // Initial load\n  useEffect(() => {\n    fetchRSSFeed();\n    \n    // Request notification permission on mount\n    requestNotificationPermission();\n    \n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n    };\n  }, []);\n\n  const stats = feed ? calculateStats(feed) : null;\n\n  // Get priority color\n  const getPriorityColor = (priority?: string) => {\n    switch (priority) {\n      case 'critical': return 'text-red-500 bg-red-50 dark:bg-red-900/20';\n      case 'high': return 'text-orange-500 bg-orange-50 dark:bg-orange-900/20';\n      case 'medium': return 'text-yellow-500 bg-yellow-50 dark:bg-yellow-900/20';\n      case 'low': return 'text-green-500 bg-green-50 dark:bg-green-900/20';\n      default: return 'text-gray-500 bg-gray-50 dark:bg-gray-900/20';\n    }\n  };\n\n  // Get category icon\n  const getCategoryIcon = (category?: string) => {\n    switch (category) {\n      case 'release': return <Package className=\"w-5 h-5\" />;\n      case 'feature': return <Code className=\"w-5 h-5\" />;\n      case 'company': return <Globe className=\"w-5 h-5\" />;\n      case 'security': return <Bug className=\"w-5 h-5\" />;\n      case 'performance': return <Zap className=\"w-5 h-5\" />;\n      case 'announcement': return <AlertCircle className=\"w-5 h-5\" />;\n      default: return <Rss className=\"w-5 h-5\" />;\n    }\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6 space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center space-x-4\">\n            <Rss className=\"w-10 h-10 text-cloudflare-orange\" />\n            <div>\n              <h1 className=\"text-3xl font-bold\">RSS Feed Manager</h1>\n              <p className=\"text-gray-600 dark:text-gray-400\">\n                Real-time parsing, tracking, and notifications for Bun releases\n              </p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-3\">\n            {/* Notification Status */}\n            <div className=\"flex items-center space-x-2\">\n              {notificationSettings.enabled ? (\n                <Bell className=\"w-5 h-5 text-green-500\" />\n              ) : (\n                <BellOff className=\"w-5 h-5 text-gray-400\" />\n              )}\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                {notificationSettings.enabled ? 'Notifications On' : 'Notifications Off'}\n              </span>\n            </div>\n            \n            {/* RPO Status */}\n            <div className=\"flex items-center space-x-2\">\n              <div className={`w-2 h-2 rounded-full ${\n                rpoIntegration.syncStatus === 'connected' ? 'bg-green-500' :\n                rpoIntegration.syncStatus === 'error' ? 'bg-red-500' : 'bg-gray-400'\n              }`}></div>\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                RPO {rpoIntegration.syncStatus}\n              </span>\n            </div>\n            \n            {/* Refresh Button */}\n            <button\n              onClick={() => fetchRSSFeed()}\n              disabled={loading}\n              className=\"p-2 bg-cloudflare-orange text-white rounded-md hover:bg-orange-600 disabled:opacity-50\"\n            >\n              <RefreshCw className={`w-5 h-5 ${loading ? 'animate-spin' : ''}`} />\n            </button>\n          </div>\n        </div>\n        \n        {/* Statistics */}\n        {stats && (\n          <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n            <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded\">\n              <div className=\"text-2xl font-bold text-blue-500\">{stats.totalItems}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Total Items</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded\">\n              <div className=\"text-2xl font-bold text-green-500\">{stats.unreadCount}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Unread</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded\">\n              <div className=\"text-2xl font-bold text-yellow-500\">{stats.newItemsSinceLastCheck}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">New Since Last Check</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded\">\n              <div className=\"text-2xl font-bold text-purple-500\">{stats.bookmarkedCount}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Bookmarked</div>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 dark:bg-gray-900 rounded\">\n              <div className=\"text-2xl font-bold text-orange-500\">{Object.keys(stats.categories).length}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Categories</div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Control Panel */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n        <h2 className=\"text-xl font-semibold mb-4\">Control Panel</h2>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {/* Search */}\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search feed...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700\"\n            />\n          </div>\n          \n          {/* Category Filter */}\n          <select\n            value={selectedCategory}\n            onChange={(e) => setSelectedCategory(e.target.value)}\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700\"\n          >\n            <option value=\"all\">All Categories</option>\n            <option value=\"release\">Releases</option>\n            <option value=\"feature\">Features</option>\n            <option value=\"company\">Company</option>\n            <option value=\"security\">Security</option>\n            <option value=\"performance\">Performance</option>\n            <option value=\"announcement\">Announcements</option>\n          </select>\n          \n          {/* Sort */}\n          <select\n            value={sortBy}\n            onChange={(e) => setSortBy(e.target.value as any)}\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700\"\n          >\n            <option value=\"date\">Sort by Date</option>\n            <option value=\"priority\">Sort by Priority</option>\n            <option value=\"title\">Sort by Title</option>\n            <option value=\"category\">Sort by Category</option>\n          </select>\n          \n          {/* View Options */}\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setShowUnreadOnly(!showUnreadOnly)}\n              className={`flex-1 px-3 py-2 rounded-md transition-colors ${\n                showUnreadOnly\n                  ? 'bg-cloudflare-orange text-white'\n                  : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300'\n              }`}\n            >\n              {showUnreadOnly ? <Eye className=\"w-4 h-4 inline mr-1\" /> : <EyeOff className=\"w-4 h-4 inline mr-1\" />}\n              Unread\n            </button>\n            <button\n              onClick={() => setShowNotifiedOnly(!showNotifiedOnly)}\n              className={`flex-1 px-3 py-2 rounded-md transition-colors ${\n                showNotifiedOnly\n                  ? 'bg-cloudflare-orange text-white'\n                  : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300'\n              }`}\n            >\n              <Bell className=\"w-4 h-4 inline mr-1\" />\n              Notified\n            </button>\n          </div>\n        </div>\n        \n        {/* Auto-refresh and Notifications */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n          <div className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg\">\n            <div className=\"flex items-center space-x-3\">\n              <RefreshCw className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n              <div>\n                <div className=\"font-medium\">Auto-refresh</div>\n                <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  {autoRefresh ? `Every ${refreshInterval / 60000} min` : 'Disabled'}\n                </div>\n              </div>\n            </div>\n            <button\n              onClick={() => setAutoRefresh(!autoRefresh)}\n              className={`px-4 py-2 rounded-md transition-colors ${\n                autoRefresh ? 'bg-green-500 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'\n              }`}\n            >\n              {autoRefresh ? 'Enabled' : 'Disabled'}\n            </button>\n          </div>\n          \n          <div className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-lg\">\n            <div className=\"flex items-center space-x-3\">\n              <Bell className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n              <div>\n                <div className=\"font-medium\">Notifications</div>\n                <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  {notificationSettings.enabled ? 'Active' : 'Disabled'}\n                </div>\n              </div>\n            </div>\n            <button\n              onClick={() => setNotificationSettings(prev => ({ ...prev, enabled: !prev.enabled }))}\n              className={`px-4 py-2 rounded-md transition-colors ${\n                notificationSettings.enabled ? 'bg-green-500 text-white' : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'\n              }`}\n            >\n              {notificationSettings.enabled ? 'Enabled' : 'Disabled'}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Feed Items */}\n      <div className=\"space-y-4\">\n        {filteredAndSortedItems.map((item) => {\n          const isExpanded = expandedItem === item.guid;\n          const priorityColor = getPriorityColor(item.priority);\n          \n          return (\n            <div\n              key={item.guid}\n              className={`bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-all ${\n                !item.read ? 'ring-2 ring-cloudflare-orange ring-opacity-50' : ''\n              } ${item.notified ? 'ring-2 ring-blue-500 ring-opacity-50' : ''}`}\n            >\n              <div className=\"p-6\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-start space-x-4 flex-1\">\n                    <div className=\"mt-1\">\n                      {getCategoryIcon(item.category)}\n                    </div>\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h3 className={`text-xl font-semibold ${\n                          !item.read ? 'text-gray-900 dark:text-gray-100' : 'text-gray-700 dark:text-gray-300'\n                        }`}>\n                          {item.title}\n                        </h3>\n                        \n                        {/* Status indicators */}\n                        <div className=\"flex items-center space-x-2\">\n                          {!item.read && (\n                            <div className=\"w-2 h-2 bg-cloudflare-orange rounded-full\"></div>\n                          )}\n                          {item.notified && (\n                            <Bell className=\"w-4 h-4 text-blue-500\" />\n                          )}\n                          {item.bookmarked && (\n                            <BookmarkCheck className=\"w-4 h-4 text-yellow-500\" />\n                          )}\n                        </div>\n                        \n                        {/* Priority badge */}\n                        <span className={`px-2 py-1 text-xs rounded-full font-medium ${priorityColor}`}>\n                          {item.priority?.toUpperCase() || 'MEDIUM'}\n                        </span>\n                        \n                        {/* Category badge */}\n                        <span className=\"px-2 py-1 text-xs rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300\">\n                          {item.category || 'announcement'}\n                        </span>\n                      </div>\n                      \n                      {/* Tags */}\n                      {item.tags && item.tags.length > 0 && (\n                        <div className=\"flex flex-wrap gap-2 mb-3\">\n                          {item.tags.slice(0, 5).map((tag, index) => (\n                            <span key={index} className=\"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded text-xs\">\n                              #{tag}\n                            </span>\n                          ))}\n                          {item.tags.length > 5 && (\n                            <span className=\"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded text-xs\">\n                              +{item.tags.length - 5} more\n                            </span>\n                          )}\n                        </div>\n                      )}\n                      \n                      {/* Metadata */}\n                      <div className=\"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-3\">\n                        <div className=\"flex items-center space-x-1\">\n                          <Clock className=\"w-4 h-4\" />\n                          <span>{new Date(item.pubDate).toLocaleString()}</span>\n                        </div>\n                        <a\n                          href={item.link}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"flex items-center space-x-1 hover:text-cloudflare-orange transition-colors\"\n                        >\n                          <ExternalLink className=\"w-4 h-4\" />\n                          <span>Read more</span>\n                        </a>\n                      </div>\n                      \n                      {/* Description */}\n                      <div className=\"text-gray-600 dark:text-gray-400\">\n                        {isExpanded ? (\n                          <div>\n                            <p className=\"whitespace-pre-wrap\">{item.description}</p>\n                            <button\n                              onClick={() => setExpandedItem(null)}\n                              className=\"mt-3 text-cloudflare-orange hover:text-orange-600 text-sm font-medium\"\n                            >\n                              Show less\n                            </button>\n                          </div>\n                        ) : (\n                          <div>\n                            <p className=\"line-clamp-3\">{item.description}</p>\n                            {item.description.length > 200 && (\n                              <button\n                                onClick={() => setExpandedItem(item.guid)}\n                                className=\"mt-2 text-cloudflare-orange hover:text-orange-600 text-sm font-medium\"\n                              >\n                                Read more\n                              </button>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Actions */}\n                  <div className=\"flex flex-col space-y-2 ml-4\">\n                    {!item.read && (\n                      <button\n                        onClick={() => markAsRead(item.guid)}\n                        className=\"p-2 text-gray-500 hover:text-cloudflare-orange transition-colors\"\n                        title=\"Mark as read\"\n                      >\n                        <div className=\"w-4 h-4 border-2 border-current rounded\"></div>\n                      </button>\n                    )}\n                    <button\n                      onClick={() => toggleBookmark(item.guid)}\n                      className=\"p-2 text-gray-500 hover:text-yellow-500 transition-colors\"\n                      title=\"Bookmark\"\n                    >\n                      {item.bookmarked ? <BookmarkCheck className=\"w-4 h-4 text-yellow-500\" /> : <Bookmark className=\"w-4 h-4\" />}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      \n      {filteredAndSortedItems.length === 0 && (\n        <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\n          <Rss className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n          <p>No items found matching your criteria.</p>\n        </div>\n      )}\n    </div>\n  );\n}
