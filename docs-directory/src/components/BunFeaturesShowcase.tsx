import React from 'react';\nimport { useBunSecurity } from '../hooks/useBunSecurity';\nimport { useBunPerformance } from '../hooks/useBunPerformance';\nimport { useBunRealtime } from '../hooks/useBunRealtime';\nimport { useBunDataProcessing } from '../hooks/useBunDataProcessing';\nimport { useBunDeveloperTools } from '../hooks/useBunDeveloperTools';\nimport { formatBytes } from '../hooks/useBunPerformance';\n\nexport default function BunFeaturesShowcase() {\n  const { metrics, triggerGC, isLoading: perfLoading } = useBunPerformance();\n  const { csrfProtection, passwordHashing, htmlEscaping, cryptographicHashing } = useBunSecurity();\n  const { eventSource, webSocket, server } = useBunRealtime();\n  const { jsonVariants, configFormats, objectComparison, versionManagement } = useBunDataProcessing();\n  const { editor, inspection, terminal, cli } = useBunDeveloperTools();\n\n  const [testResults, setTestResults] = React.useState<string[]>([]);\n  const [isTesting, setIsTesting] = React.useState(false);\n\n  const addResult = (result: string) => {\n    setTestResults(prev => [...prev, `${new Date().toLocaleTimeString()}: ${result}`]);\n  };\n\n  const runSecurityTests = async () => {\n    addResult('üîí Testing Security Features...');\n    \n    try {\n      // CSRF Token Generation\n      const token = csrfProtection.generateToken();\n      addResult(`‚úÖ CSRF Token Generated: ${token.substring(0, 20)}...`);\n      \n      // Password Hashing\n      const password = 'testPassword123';\n      const hash = await passwordHashing.hash(password);\n      const isValid = await passwordHashing.verify(password, hash);\n      addResult(`‚úÖ Password Hashing: ${isValid ? 'Valid' : 'Invalid'}`);\n      \n      // HTML Escaping\n      const malicious = '<script>alert(\"xss\")</script>';\n      const escaped = htmlEscaping.escape(malicious);\n      addResult(`‚úÖ HTML Escaping: ${malicious} ‚Üí ${escaped}`);\n      \n      // Cryptographic Hashing\n      const data = 'Bun is awesome!';\n      const sha256 = cryptographicHashing.sha256(data);\n      addResult(`‚úÖ SHA-256 Hash: ${sha256.substring(0, 20)}...`);\n      \n    } catch (error) {\n      addResult(`‚ùå Security Test Failed: ${error}`);\n    }\n  };\n\n  const runPerformanceTests = async () => {\n    addResult('‚ö° Testing Performance Features...');\n    \n    try {\n      if (metrics) {\n        addResult(`üìä Memory Usage: ${formatBytes(metrics.memoryUsage.heapUsed)}`);\n        addResult(`üìä Uptime: ${Math.floor(metrics.uptime)}s`);\n        addResult(`üìä Bun Version: ${metrics.bunVersion}`);\n      }\n      \n      // Trigger Garbage Collection\n      await triggerGC();\n      addResult('üóëÔ∏è Garbage Collection Triggered');\n      \n    } catch (error) {\n      addResult(`‚ùå Performance Test Failed: ${error}`);\n    }\n  };\n\n  const runDataProcessingTests = async () => {\n    addResult('üìÑ Testing Data Processing Features...');\n    \n    try {\n      // JSON Variants\n      const json5Content = '{\n  // This is a comment\n  \"name\": \"Bun Docs\",\n  \"version\": \"1.0.0\" /* inline comment */\n}';\n      const parsed = jsonVariants.parseJSON5(json5Content);\n      addResult(`‚úÖ JSON5 Parsed: ${JSON.stringify(parsed)}`);\n      \n      // YAML Parsing\n      const yamlContent = 'name: Bun Docs\\nversion: 1.0.0\\ndescription: Awesome docs';\n      const yamlParsed = configFormats.parseYAML(yamlContent);\n      addResult(`‚úÖ YAML Parsed: ${JSON.stringify(yamlParsed)}`);\n      \n      // Object Comparison\n      const obj1 = { name: 'test', value: 123 };\n      const obj2 = { name: 'test', value: 123 };\n      const isEqual = objectComparison.deepEquals(obj1, obj2);\n      addResult(`‚úÖ Deep Equality: ${isEqual}`);\n      \n      // Version Management\n      const version = versionManagement.parse('1.2.3');\n      addResult(`‚úÖ Version Parsed: ${version.major}.${version.minor}.${version.patch}`);\n      \n    } catch (error) {\n      addResult(`‚ùå Data Processing Test Failed: ${error}`);\n    }\n  };\n\n  const runDeveloperToolsTests = async () => {\n    addResult('üõ†Ô∏è Testing Developer Tools...');\n    \n    try {\n      // CLI Arguments\n      const args = cli.getArguments();\n      addResult(`‚úÖ CLI Arguments: ${args.length} found`);\n      \n      // Environment Variables\n      const env = cli.getEnvironment();\n      addResult(`‚úÖ Environment Variables: ${Object.keys(env).length} found`);\n      \n      // Object Inspection\n      const testObj = { complex: { nested: { data: [1, 2, 3] } } };\n      const inspected = inspection.inspect(testObj, { depth: 2 });\n      addResult(`‚úÖ Object Inspection: ${inspected.substring(0, 50)}...`);\n      \n      // Terminal Info\n      const termInfo = terminal.getTerminalInfo();\n      addResult(`‚úÖ Terminal: ${termInfo.columns}x${termInfo.rows}, Colors: ${termInfo.supportsColor}`);\n      \n    } catch (error) {\n      addResult(`‚ùå Developer Tools Test Failed: ${error}`);\n    }\n  };\n\n  const runAllTests = async () => {\n    setIsTesting(true);\n    setTestResults([]);\n    \n    await runSecurityTests();\n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    await runPerformanceTests();\n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    await runDataProcessingTests();\n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    await runDeveloperToolsTests();\n    \n    addResult('üéâ All tests completed!');\n    setIsTesting(false);\n  };\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-6 space-y-8\">\n      <div className=\"text-center space-y-4\">\n        <h1 className=\"text-4xl font-bold text-cloudflare-orange\">\n          üöÄ Advanced Bun Features Showcase\n        </h1>\n        <p className=\"text-lg text-gray-600 dark:text-gray-400\">\n          Explore the powerful capabilities of Bun's runtime features\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {/* Security Features */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n          <div className=\"flex items-center mb-4\">\n            <div className=\"text-3xl mr-3\">üîí</div>\n            <h2 className=\"text-xl font-semibold\">Security</h2>\n          </div>\n          <ul className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n            <li>‚Ä¢ CSRF Protection</li>\n            <li>‚Ä¢ Password Hashing (Argon2/BCrypt)</li>\n            <li>‚Ä¢ HTML Escaping</li>\n            <li>‚Ä¢ Cryptographic Hashing</li>\n            <li>‚Ä¢ Secure Token Generation</li>\n          </ul>\n          <button\n            onClick={runSecurityTests}\n            disabled={isTesting}\n            className=\"mt-4 w-full px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50\"\n          >\n            Test Security\n          </button>\n        </div>\n\n        {/* Performance Features */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n          <div className=\"flex items-center mb-4\">\n            <div className=\"text-3xl mr-3\">‚ö°</div>\n            <h2 className=\"text-xl font-semibold\">Performance</h2>\n          </div>\n          <ul className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n            <li>‚Ä¢ Memory Monitoring</li>\n            <li>‚Ä¢ Garbage Collection</li>\n            <li>‚Ä¢ Heap Snapshots</li>\n            <li>‚Ä¢ High-Precision Timing</li>\n            <li>‚Ä¢ Memory Inspection</li>\n          </ul>\n          <button\n            onClick={runPerformanceTests}\n            disabled={isTesting}\n            className=\"mt-4 w-full px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 disabled:opacity-50\"\n          >\n            Test Performance\n          </button>\n        </div>\n\n        {/* Data Processing */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n          <div className=\"flex items-center mb-4\">\n            <div className=\"text-3xl mr-3\">üìÑ</div>\n            <h2 className=\"text-xl font-semibold\">Data Processing</h2>\n          </div>\n          <ul className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n            <li>‚Ä¢ JSON5/JSONC/JSONL</li>\n            <li>‚Ä¢ YAML/TOML Support</li>\n            <li>‚Ä¢ Deep Object Comparison</li>\n            <li>‚Ä¢ Semantic Versioning</li>\n            <li>‚Ä¢ Format Detection</li>\n          </ul>\n          <button\n            onClick={runDataProcessingTests}\n            disabled={isTesting}\n            className=\"mt-4 w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50\"\n          >\n            Test Data Processing\n          </button>\n        </div>\n\n        {/* Real-time Features */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n          <div className=\"flex items-center mb-4\">\n            <div className=\"text-3xl mr-3\">üåê</div>\n            <h2 className=\"text-xl font-semibold\">Real-time</h2>\n          </div>\n          <ul className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n            <li>‚Ä¢ EventSource (SSE)</li>\n            <li>‚Ä¢ Enhanced WebSocket</li>\n            <li>‚Ä¢ HTTP Server</li>\n            <li>‚Ä¢ Message Formatting</li>\n            <li>‚Ä¢ Auto-reconnection</li>\n          </ul>\n          <div className=\"mt-4 text-center\">\n            <span className=\"text-sm text-gray-500\">\n              Status: {eventSource.isConnected || webSocket.isConnected ? 'üü¢ Connected' : 'üî¥ Disconnected'}\n            </span>\n          </div>\n        </div>\n\n        {/* Developer Tools */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n          <div className=\"flex items-center mb-4\">\n            <div className=\"text-3xl mr-3\">üõ†Ô∏è</div>\n            <h2 className=\"text-xl font-semibold\">Developer Tools</h2>\n          </div>\n          <ul className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n            <li>‚Ä¢ Editor Integration</li>\n            <li>‚Ä¢ Object Inspection</li>\n            <li>‚Ä¢ ANSI Colors</li>\n            <li>‚Ä¢ CLI Utilities</li>\n            <li>‚Ä¢ Environment Info</li>\n          </ul>\n          <button\n            onClick={runDeveloperToolsTests}\n            disabled={isTesting}\n            className=\"mt-4 w-full px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 disabled:opacity-50\"\n          >\n            Test Dev Tools\n          </button>\n        </div>\n\n        {/* File System */}\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n          <div className=\"flex items-center mb-4\">\n            <div className=\"text-3xl mr-3\">üìÅ</div>\n            <h2 className=\"text-xl font-semibold\">File System</h2>\n          </div>\n          <ul className=\"space-y-2 text-sm text-gray-600 dark:text-gray-400\">\n            <li>‚Ä¢ Ultra-fast File I/O</li>\n            <li>‚Ä¢ Memory-mapped Files</li>\n            <li>‚Ä¢ Built-in Compression</li>\n            <li>‚Ä¢ File System Router</li>\n            <li>‚Ä¢ Stream Processing</li>\n          </ul>\n          <div className=\"mt-4 text-center\">\n            <span className=\"text-sm text-gray-500\">\n              Available in Bun runtime\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* Test Results */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-semibold\">Test Results</h2>\n          <button\n            onClick={runAllTests}\n            disabled={isTesting}\n            className=\"px-6 py-2 bg-cloudflare-orange text-white rounded-md hover:bg-orange-600 disabled:opacity-50 flex items-center space-x-2\"\n          >\n            {isTesting ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                <span>Testing...</span>\n              </>\n            ) : (\n              <span>üß™ Run All Tests</span>\n            )}\n          </button>\n        </div>\n        \n        <div className=\"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 h-64 overflow-y-auto\">\n          {testResults.length === 0 ? (\n            <p className=\"text-gray-500 text-center\">Click \"Run All Tests\" to see the results</p>\n          ) : (\n            <div className=\"space-y-1 font-mono text-sm\">\n              {testResults.map((result, index) => (\n                <div key={index} className=\"text-gray-700 dark:text-gray-300\">\n                  {result}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Performance Metrics */}\n      {metrics && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6\">\n          <h2 className=\"text-xl font-semibold mb-4\">Live Performance Metrics</h2>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-500\">\n                {formatBytes(metrics.memoryUsage.heapUsed)}\n              </div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Heap Used</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-green-500\">\n                {formatBytes(metrics.memoryUsage.rss)}\n              </div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">RSS</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-yellow-500\">\n                {Math.floor(metrics.uptime)}s\n              </div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Uptime</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-500\">\n                {metrics.bunVersion}\n              </div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-400\">Bun Version</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}
