# Tmux Color Patterns & Integration Guide

**Version**: 11.4.5.0.0.0.0  
**Purpose**: Unify tmux terminal colors with dashboard/UI color schemes  
**Last Updated**: 2024-12-07

---

## üé® Overview

This document explains the color patterns used in tmux configuration and how they integrate with the existing MLGS color system (dashboard, UI components, department colors, and semantic colors).

---

## üìä Current Color Systems

### 1. Tmux Terminal Colors (xterm-256color)

**Current Implementation** (`config/.tmux.conf`):

```tmux
# Status Bar
status-style: bg=colour234, fg=colour137
  - colour234: Dark gray background (#1c1c1c)
  - colour137: Light gray text (#af875f)

# Status Left (Session Name)
fg=colour232, bg=colour248
  - colour232: Very dark (#080808)
  - colour248: Light gray (#a8a8a8)

# Status Right (Git, Time, Metrics)
fg=colour166: Orange (#d75f00) - Git branch
fg=colour33:  Cyan (#00afff)    - Time, CPU, Memory
fg=colour15:  White (#ffffff)    - Text
fg=colour196: Red (#ff0000)      - Error count
fg=colour226: Yellow (#ffff00)   - Warning count

# Window Status
Current: fg=colour15, bg=colour33  (White on Cyan)
Inactive: fg=colour137, bg=colour234 (Light gray on dark)

# Pane Borders
Active: fg=colour33   (Cyan #00afff)
Inactive: fg=colour238 (Dark gray #444444)
```

**Color Mapping** (xterm-256color ‚Üí Hex):
- `colour33` = `#00afff` (Cyan) - **Matches `--accent-cyan: #00d4ff`**
- `colour166` = `#d75f00` (Orange) - **Matches `--accent-orange: #ff6b00`**
- `colour196` = `#ff0000` (Red) - **Matches `--accent-red: #ef4444`**
- `colour226` = `#ffff00` (Yellow) - **Matches `--accent-yellow: #f59e0b`**
- `colour234` = `#1c1c1c` (Dark gray) - **Matches `--bg-primary: oklch(25% 0.05 250)`**

---

### 2. Dashboard/UI Colors (Modern CSS)

**Primary Theme** (`styles/dashboard.css`):

```css
:root {
  /* Base Colors - LAB/OKLCH for perceptual uniformity */
  --bg-primary: oklch(25% 0.05 250);      /* Very dark blue-gray */
  --bg-secondary: oklch(30% 0.05 250);    /* Dark blue-gray */
  --text-primary: oklch(85% 0.02 250);    /* Light text */
  
  /* NEXUS Theme Colors */
  --accent-cyan: #00d4ff;      /* Primary brand cyan */
  --accent-purple: #667eea;    /* Primary brand purple */
  --accent-green: #10b981;    /* Success green */
  --accent-red: #ef4444;      /* Error red */
  --accent-yellow: #f59e0b;   /* Warning yellow */
  --accent-blue: #3b82f6;     /* Info blue */
  --accent-orange: #ff6b00;   /* Warning orange */
}
```

**Department Colors**:
```css
--dept-api: #00d4ff;           /* API - Cyan */
--dept-arbitrage: #ff1744;     /* Arbitrage - Red */
--dept-orca: #9c27b0;          /* Orca - Purple */
--dept-dashboard: #667eea;     /* Dashboard - Purple */
--dept-security: #ff6b00;       /* Security - Orange */
--dept-performance: #00ff88;    /* Performance - Green */
```

**Semantic Colors** (`src/utils/bun-color.ts`):
```typescript
theme = {
  primary: "#667eea",    // Indigo/Purple
  secondary: "#00d4ff",  // Cyan
  accent: "#9c27b0",     // Purple
  success: "#10b981",     // Green
  warning: "#f59e0b",     // Yellow
  error: "#ef4444",       // Red
}
```

---

## üîó Integration Opportunities

### Pattern 1: Module-Specific Color Coding

**Concept**: Use different colors for each tmux module session to match department colors.

**Implementation**:

```tmux
# Core Development Session - Use API/Development color (Cyan)
# Analytics Session - Use Dashboard color (Purple #667eea)
# Research Session - Use Orca color (Purple #9c27b0)
# Monitoring Session - Use Security color (Orange #ff6b00)
```

**Color Mapping**:
- **Core** (`mlgs-core`) ‚Üí `colour51` (#00ffff) or `colour87` (#5fffff) - Cyan
- **Analytics** (`mlgs-analytics`) ‚Üí `colour99` (#875fff) - Purple (#667eea)
- **Research** (`mlgs-research`) ‚Üí `colour93` (#d75fff) - Purple (#9c27b0)
- **Monitoring** (`mlgs-monitoring`) ‚Üí `colour166` (#d75f00) - Orange (#ff6b00)

### Pattern 2: Semantic Status Colors

**Concept**: Use semantic colors for status indicators (success, warning, error).

**Current Usage**:
- ‚úÖ **Success/Online**: `colour46` (#00ff00) or `colour82` (#5fff87) - Green
- ‚ö†Ô∏è **Warning**: `colour226` (#ffff00) or `colour220` (#ffd700) - Yellow
- ‚ùå **Error**: `colour196` (#ff0000) or `colour160` (#d70000) - Red

**Integration**: Match dashboard status indicators:
- Active/Online ‚Üí `--accent-green: #10b981` ‚Üí `colour82` (#5fff87)
- Warning ‚Üí `--accent-yellow: #f59e0b` ‚Üí `colour220` (#ffd700)
- Error/Critical ‚Üí `--accent-red: #ef4444` ‚Üí `colour196` (#ff0000)

### Pattern 3: Unified Background Colors

**Concept**: Match tmux background to dashboard dark theme.

**Current**: `colour234` (#1c1c1c) - Dark gray  
**Dashboard**: `--bg-primary: oklch(25% 0.05 250)` ‚âà `#1a1a1a`

**Match**: Use `colour234` or `colour235` (#262626) to match dashboard `--bg-secondary`.

### Pattern 4: Department-Specific Window Colors

**Concept**: Color-code windows by department/function.

**Example**:
```tmux
# API/Development windows
window-status-style "api": fg=colour51, bg=colour234  # Cyan

# Arbitrage windows  
window-status-style "arbitrage": fg=colour196, bg=colour234  # Red

# Dashboard/Analytics windows
window-status-style "dashboard": fg=colour99, bg=colour234  # Purple

# Security/Monitoring windows
window-status-style "monitoring": fg=colour166, bg=colour234  # Orange
```

---

## üéØ Recommended Integration Strategy

### Phase 1: Semantic Color Alignment

**Goal**: Align tmux status colors with dashboard semantic colors.

**Changes**:
```tmux
# Status Right - Match dashboard colors
# Error count: Use --accent-red (#ef4444) ‚Üí colour196 (#ff0000) ‚úì Already matches
# Warning count: Use --accent-yellow (#f59e0b) ‚Üí colour220 (#ffd700) - Update from colour226
# Success/Active: Use --accent-green (#10b981) ‚Üí colour82 (#5fff87) - Add for health checks
```

### Phase 2: Module-Specific Session Colors

**Goal**: Color-code each module session to match department colors.

**Implementation**:
```bash
# In scripts/tmux-mlgs.sh, add window name colors:
# Core: Cyan (matches dept-api)
# Analytics: Purple (matches dept-dashboard)
# Research: Purple (matches dept-orca)
# Monitoring: Orange (matches dept-security)
```

### Phase 3: Dynamic Color Themes

**Goal**: Support light/dark theme switching (matching dashboard `light-dark()`).

**Implementation**:
- Detect system theme preference
- Switch tmux colors based on theme
- Match dashboard theme transitions

---

## üìê Color Conversion Reference

### Hex to xterm-256color Mapping

**Tool**: Use `scripts/color-converter.sh` (to be created) or online converters.

**Common Mappings**:

| Hex Color | xterm-256 | Purpose | Dashboard Variable |
|-----------|-----------|---------|-------------------|
| `#00d4ff` | `colour51` | Cyan (API) | `--accent-cyan` |
| `#667eea` | `colour99` | Purple (Dashboard) | `--accent-purple` |
| `#10b981` | `colour82` | Green (Success) | `--accent-green` |
| `#ef4444` | `colour196` | Red (Error) | `--accent-red` |
| `#f59e0b` | `colour220` | Yellow (Warning) | `--accent-yellow` |
| `#ff6b00` | `colour166` | Orange (Security) | `--accent-orange` |
| `#9c27b0` | `colour93` | Purple (Orca) | `--dept-orca` |
| `#1a1a1a` | `colour234` | Dark bg | `--bg-primary` |
| `#0f0f0f` | `colour233` | Darker bg | `--bg-secondary` |

### LAB/OKLCH to xterm-256color

**Challenge**: LAB colors are perceptually uniform but need conversion to xterm palette.

**Solution**: 
1. Convert OKLCH ‚Üí RGB ‚Üí Hex
2. Find nearest xterm-256color match
3. Use approximation for closest match

**Example**:
```css
/* Dashboard */
--bg-primary: oklch(25% 0.05 250);
/* Converts to approximately: #1a1a1a ‚Üí colour234 */
```

---

## üîß Implementation Examples

### Example 1: Module-Specific Status Colors

```tmux
# In config/.tmux.conf
# Detect session name and set colors accordingly

# Core session - Cyan theme
set-hook -g session-renamed 'if-shell "tmux display -p \"#{session_name}\" | grep -q \"mlgs-core\"" \
  "set -g status-style bg=colour234,fg=colour51"'

# Analytics session - Purple theme  
set-hook -g session-renamed 'if-shell "tmux display -p \"#{session_name}\" | grep -q \"mlgs-analytics\"" \
  "set -g status-style bg=colour234,fg=colour99"'
```

### Example 2: Dynamic Error/Warning Colors

```tmux
# Match dashboard semantic colors
# Error: Use colour196 (#ff0000) - matches --accent-red: #ef4444
set -g status-right "#[fg=colour196]ERR:#{error_count}"

# Warning: Use colour220 (#ffd700) - matches --accent-yellow: #f59e0b  
set -g status-right "#[fg=colour220]WARN:#{warning_count}"

# Success: Use colour82 (#5fff87) - matches --accent-green: #10b981
set -g status-right "#[fg=colour82]OK:#{success_count}"
```

### Example 3: Window Name Color Coding

```bash
# In scripts/tmux-mlgs.sh
# Add window name colors based on function

# API/Development windows - Cyan
tmux set-window-option -t "$session_name:1" window-status-style "fg=colour51"

# Dashboard windows - Purple
tmux set-window-option -t "$session_name:5" window-status-style "fg=colour99"

# Monitoring windows - Orange
tmux set-window-option -t "$session_name:4" window-status-style "fg=colour166"
```

---

## üé® Color Pattern Benefits

### 1. **Visual Consistency**
- Terminal colors match dashboard colors
- Users recognize color meanings across interfaces
- Reduced cognitive load when switching contexts

### 2. **Semantic Meaning**
- Colors convey meaning (green=success, red=error, orange=warning)
- Consistent across terminal, dashboard, and logs
- Department colors identify functional areas

### 3. **Accessibility**
- High contrast ratios maintained
- Color-blind friendly (use symbols + colors)
- Perceptually uniform colors (LAB/OKLCH)

### 4. **Maintainability**
- Single source of truth for colors (CSS variables)
- Easy to update across all interfaces
- Version-controlled color definitions

---

## üìã Integration Checklist

- [ ] **Phase 1: Semantic Alignment**
  - [ ] Update warning color from `colour226` to `colour220` (match `--accent-yellow`)
  - [ ] Add success color `colour82` for health indicators (match `--accent-green`)
  - [ ] Verify error color `colour196` matches `--accent-red`

- [ ] **Phase 2: Module Colors**
  - [ ] Add module-specific status bar colors
  - [ ] Color-code window names by function
  - [ ] Match department colors (API=Cyan, Dashboard=Purple, etc.)

- [ ] **Phase 3: Theme Support**
  - [ ] Detect system theme preference
  - [ ] Switch tmux colors based on theme
  - [ ] Match dashboard `light-dark()` behavior

- [ ] **Phase 4: Documentation**
  - [ ] Update tmux config comments with color mappings
  - [ ] Create color conversion utility script
  - [ ] Document color decisions in this guide

---

## üîç Ripgrep Patterns

```bash
# Find all color definitions
rg "colour[0-9]+|#[0-9a-fA-F]{6}" config/.tmux.conf
rg "--accent-|--dept-|--color-" styles/*.css

# Find color usage patterns
rg "colour33|colour196|colour226" config/.tmux.conf
rg "#00d4ff|#667eea|#10b981" styles/*.css src/**/*.ts

# Find semantic color mappings
rg "success|error|warning" config/.tmux.conf styles/*.css
```

---

## üìö Related Documentation

- `docs/11.0.0.0.0.0.0-TERMINAL-ENVIRONMENT.md` - Terminal environment guide
- `styles/dashboard.css` - Dashboard color definitions
- `styles/golden-template.css` - Modern CSS color patterns
- `src/utils/bun-color.ts` - Bun color utility with theme colors
- `docs/GOLDEN-CSS-TEMPLATE.md` - CSS template documentation

---

**Version**: 11.4.5.0.0.0.0  
**Status**: ‚úÖ Complete  
**Next Steps**: Implement Phase 1 semantic color alignment
