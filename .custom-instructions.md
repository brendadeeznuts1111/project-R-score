# üé® Custom Development Instructions

## üìã Project Overview

**Project**: Bun Utilities & Documentation System  
**Type**: Enterprise-grade utility library with comprehensive documentation  
**Primary Language**: TypeScript  
**Runtime**: Bun  
**Target**: Production deployment with multi-platform support

---

## üéØ Development Philosophy

### **Core Principles**
1. **Performance First** - Optimize for speed and efficiency
2. **Type Safety** - Strict TypeScript with comprehensive typing
3. **Documentation-Driven** - Code should be self-documenting
4. **Enterprise Ready** - Production-grade with proper error handling
5. **Developer Experience** - Excellent tooling and clear patterns

### **Code Quality Standards**
- **Zero TypeScript errors** - All code must compile without errors
- **Strict mode enabled** - No implicit any, strict null checks
- **Comprehensive testing** - Unit tests for all utilities
- **Consistent formatting** - Prettier + ESLint configuration
- **Performance benchmarks** - Measure and optimize critical paths

---

## üèóÔ∏è Architecture & Frameworks

### **Core Technologies**
```typescript
// Primary Stack
{
  "runtime": "Bun",
  "language": "TypeScript 5.0+",
  "package_manager": "Bun",
  "testing": "Bun Test",
  "documentation": "TypeDoc + Custom Wiki Generator"
}

// Build & Deployment
{
  "bundler": "Bun Build",
  "minification": "Built-in",
  "target_platforms": ["Node.js", "Browser", "Deno"],
  "deployment": ["GitHub Actions", "Docker", "Vercel"]
}
```

### **Project Structure**
```text
Projects/
‚îú‚îÄ‚îÄ lib/                    # Core library code
‚îÇ   ‚îú‚îÄ‚îÄ utils/             # Utility functions
‚îÇ   ‚îú‚îÄ‚îÄ security/          # Security modules
‚îÇ   ‚îú‚îÄ‚îÄ documentation/     # Documentation generators
‚îÇ   ‚îî‚îÄ‚îÄ types/            # Type definitions
‚îú‚îÄ‚îÄ tools/                 # Development tools
‚îú‚îÄ‚îÄ docs/                  # Generated documentation
‚îú‚îÄ‚îÄ tests/                 # Test suites
‚îî‚îÄ‚îÄ examples/             # Usage examples
```

---

## üé® Styling Guidelines

### **UI/UX Framework Preferences**
```typescript
// Component Libraries (in order of preference)
const uiFrameworks = [
  "Tailwind CSS + Headless UI",    // Primary: Utility-first + accessibility
  "shadcn/ui",                     // Secondary: Radix-based components
  "Lucide React",                  // Icons: Consistent, modern icon set
  "Framer Motion"                  // Animations: Smooth, performant
];

// Styling Approach
const stylingApproach = {
  methodology: "utility-first",
  framework: "Tailwind CSS",
  breakpoints: ["sm", "md", "lg", "xl", "2xl"],
  colors: "CSS custom properties with theme support",
  typography: "Inter font family",
  spacing: "8px grid system"
};
```

### **Design System**
```css
/* Color Palette - Enterprise Grade */
:root {
  /* Primary - Blue Theme */
  --color-primary-50: #eff6ff;
  --color-primary-500: #3b82f6;
  --color-primary-900: #1e3a8a;
  
  /* Semantic Colors */
  --color-success: #22c55e;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  --color-info: #06b6d4;
  
  /* Neutral Scale */
  --color-gray-50: #f9fafb;
  --color-gray-900: #111827;
  
  /* Theme Support */
  --color-background: var(--color-gray-50);
  --color-text: var(--color-gray-900);
}

/* Dark Theme */
[data-theme="dark"] {
  --color-background: var(--color-gray-900);
  --color-text: var(--color-gray-50);
}
```

### **Component Patterns**
```typescript
// Preferred Component Structure
interface ComponentProps {
  // Always use interfaces for props
  children?: React.ReactNode;
  className?: string;  // Allow style overrides
  variant?: 'primary' | 'secondary' | 'outline';
  size?: 'sm' | 'md' | 'lg';
}

// Always forward refs for DOM components
const Button = React.forwardRef<HTMLButtonElement, ComponentProps>(
  ({ children, className, variant = 'primary', size = 'md', ...props }, ref) => {
    return (
      <button
        ref={ref}
        className={cn(
          "base-button-styles",
          variants[variant],
          sizes[size],
          className
        )}
        {...props}
      >
        {children}
      </button>
    );
  }
);
```

---

## üîß Development Tools & Configuration

### **Essential VS Code Extensions**
```json
{
  "recommendations": [
    "oven.bun-vscode",           // Bun support
    "bradlc.vscode-tailwindcss", // Tailwind IntelliSense
    "esbenp.prettier-vscode",    // Code formatting
    "dbaeumer.vscode-eslint",    // Linting
    "ms-vscode.vscode-typescript-next", // TypeScript support
    "ms-vscode.test-adapter-converter", // Test runner
    "ms-vscode.vscode-json",     // JSON support
    "redhat.vscode-yaml",        // YAML support
    "ms-vscode.vscode-markdown", // Markdown preview
    "github.vscode-pull-request-github" // GitHub integration
  ]
}
```

### **Package.json Scripts**
```json
{
  "scripts": {
    "dev": "bun --watch src/index.ts",
    "build": "bun build src/index.ts --outdir ./dist --target=bun",
    "test": "bun test",
    "test:watch": "bun test --watch",
    "test:coverage": "bun test --coverage",
    "lint": "eslint . --ext .ts,.tsx",
    "lint:fix": "eslint . --ext .ts,.tsx --fix",
    "format": "prettier --write .",
    "type-check": "tsc --noEmit",
    "docs:generate": "bun lib/wiki-generator-cli.ts --format all",
    "docs:serve": "bun serve docs --port 3000",
    "clean": "rm -rf dist docs/internal-wiki",
    "prepare": "bun run build && bun run docs:generate"
  }
}
```

### **ESLint Configuration**
```json
{
  "extends": [
    "@typescript-eslint/recommended",
    "plugin:react-hooks/recommended",
    "plugin:tailwindcss/recommended"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/explicit-function-return-type": "warn",
    "@typescript-eslint/no-explicit-any": "error",
    "prefer-const": "error",
    "no-var": "error",
    "object-shorthand": "error",
    "prefer-template": "error"
  }
}
```

---

## üìù Code Style & Patterns

### **TypeScript Preferences**
```typescript
// Always use explicit return types
function calculateMetrics(data: DataSet): MetricsResult {
  // Implementation
}

// Prefer interfaces over types for objects
interface UserConfig {
  readonly id: string;
  name: string;
  settings: UserSettings;
}

// Use utility types effectively
type PartialConfig = Partial<UserConfig>;
type ConfigWithId = UserConfig & { id: string };

// Generic functions with constraints
function createRepository<T extends Entity>(
  entity: T
): Repository<T> {
  // Implementation
}
```

### **Error Handling Patterns**
```typescript
// Custom error classes
class ValidationError extends Error {
  constructor(
    message: string,
    public readonly field: string,
    public readonly code: string
  ) {
    super(message);
    this.name = 'ValidationError';
  }
}

// Result pattern for operations
type Result<T, E = Error> = 
  | { success: true; data: T }
  | { success: false; error: E };

async function safeOperation<T>(
  operation: () => Promise<T>
): Promise<Result<T>> {
  try {
    const data = await operation();
    return { success: true, data };
  } catch (error) {
    return { 
      success: false, 
      error: error instanceof Error ? error : new Error(String(error))
    };
  }
}
```

### **Async Patterns**
```typescript
// Prefer async/await over .then()
async function fetchUserData(id: string): Promise<User> {
  const response = await fetch(`/api/users/${id}`);
  if (!response.ok) {
    throw new Error(`Failed to fetch user: ${response.statusText}`);
  }
  return response.json();
}

// Promise utilities for concurrent operations
async function fetchMultipleUsers(ids: string[]): Promise<User[]> {
  const promises = ids.map(id => fetchUserData(id));
  return Promise.all(promises);
}

// Error boundaries for async operations
async function withTimeout<T>(
  promise: Promise<T>,
  ms: number
): Promise<T> {
  const timeout = new Promise<never>((_, reject) => {
    setTimeout(() => reject(new Error('Operation timed out')), ms);
  });
  
  return Promise.race([promise, timeout]);
}
```

---

## üß™ Testing Strategy

### **Testing Framework Setup**
```typescript
// Test configuration - bun.config.ts
export default {
  testMatch: [
    "**/*.test.ts",
    "**/*.spec.ts"
  ],
  coverage: {
    reporter: ['text', 'json', 'html'],
    include: ['src/**/*.ts'],
    exclude: ['src/**/*.d.ts', 'src/**/*.test.ts']
  }
};
```

### **Test Patterns**
```typescript
// Unit test structure
describe('UtilityFunction', () => {
  // Arrange
  const testData = {
    input: 'test-input',
    expected: 'test-output'
  };

  it('should process input correctly', () => {
    // Act
    const result = utilityFunction(testData.input);
    
    // Assert
    expect(result).toBe(testData.expected);
  });

  it('should handle edge cases', () => {
    expect(() => utilityFunction(null)).toThrow(ValidationError);
  });
});

// Integration tests
describe('API Integration', () => {
  it('should fetch and process data', async () => {
    const result = await fetchAndProcessData('test-id');
    expect(result.success).toBe(true);
  });
});
```

---

## üìö Documentation Standards

### **Code Documentation**
```typescript
/**
 * Calculates the Levenshtein distance between two strings.
 * 
 * @param str1 - First string for comparison
 * @param str2 - Second string for comparison
 * @param options - Configuration options
 * @returns The distance score (lower = more similar)
 * 
 * @example
 * ```typescript
 * const distance = levenshtein('hello', 'hallo');
 * console.log(distance); // 1
 * ```
 * 
 * @throws {ValidationError} When inputs are not strings
 * 
 * @since 1.0.0
 * @see https://en.wikipedia.org/wiki/Levenshtein_distance
 */
function levenshtein(
  str1: string,
  str2: string,
  options?: LevenshteinOptions
): number {
  // Implementation
}
```

### **README Structure**
```markdown
# Project Name

## Quick Start
## Installation
## Usage
## API Reference
## Examples
## Contributing
## License

## Performance
## Security
## Changelog
```

---

## üöÄ Performance Guidelines

### **Optimization Priorities**
1. **Bundle Size** - Keep under 100KB for core utilities
2. **Runtime Performance** - < 10ms for utility functions
3. **Memory Usage** - Minimal allocations, no memory leaks
4. **Cold Start** - Fast initialization for serverless

### **Performance Monitoring**
```typescript
// Performance tracking decorator
function performance(target: any, propertyKey: string, descriptor: PropertyDescriptor) {
  const originalMethod = descriptor.value;
  
  descriptor.value = function (...args: any[]) {
    const start = performance.now();
    const result = originalMethod.apply(this, args);
    const end = performance.now();
    
    console.log(`${propertyKey} took ${end - start}ms`);
    return result;
  };
}

// Benchmarking utilities
async function benchmark<T>(
  name: string,
  fn: () => T | Promise<T>,
  iterations = 1000
): Promise<{ avg: number; min: number; max: number }> {
  const times: number[] = [];
  
  for (let i = 0; i < iterations; i++) {
    const start = performance.now();
    await fn();
    const end = performance.now();
    times.push(end - start);
  }
  
  return {
    avg: times.reduce((a, b) => a + b) / times.length,
    min: Math.min(...times),
    max: Math.max(...times)
  };
}
```

---

## üîí Security Standards

### **Security Checklist**
- [ ] Input validation for all public APIs
- [ ] No eval() or Function constructor usage
- [ ] Proper error handling without information leakage
- [ ] Dependency security scanning
- [ ] HTTPS for all external communications
- [ ] Environment variable protection
- [ ] Rate limiting for exposed endpoints

### **Secure Coding Patterns**
```typescript
// Input validation
function validateInput(input: unknown): string {
  if (typeof input !== 'string') {
    throw new ValidationError('Input must be a string', 'input', 'INVALID_TYPE');
  }
  
  if (input.length > 1000) {
    throw new ValidationError('Input too long', 'input', 'INVALID_LENGTH');
  }
  
  // Sanitize input
  return input.trim();
}

// Environment variable handling
const config = {
  apiUrl: process.env.API_URL || 'http://localhost:3000',
  apiKey: process.env.API_KEY, // Required - will be undefined if not set
  debug: process.env.NODE_ENV === 'development'
};

if (!config.apiKey) {
  throw new Error('API_KEY environment variable is required');
}
```

---

## üîÑ CI/CD & Deployment

### **GitHub Actions Workflow**
```yaml
name: CI/CD Pipeline
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: oven-sh/setup-bun@v1
      - run: bun install
      - run: bun run lint
      - run: bun run type-check
      - run: bun run test:coverage
      
  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: oven-sh/setup-bun@v1
      - run: bun run build
      - run: bun run docs:generate
      - uses: actions/upload-artifact@v3
        with:
          name: dist
          path: dist/
```

### **Deployment Targets**
```typescript
// Environment-specific configurations
const environments = {
  development: {
    apiUrl: 'http://localhost:3000',
    logLevel: 'debug',
    enableHotReload: true
  },
  staging: {
    apiUrl: 'https://staging-api.example.com',
    logLevel: 'info',
    enableHotReload: false
  },
  production: {
    apiUrl: 'https://api.example.com',
    logLevel: 'warn',
    enableHotReload: false
  }
};
```

---

## üìä Monitoring & Analytics

### **Performance Metrics**
```typescript
// Performance monitoring
interface PerformanceMetrics {
  bundleSize: number;
  loadTime: number;
  renderTime: number;
  memoryUsage: number;
  errorRate: number;
}

// Analytics tracking
function trackEvent(event: string, properties?: Record<string, any>) {
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('event', event, properties);
  }
}
```

---

## üéØ Future Considerations

### **Technology Roadmap**
- **Rust Integration** - Performance-critical utilities
- **WebAssembly** - CPU-intensive operations
- **Edge Computing** - Cloudflare Workers deployment
- **GraphQL** - API layer for complex data fetching
- **Microservices** - Service-oriented architecture

### **Scalability Planning**
- **Database Optimization** - Query performance and indexing
- **Caching Strategy** - Redis or in-memory caching
- **Load Balancing** - Horizontal scaling capabilities
- **Monitoring** - Application performance monitoring
- **Disaster Recovery** - Backup and restore procedures

---

## üìû Support & Maintenance

### **Issue Triage**
1. **Critical** - Security vulnerabilities, production outages
2. **High** - Performance regressions, breaking changes
3. **Medium** - Feature requests, documentation updates
4. **Low** - Code improvements, minor bugs

### **Release Process**
1. **Feature Development** - Feature branch with tests
2. **Code Review** - Peer review and automated checks
3. **Integration Testing** - Full test suite execution
4. **Documentation Update** - README and API docs
5. **Version Bump** - Semantic versioning
6. **Release** - Tag and publish to package registry

---

*This document serves as the definitive guide for development standards and preferences in this project. All contributors should familiarize themselves with these guidelines and follow them consistently.*
