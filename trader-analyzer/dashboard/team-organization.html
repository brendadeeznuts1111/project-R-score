<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Organization Dashboard - Multi-Layer Graph System</title>
    <!--
        [TEAM.ORGANIZATION.DASHBOARD.RG] Team Organization Dashboard
        Displays team structure, package ownership, and MCP AI Team Tools integration.
        
        Features:
        - Interactive team filtering and search
        - Mermaid C4Component architecture diagram
        - RSS feed integration for team updates
        - MCP AI Team Tools overview
        - Patch tracking for dependencies
        - Quick actions for common workflows
        - Team Info Query (Human Capital Knowledge Graph)
        - ML-Driven PR Reviewer Assignment (AI-powered reviewer suggestions)
        
        Related Documentation:
        - ../docs/MCP-AI-TEAM-INTEGRATION.md - MCP tools architecture
        - ../docs/TEAM-ORGANIZATION-PACKAGE-OWNERSHIP.md - Team structure details
        - ../docs/TEAM-DASHBOARD-API-VERIFICATION.md - API endpoint verification
        - ../docs/BUN-PATCH.md - Bun patch documentation
        - ../src/mcp/tools/ai-team-tools.ts - MCP tools implementation
        - ../src/utils/rss-constants.ts - Patch tracking constants (PATCHED_DEPENDENCIES)
        - ../src/api/registry.ts - Registry API (getTeamDepartmentsRegistry)
    -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --accent-blue: #00d4ff;
            --accent-purple: #a855f7;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --border: #333;
            --shadow: rgba(0, 0, 0, 0.5);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent-blue);
        }

        .command-palette-trigger {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .command-palette-trigger:hover {
            background: var(--bg-secondary);
            border-color: var(--accent-blue);
        }

        .command-palette-trigger kbd {
            background: var(--bg-primary);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
            margin-top: 2rem;
        }

        .mermaid-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 2rem;
            overflow-x: auto;
        }

        .mermaid-container svg {
            max-width: 100%;
            height: auto;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .team-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.2s;
        }

        .team-card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .team-card h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--accent-blue);
        }

        .team-card.sports h3 { color: #2196f3; }
        .team-card.markets h3 { color: #9c27b0; }
        .team-card.platform h3 { color: #4caf50; }

        .person-item {
            padding: 0.75rem;
            margin: 0.5rem 0;
            background: var(--bg-tertiary);
            border-radius: 6px;
            border-left: 3px solid transparent;
            transition: all 0.2s;
            position: relative;
        }

        .person-item:hover {
            background: var(--bg-primary);
            border-left-color: var(--accent-blue);
        }

        .person-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
            flex-wrap: wrap;
        }

        .person-action-btn {
            padding: 0.4rem 0.8rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .person-action-btn:hover {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: var(--bg-primary);
        }

        .person-item.team-lead {
            border-left-color: var(--accent-orange);
        }

        .person-item.maintainer {
            border-left-color: var(--accent-green);
        }

        .person-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .person-role {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .person-packages {
            font-size: 0.8rem;
            color: var(--accent-blue);
            margin-top: 0.5rem;
        }

        .package-badge {
            display: inline-block;
            background: var(--bg-tertiary);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            margin: 0.2rem 0.2rem 0.2rem 0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .package-badge:hover {
            background: var(--accent-blue);
            color: var(--bg-primary);
            transform: translateY(-1px);
        }

        .package-metadata {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Command Palette */
        .cmdk-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            display: none;
            align-items: flex-start;
            justify-content: center;
            padding-top: 10vh;
        }

        .cmdk-overlay.active {
            display: flex;
        }

        .cmdk-dialog {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 20px 60px var(--shadow);
        }

        .cmdk-input-wrapper {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .cmdk-input {
            width: 100%;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 1rem;
            outline: none;
        }

        .cmdk-input:focus {
            border-color: var(--accent-blue);
        }

        .cmdk-list {
            max-height: 60vh;
            overflow-y: auto;
            padding: 0.5rem;
        }

        .cmdk-item {
            padding: 0.75rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.15s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .cmdk-item:hover,
        .cmdk-item[aria-selected="true"] {
            background: var(--bg-tertiary);
        }

        .cmdk-item-icon {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .cmdk-item-icon.team-lead { background: var(--accent-orange); }
        .cmdk-item-icon.maintainer { background: var(--accent-green); }
        .cmdk-item-icon.package { background: var(--accent-blue); }

        .cmdk-item-content {
            flex: 1;
        }

        .cmdk-item-title {
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .cmdk-item-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .cmdk-group {
            margin-bottom: 1rem;
        }

        .cmdk-group-title {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 600;
            color: var(--accent-blue);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .filter-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .filter-tab {
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            color: var(--text-primary);
            font-weight: 500;
        }

        .filter-tab:hover {
            background: var(--bg-secondary);
            border-color: var(--accent-blue);
            transform: translateY(-1px);
        }

        .filter-tab:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: 2px;
        }

        .filter-tab.active {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: var(--bg-primary);
            font-weight: 600;
        }

        .team-card {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .quick-action-card {
            transition: all 0.2s;
        }

        .quick-action-card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        @media (max-width: 1024px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .header > div {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üè¢ Team Organization Dashboard</h1>
        <div style="display: flex; gap: 10px; align-items: center;">
            <a href="http://localhost:4000/packages" target="_blank" style="padding: 0.5rem 1rem; background: var(--accent-blue); color: var(--bg-primary); text-decoration: none; border-radius: 6px; font-size: 0.9rem; font-weight: 500;">
                üì¶ Registry Dashboard
            </a>
            <a href="http://localhost:4000/rfcs/new" target="_blank" style="padding: 0.5rem 1rem; background: var(--accent-green); color: var(--bg-primary); text-decoration: none; border-radius: 6px; font-size: 0.9rem; font-weight: 500;">
                üìù Create RFC
            </a>
            <button class="command-palette-trigger" onclick="openCommandPalette()">
                Search Team & Packages
                <kbd>‚åòK</kbd>
            </button>
        </div>
    </div>

    <!-- [DASHBOARD.CONTAINER.RG] Main Dashboard Container -->
    <div class="container">
        <!-- [DASHBOARD.STATS.GRID.RG] Statistics Grid Section -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">3</div>
                <div class="stat-label">Teams</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">10</div>
                <div class="stat-label">Team Members</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">14</div>
                <div class="stat-label">Packages</div>
            </div>
        </div>

        <!-- Metadata Headers Section -->
        <div style="margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <h2 style="margin-bottom: 1rem; color: var(--accent-blue); font-size: 1.1rem;">üìã Metadata Standards</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; font-size: 0.85rem;">
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px;">
                    <div style="font-weight: 600; color: var(--accent-blue); margin-bottom: 0.5rem;">üîñ REF Tags</div>
                    <div style="color: var(--text-secondary); line-height: 1.5;">
                        Format: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px; font-size: 0.75rem;">v-{version}.{TYPE}.{NAME}.{TEAM}.{API}.{MAJOR}.{MINOR}.A.{PATCH}.DOC.{SUB}</code>
                    </div>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.8rem;">
                        Example: <code style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px; font-size: 0.7rem;">v-1.3.4.COMP.LAYER4.SPRT.1.0.A.1.1.DOC.1.1</code>
                    </div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px;">
                    <div style="font-weight: 600; color: var(--accent-green); margin-bottom: 0.5rem;">üì¶ Types</div>
                    <div style="color: var(--text-secondary); line-height: 1.5;">
                        <span style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px; margin-right: 0.25rem;">COMP</span>
                        <span style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px; margin-right: 0.25rem;">MCPT</span>
                        <span style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px; margin-right: 0.25rem;">SCRP</span>
                        <span style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px; margin-right: 0.25rem;">UTIL</span>
                        <span style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px;">SERV</span>
                    </div>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.8rem;">
                        Component, MCP Tool, Script, Utility, Service
                    </div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px;">
                    <div style="font-weight: 600; color: var(--accent-purple); margin-bottom: 0.5rem;">üè∑Ô∏è Properties</div>
                    <div style="color: var(--text-secondary); line-height: 1.5;">
                        Tags: <span style="color: var(--accent-orange);">anomaly-detection</span>, 
                        <span style="color: var(--accent-orange);">correlation</span>, 
                        <span style="color: var(--accent-orange);">benchmarking</span>, 
                        <span style="color: var(--accent-orange);">streaming</span>
                    </div>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.8rem;">
                        Used for categorization and filtering
                    </div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px;">
                    <div style="font-weight: 600; color: var(--accent-orange); margin-bottom: 0.5rem;">üîó Dependencies & Exports</div>
                    <div style="color: var(--text-secondary); line-height: 1.5;">
                        Dependencies: Package imports<br/>
                        Exports: Public API symbols<br/>
                        API Version: Semantic versioning
                    </div>
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.FILTER.TABS.RG] Team Filter Tabs Section -->
        <div class="filter-tabs" role="tablist" aria-label="Filter teams">
            <button 
                class="filter-tab active" 
                id="tab-all"
                role="tab" 
                aria-selected="true" 
                aria-controls="team-cards"
                onclick="filterTeam('all')"
            >All Teams</button>
            <button 
                class="filter-tab" 
                id="tab-sports"
                role="tab" 
                aria-selected="false" 
                aria-controls="team-cards"
                onclick="filterTeam('sports')"
            >Sports Correlation</button>
            <button 
                class="filter-tab" 
                id="tab-markets"
                role="tab" 
                aria-selected="false" 
                aria-controls="team-cards"
                onclick="filterTeam('markets')"
            >Market Analytics</button>
            <button 
                class="filter-tab" 
                id="tab-platform"
                role="tab" 
                aria-selected="false" 
                aria-controls="team-cards"
                onclick="filterTeam('platform')"
            >Platform & Tools</button>
        </div>

        <!-- [DASHBOARD.DEPARTMENT.FILTER.RG] Department Filter Tabs Section -->
        <div class="filter-tabs" role="tablist" aria-label="Filter departments" style="margin-top: 2rem;">
            <button 
                class="filter-tab active" 
                id="dept-tab-all"
                role="tab" 
                aria-selected="true" 
                aria-controls="department-cards"
                onclick="filterDepartment('all')"
            >All Departments</button>
            <button 
                class="filter-tab" 
                id="dept-tab-api"
                role="tab" 
                aria-selected="false" 
                aria-controls="department-cards"
                onclick="filterDepartment('api')"
                style="border-left: 3px solid #00d4ff;"
            >üîå API & Routes</button>
            <button 
                class="filter-tab" 
                id="dept-tab-arbitrage"
                role="tab" 
                aria-selected="false" 
                aria-controls="department-cards"
                onclick="filterDepartment('arbitrage')"
                style="border-left: 3px solid #ff1744;"
            >üìä Arbitrage & Trading</button>
            <button 
                class="filter-tab" 
                id="dept-tab-orca"
                role="tab" 
                aria-selected="false" 
                aria-controls="department-cards"
                onclick="filterDepartment('orca')"
                style="border-left: 3px solid #9c27b0;"
            >üèà ORCA & Sports</button>
            <button 
                class="filter-tab" 
                id="dept-tab-dashboard"
                role="tab" 
                aria-selected="false" 
                aria-controls="department-cards"
                onclick="filterDepartment('dashboard')"
                style="border-left: 3px solid #667eea;"
            >üé® Dashboard & UI</button>
            <button 
                class="filter-tab" 
                id="dept-tab-registry"
                role="tab" 
                aria-selected="false" 
                aria-controls="department-cards"
                onclick="filterDepartment('registry')"
                style="border-left: 3px solid #ff00ff;"
            >üîß Registry & MCP</button>
            <button 
                class="filter-tab" 
                id="dept-tab-security"
                role="tab" 
                aria-selected="false" 
                aria-controls="department-cards"
                onclick="filterDepartment('security')"
                style="border-left: 3px solid #ff6b00;"
            >üîí Security</button>
            <button 
                class="filter-tab" 
                id="dept-tab-performance"
                role="tab" 
                aria-selected="false" 
                aria-controls="department-cards"
                onclick="filterDepartment('performance')"
                style="border-left: 3px solid #00ff88;"
            >‚ö° Performance & Caching</button>
            <button 
                class="filter-tab" 
                id="dept-tab-docs"
                role="tab" 
                aria-selected="false" 
                aria-controls="department-cards"
                onclick="filterDepartment('docs')"
                style="border-left: 3px solid #00ff88;"
            >üìö Documentation & DX</button>
        </div>

        <!-- [DASHBOARD.DEPARTMENT.CARDS.RG] Department Cards Section -->
        <div style="margin-top: 2rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="color: var(--accent-blue); margin: 0;">üè¢ Department Structure</h2>
                <button onclick="refreshDepartmentData()" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;" title="Refresh department data from API">
                    üîÑ Refresh
                </button>
            </div>
            <div id="department-cards" role="tabpanel" aria-live="polite" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem;">
                <!-- Department cards will be rendered dynamically -->
            </div>
        </div>

        <!-- [DASHBOARD.DEPARTMENT.COLORS.RG] Department Colors Reference -->
        <div style="margin-top: 2rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <h2 style="margin-bottom: 1.5rem; color: var(--accent-blue);">üé® Department Color Palette</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 4px solid #00d4ff;">
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">üîå API & Routes</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Cyan: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">#00d4ff</code></div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 4px solid #ff1744;">
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">üìä Arbitrage & Trading</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Red: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">#ff1744</code></div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 4px solid #9c27b0;">
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">üèà ORCA & Sports</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Purple: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">#9c27b0</code></div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 4px solid #667eea;">
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">üé® Dashboard & UI</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Indigo: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">#667eea</code></div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 4px solid #ff00ff;">
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">üîß Registry & MCP</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Magenta: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">#ff00ff</code></div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 4px solid #ff6b00;">
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">üîí Security</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Orange: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">#ff6b00</code></div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 4px solid #00ff88;">
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">‚ö° Performance & Caching</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Green: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">#00ff88</code></div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 4px solid #00ff88;">
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">üìö Documentation & DX</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Green: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">#00ff88</code></div>
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.ONCALL.ROTATION.RG] On-Call Rotation Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <h2 style="margin-bottom: 1.5rem; color: var(--accent-blue);">üìû On-Call Rotation</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                8-week rotation cycle with Primary, Secondary, and Escalation coverage per department.
            </p>
            
            <!-- [DASHBOARD.ONCALL.STATUS.RG] Current On-Call Status Widget -->
            <div style="margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid var(--accent-orange);">
                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 1rem; font-size: 1.1rem;">Current Week Status</div>
                <div id="oncall-current-status" style="color: var(--text-secondary);">
                    Loading current on-call status...
                </div>
            </div>
            
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                    <thead>
                        <tr style="border-bottom: 2px solid var(--border);">
                            <th style="padding: 0.75rem; text-align: left; color: var(--text-primary); font-weight: 600;">Week</th>
                            <th style="padding: 0.75rem; text-align: left; color: var(--text-primary); font-weight: 600;">Primary</th>
                            <th style="padding: 0.75rem; text-align: left; color: var(--text-primary); font-weight: 600;">Secondary</th>
                            <th style="padding: 0.75rem; text-align: left; color: var(--text-primary); font-weight: 600;">Escalation</th>
                            <th style="padding: 0.75rem; text-align: left; color: var(--text-primary); font-weight: 600;">Department</th>
                        </tr>
                    </thead>
                    <tbody id="oncall-schedule-body">
                        <!-- On-call schedule will be rendered dynamically -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- [DASHBOARD.POLICY.ENFORCEMENT.RG] Policy Enforcement Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <h2 style="margin-bottom: 1.5rem; color: var(--accent-blue);">‚öñÔ∏è Policy Enforcement</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                Mandatory policies defined in TEAM.md and enforced programmatically.
            </p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                <div style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid var(--accent-blue);">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">‚è±Ô∏è</div>
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem; font-size: 1.1rem;">PR Review SLA</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">Maximum time for PR review completion</div>
                    <div style="padding: 0.75rem; background: var(--bg-primary); border-radius: 6px; margin-bottom: 0.5rem;">
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem;"><strong>Type:</strong> SLA</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem;"><strong>Value:</strong> <span style="color: var(--accent-blue); font-weight: 600;">2h</span></div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem;"><strong>Scope:</strong> global</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);"><strong>Enforced By:</strong> CI</div>
                    </div>
                </div>
                <div style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid var(--accent-orange);">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üë•</div>
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem; font-size: 1.1rem;">Incident Response Roster</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">Minimum on-call coverage per department</div>
                    <div style="padding: 0.75rem; background: var(--bg-primary); border-radius: 6px; margin-bottom: 0.5rem;">
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem;"><strong>Type:</strong> Roster</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem;"><strong>Value:</strong> <span style="color: var(--accent-orange);">Primary, Secondary, Escalation</span></div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem;"><strong>Scope:</strong> department</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);"><strong>Enforced By:</strong> Runtime</div>
                    </div>
                </div>
                <div style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid var(--accent-green);">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üîî</div>
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem; font-size: 1.1rem;">Alert Threshold</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">Minimum confidence threshold for alerting</div>
                    <div style="padding: 0.75rem; background: var(--bg-primary); border-radius: 6px; margin-bottom: 0.5rem;">
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem;"><strong>Type:</strong> Threshold</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem;"><strong>Value:</strong> <span style="color: var(--accent-green); font-weight: 600;">0.8</span></div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 0.25rem;"><strong>Scope:</strong> global</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);"><strong>Enforced By:</strong> Runtime</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.REVIEWER.SPECIALTIES.RG] Reviewer Specialties Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <h2 style="margin-bottom: 1.5rem; color: var(--accent-blue);">üéØ Reviewer Specialties</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                Reviewer specializations for ML-driven PR assignment. Click on a specialty to use it in PR reviewer assignment.
            </p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;" id="reviewer-specialties-grid">
                <!-- Reviewer specialties will be rendered dynamically -->
            </div>
        </div>

        <!-- [DASHBOARD.COMMUNICATION.PROTOCOLS.RG] Communication Protocols Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <h2 style="margin-bottom: 1.5rem; color: var(--accent-blue);">üí¨ Communication Protocols</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                Communication channels and protocols for team coordination.
            </p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                <div style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid var(--accent-blue);">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üêô</div>
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.75rem;">GitHub</div>
                    <ul style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.8;">
                        <li><strong>Issues:</strong> Use GitHub Issues with appropriate labels</li>
                        <li><strong>Discussions:</strong> Use GitHub Discussions for questions</li>
                        <li><strong>PRs:</strong> Tag relevant department leads for review</li>
                        <li><strong>Urgent:</strong> Use <code style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px;">@security-team</code> or <code style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px;">@maintainers</code> for critical issues</li>
                    </ul>
                </div>
                <div style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid var(--accent-purple);">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">‚úàÔ∏è</div>
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.75rem;">Telegram</div>
                    <ul style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.8;">
                        <li>Use team-specific Telegram topics for real-time coordination</li>
                        <li>Team leads have dedicated supergroups and topics</li>
                        <li>Topics: Live Alerts, Arbitrage, Analytics</li>
                    </ul>
                </div>
                <div style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid var(--accent-green);">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üí¨</div>
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.75rem;">Slack</div>
                    <ul style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.8;">
                        <li><code style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px;">#nexus-platform</code> - General</li>
                        <li><code style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px;">#nexus-security</code> - Security</li>
                        <li><code style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px;">#nexus-performance</code> - Performance</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.TEAM.GRID.RG] Team Cards Grid Section -->
        <div class="grid">
            <!-- [DASHBOARD.MERMAID.DIAGRAM.RG] Mermaid C4 Architecture Diagram -->
            <div class="mermaid-container">
                <div class="mermaid">
C4Component
title Multi-Layer Graph: Team Leads & Package Maintainers

Person(team_lead_sports, "Alex Chen", "Team Lead - Sports Correlation\nOwns @graph/layer4, @graph/layer3")
Person(team_lead_markets, "Sarah Kumar", "Team Lead - Market Analytics\nOwns @graph/layer2, @graph/layer1")
Person(team_lead_platform, "Mike Rodriguez", "Team Lead - Platform & Tools\nOwns @graph/algorithms, @graph/storage, @graph/utils, @bench/*")

Person(dev_sports_1, "Jordan Lee", "Developer - Sports Layer\nMaintainer: @graph/layer4")
Person(dev_sports_2, "Priya Patel", "Developer - Event Patterns\nMaintainer: @graph/layer3")
Person(dev_markets_1, "Tom Wilson", "Developer - Market Correlation\nMaintainer: @graph/layer2")
Person(dev_markets_2, "Lisa Zhang", "Developer - Price Selections\nMaintainer: @graph/layer1")
Person(dev_platform_1, "David Kim", "Developer - Algorithms\nMaintainer: @graph/algorithms")
Person(dev_platform_2, "Emma Brown", "Developer - Storage & Streaming\nMaintainer: @graph/storage, @graph/streaming")
Person(dev_platform_3, "Ryan Gupta", "Developer - Benchmarking\nMaintainer: @bench/layer4, @bench/layer3, @bench/layer2, @bench/layer1, @bench/property, @bench/stress")

Container_Boundary(private_registry, "Private Registry\nnpm.internal.yourcompany.com") {
  ContainerDb(registry_db, "Registry DB", "PostgreSQL", "Package metadata, versions, team ownership")
  Container(registry_api, "Registry API", "Bun + Elysia", "npm registry + team access control")
  Container(registry_ui, "Registry UI", "Bun + HTMX", "Package browsing, team assignments, benchmark results")
}

Container_Boundary(bun_workspace, "Bun Workspace Monorepo\ngit@github.com:yourorg/graph-engine") {
  Container(api_gateway, "API Gateway", "Bun + Elysia", "REST/WebSocket endpoints")
  Container(worker_service, "Worker Service", "Bun + BullMQ", "Background anomaly detection")
  Container(dashboard, "Developer Dashboard", "Bun + HTMX", "Real-time viz, benchmarks, team metrics")
  
  Container_Boundary(packages, "@graph/* Packages\nTeam: Sports Correlation") {
    Component(layer4, "@graph/layer4\nOwner: Alex Chen\nMaintainer: Jordan Lee", "Cross-Sport Anomaly Detection", "Detects anomalies between sports")
    Component(layer3, "@graph/layer3\nOwner: Alex Chen\nMaintainer: Priya Patel", "Cross-Event Patterns", "Temporal pattern detection")
  }
  
  Container_Boundary(packages_markets, "@graph/* Packages\nTeam: Market Analytics") {
    Component(layer2, "@graph/layer2\nOwner: Sarah Kumar\nMaintainer: Tom Wilson", "Cross-Market Analysis", "Intra-event market correlation")
    Component(layer1, "@graph/layer1\nOwner: Sarah Kumar\nMaintainer: Lisa Zhang", "Direct Selections", "Price correlation at selection level")
  }
  
  Container_Boundary(packages_platform, "@graph/* Packages\nTeam: Platform & Tools") {
    Component(algorithms, "@graph/algorithms\nOwner: Mike Rodriguez\nMaintainer: David Kim", "Detection Core", "Statistical models library")
    Component(storage, "@graph/storage\nOwner: Mike Rodriguez\nMaintainer: Emma Brown", "Graph State Manager", "SQLite + TimescaleDB persistence")
    Component(streaming, "@graph/streaming\nOwner: Mike Rodriguez\nMaintainer: Emma Brown", "Data Ingestion", "WebSocket bookmaker adapters")
    Component(utils, "@graph/utils\nOwner: Mike Rodriguez\nMaintainer: Mike Rodriguez", "Error Wrapper", "Defensive error handling")
  }
  
  Container_Boundary(benchmarks, "@bench/* Packages\nTeam: Platform & Tools") {
    Component(bench_layer4, "@bench/layer4\nOwner: Mike Rodriguez\nMaintainer: Ryan Gupta", "Layer 4 Benchmarks", "Sport correlation property iteration")
    Component(bench_layer3, "@bench/layer3\nOwner: Mike Rodriguez\nMaintainer: Ryan Gupta", "Layer 3 Benchmarks", "Event temporal benchmarks")
    Component(bench_layer2, "@bench/layer2\nOwner: Mike Rodriguez\nMaintainer: Ryan Gupta", "Layer 2 Benchmarks", "Market efficiency benchmarks")
    Component(bench_layer1, "@bench/layer1\nOwner: Mike Rodriguez\nMaintainer: Ryan Gupta", "Layer 1 Benchmarks", "Price correlation benchmarks")
    Component(bench_props, "@bench/property\nOwner: Mike Rodriguez\nMaintainer: Ryan Gupta", "Property Iteration", "Fast property testing & optimization")
    Component(bench_stress, "@bench/stress\nOwner: Mike Rodriguez\nMaintainer: Ryan Gupta", "Stress Tests", "Load & scale validation")
  }
}

ContainerDb(timescaledb, "TimescaleDB", "Time-series: graph snapshots, correlation history, benchmark results")
ContainerDb(redis, "Redis", "Job queues (BullMQ), cache, pub/sub")
Container(otel, "OpenTelemetry", "Metrics & tracing (Prometheus/Grafana)")

Rel(team_lead_sports, registry_ui, "Review @graph/layer4 releases", "Browser")
Rel(team_lead_sports, layer4, "Approve changes", "GitHub PR review")
Rel(dev_sports_1, layer4, "Maintain & develop", "Code commits")
Rel(dev_sports_1, bench_layer4, "Run benchmarks", "CLI")
Rel(bench_layer4, layer4, "Test performance", "Function calls")
Rel(bench_layer4, timescaledb, "Store results", "SQL")
Rel(dev_sports_1, registry_api, "bun publish @graph/layer4", "npm protocol")
Rel(registry_api, registry_db, "Store @graph/layer4 metadata", "SQL")
Rel(registry_db, timescaledb, "Archive version history", "SQL")
Rel(layer4, algorithms, "Use @graph/algorithms", "Function calls (team dependency)")
Rel(algorithms, team_lead_platform, "Request features", "GitHub issue")
Rel(dev_platform_1, algorithms, "Maintain", "Code commits")
Rel(dashboard, otel, "View team metrics", "Grafana API")
Rel(dashboard, registry_ui, "View package versions", "Browser")
Rel(otel, timescaledb, "Store team performance", "SQL")

UpdateLayoutConfig($c4ShapeInRow="4", $c4BoundaryInRow="1")
UpdateElementStyle(packages, $bgColor="#e3f2fd", $fontColor="#0d47a1")
UpdateElementStyle(packages_markets, $bgColor="#f3e5f5", $fontColor="#4a148c")
UpdateElementStyle(packages_platform, $bgColor="#e8f5e9", $fontColor="#1b5e20")
UpdateElementStyle(benchmarks, $bgColor="#fff3e0", $fontColor="#e65100")
                </div>
            </div>

            <!-- [DASHBOARD.TEAM.CARDS.RG] Team Cards Sidebar -->
            <div class="sidebar" id="team-cards" role="tabpanel" aria-labelledby="tab-all" aria-live="polite">
                <!-- Team cards will be rendered dynamically by renderTeamCards() -->
                <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    Loading team members...
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.QUICK.ACTIONS.RG] Quick Actions Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <h2 style="margin-bottom: 1.5rem; color: var(--accent-blue);">‚ö° Quick Actions</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                <a href="http://localhost:4000/packages" target="_blank" style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px; text-decoration: none; color: var(--text-primary); transition: all 0.2s;" class="quick-action-card">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üì¶</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">Registry Dashboard</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">View all packages with team filters</div>
                </a>
                <a href="http://localhost:4000/rfcs/new" target="_blank" style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px; text-decoration: none; color: var(--text-primary); transition: all 0.2s;" class="quick-action-card">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üìù</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">Create RFC</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Submit a new RFC proposal</div>
                </a>
                <a href="http://localhost:4001" target="_blank" style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px; text-decoration: none; color: var(--text-primary); transition: all 0.2s;" class="quick-action-card">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üèÄ</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">Sports Mini-App</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Sports Correlation team dashboard</div>
                </a>
                <a href="http://localhost:4002" target="_blank" style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px; text-decoration: none; color: var(--text-primary); transition: all 0.2s;" class="quick-action-card">
                    <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üìä</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">Markets Mini-App</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">Market Analytics team dashboard</div>
                </a>
            </div>
        </div>

        <!-- [DASHBOARD.MCP.AI.TOOLS.RG] MCP AI Team Tools Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <h2 style="margin-bottom: 1.5rem; color: var(--accent-blue);">ü§ñ MCP AI Team Tools</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                AI-powered tools for code suggestions, benchmark optimization, RSS monitoring, and team coordination.
                Available via MCP-enabled editors (Claude Code, Cursor) or via the MCP server API.
            </p>

            <!-- [DASHBOARD.MCP.ARCHITECTURE.DIAGRAM.RG] MCP Integration Architecture Diagram -->
            <div style="margin-bottom: 2rem; padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border: 1px solid var(--border);">
                <h3 style="color: var(--accent-purple); margin-bottom: 1rem; font-size: 1rem;">üèóÔ∏è MCP Integration: AI-Powered Team Tooling Architecture</h3>
                <div class="mermaid">
C4Component
title MCP Integration: AI-Powered Team Tooling

Person(dev_sports, "Jordan Lee", "Developer - Sports Layer")
Person(ai_assistant, "AI Assistant", "Claude Code / Cursor")
Person(team_lead, "Alex Chen", "Team Lead - Reviews AI suggestions")

Container_Boundary(mcp_server, "MCP Server\n@tools/mcp-server") {
  Component(mcp_lsp, "MCP-LSP Bridge", "Bun + LSP", "AI-powered code suggestions")
  Component(mcp_benchmark, "MCP Benchmark Tool", "Bun", "AI-driven property optimization")
  Component(mcp_rss, "MCP-RSS Monitor", "Bun", "AI-summarized team updates")
  Component(mcp_team, "MCP Team Coordinator", "Bun", "AI-assigned reviews & notifications")
}

Container(bun_workspace, "Bun Workspace", "Monorepo", "packages/@graph/*, @bench/*, @mini/*")

Container(ai_clients, "AI Clients", "Claude Code / Cursor / Copilot", "MCP-enabled editors")

Container(telegram, "Telegram", "Supergroup", "AI-notified team communications")

Rel(dev_sports, ai_assistant, "Requests AI suggestion", "MCP protocol")
Rel(ai_assistant, mcp_lsp, "Queries code context", "LSP + MCP")
Rel(mcp_lsp, bun_workspace, "Analyzes @graph/layer4", "File system")
Rel(mcp_lsp, dev_sports, "Returns AI suggestion", "Inline code + explanation")

Rel(dev_sports, mcp_benchmark, "AI, optimize threshold", "Natural language")
Rel(mcp_benchmark, bun_workspace, "Runs @bench/layer4", "Bun test runner")
Rel(mcp_benchmark, dev_sports, "Returns optimized values", "Code + benchmark results")

Rel(mcp_rss, bun_workspace, "Monitors RSS feeds", "RSS constants")
Rel(mcp_rss, ai_assistant, "Summarizes team updates", "Daily digest")
Rel(mcp_rss, telegram, "Notifies team", "AI-summarized updates")

Rel(team_lead, mcp_team, "Reviews AI suggestions", "GitHub + Telegram")
Rel(mcp_team, telegram, "Assigns reviews", "Telegram topic mentions")

UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")
UpdateElementStyle(mcp_server, $bgColor="#f0f4ff", $fontColor="#4a148c")
                </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                <div style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;">
                    <div style="font-size: 1.25rem; margin-bottom: 0.5rem; color: var(--accent-blue);">üîç LSP Bridge</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">AI-powered code suggestions with context awareness</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); font-family: monospace; background: var(--bg-primary); padding: 0.5rem; border-radius: 4px;">lsp-bridge-analyze</div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;">
                    <div style="font-size: 1.25rem; margin-bottom: 0.5rem; color: var(--accent-purple);">‚ö° Benchmark Tool</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">AI-driven property optimization using benchmark results</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); font-family: monospace; background: var(--bg-primary); padding: 0.5rem; border-radius: 4px;">benchmark-optimize</div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;">
                    <div style="font-size: 1.25rem; margin-bottom: 0.5rem; color: var(--accent-green);">üì° RSS Monitor</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">AI-summarized team updates from RSS feeds</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); font-family: monospace; background: var(--bg-primary); padding: 0.5rem; border-radius: 4px;">rss-monitor-summarize</div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;">
                    <div style="font-size: 1.25rem; margin-bottom: 0.5rem; color: var(--accent-orange);">üë• Team Coordinator</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">AI-assigned reviews and notifications based on team structure</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); font-family: monospace; background: var(--bg-primary); padding: 0.5rem; border-radius: 4px;">team-coordinator-assign</div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;">
                    <div style="font-size: 1.25rem; margin-bottom: 0.5rem; color: var(--accent-blue);">üèóÔ∏è Component Scaffold</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">Auto-generate component stubs with test files and metadata</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); font-family: monospace; background: var(--bg-primary); padding: 0.5rem; border-radius: 4px;">component-scaffold</div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;">
                    <div style="font-size: 1.25rem; margin-bottom: 0.5rem; color: var(--accent-purple);">üó∫Ô∏è Sitemap Generator</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">Generate and query component sitemap data dynamically</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); font-family: monospace; background: var(--bg-primary); padding: 0.5rem; border-radius: 4px;">sitemap-generate</div>
                </div>
            </div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 3px solid var(--accent-blue);">
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    <strong style="color: var(--text-primary);">üìö Documentation:</strong>
                    <a href="../docs/MCP-AI-TEAM-INTEGRATION.md" target="_blank" style="color: var(--accent-blue); text-decoration: none; margin-left: 0.5rem;">MCP AI Team Integration</a>
                    <span style="margin: 0 0.5rem;">‚Ä¢</span>
                    <a href="../src/mcp/tools/ai-team-tools.ts" target="_blank" style="color: var(--accent-blue); text-decoration: none;">Source Code</a>
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.TEAM.INFO.QUERY.RG] Team Info Query Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="color: var(--accent-blue); margin: 0;">üîç Team Info Query</h2>
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    <a href="../docs/24.0.0.0.0.0.0-HUMAN-CAPITAL-ORCHESTRATION.md" target="_blank" style="color: var(--accent-blue); text-decoration: none;">üìö Documentation</a>
                </div>
            </div>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                Query TEAM.md dynamically using the Human Capital Knowledge Graph. Search by department, role, or operational queries.
            </p>
            
            <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 300px;">
                    <input 
                        type="text" 
                        id="team-info-query" 
                        placeholder="e.g., department:api, role:lead, communication"
                        style="width: 100%; padding: 0.75rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); font-size: 0.9rem;"
                        onkeypress="if(event.key === 'Enter') queryTeamInfo()"
                    />
                </div>
                <button 
                    onclick="queryTeamInfo()" 
                    style="padding: 0.75rem 1.5rem; background: var(--accent-blue); border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 0.9rem; font-weight: 600; transition: all 0.2s;"
                    onmouseover="this.style.opacity='0.9'"
                    onmouseout="this.style.opacity='1'"
                >
                    üîç Query
                </button>
            </div>

            <!-- [DASHBOARD.TEAM.INFO.DEPARTMENT.QUERIES.RG] Department Query Buttons -->
            <div style="margin-bottom: 1rem;">
                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.75rem; font-size: 0.9rem;">üè¢ Departments</div>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;">
                    <button onclick="setTeamQuery('department:api')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid #00d4ff; border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;" onmouseover="this.style.borderColor='#00d4ff'; this.style.background='var(--bg-primary)'" onmouseout="this.style.borderColor='#00d4ff'; this.style.background='var(--bg-tertiary)'">üîå API & Routes</button>
                    <button onclick="setTeamQuery('department:arbitrage')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid #ff1744; border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;" onmouseover="this.style.borderColor='#ff1744'; this.style.background='var(--bg-primary)'" onmouseout="this.style.borderColor='#ff1744'; this.style.background='var(--bg-tertiary)'">üìä Arbitrage & Trading</button>
                    <button onclick="setTeamQuery('department:orca')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid #9c27b0; border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;" onmouseover="this.style.borderColor='#9c27b0'; this.style.background='var(--bg-primary)'" onmouseout="this.style.borderColor='#9c27b0'; this.style.background='var(--bg-tertiary)'">üèà ORCA & Sports</button>
                    <button onclick="setTeamQuery('department:dashboard')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid #667eea; border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;" onmouseover="this.style.borderColor='#667eea'; this.style.background='var(--bg-primary)'" onmouseout="this.style.borderColor='#667eea'; this.style.background='var(--bg-tertiary)'">üé® Dashboard & UI</button>
                    <button onclick="setTeamQuery('department:registry')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid #ff00ff; border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;" onmouseover="this.style.borderColor='#ff00ff'; this.style.background='var(--bg-primary)'" onmouseout="this.style.borderColor='#ff00ff'; this.style.background='var(--bg-tertiary)'">üîß Registry & MCP</button>
                    <button onclick="setTeamQuery('department:security')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid #ff6b00; border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;" onmouseover="this.style.borderColor='#ff6b00'; this.style.background='var(--bg-primary)'" onmouseout="this.style.borderColor='#ff6b00'; this.style.background='var(--bg-tertiary)'">üîí Security</button>
                    <button onclick="setTeamQuery('department:performance')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid #00ff88; border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;" onmouseover="this.style.borderColor='#00ff88'; this.style.background='var(--bg-primary)'" onmouseout="this.style.borderColor='#00ff88'; this.style.background='var(--bg-tertiary)'">‚ö° Performance & Caching</button>
                    <button onclick="setTeamQuery('department:docs')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid #00ff88; border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;" onmouseover="this.style.borderColor='#00ff88'; this.style.background='var(--bg-primary)'" onmouseout="this.style.borderColor='#00ff88'; this.style.background='var(--bg-tertiary)'">üìö Documentation & DX</button>
                </div>
            </div>
            <div style="margin-bottom: 1rem;">
                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.75rem; font-size: 0.9rem;">üë• Roles & Other</div>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button onclick="setTeamQuery('role:lead')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;">Leads</button>
                    <button onclick="setTeamQuery('role:maintainer')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;">Maintainers</button>
                    <button onclick="setTeamQuery('communication')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;">Communication</button>
                    <button onclick="setTeamQuery('review')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;">Review</button>
                    <button onclick="setTeamQuery('oncall')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;">On-Call</button>
                    <button onclick="setTeamQuery('policy')" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;">Policy</button>
                </div>
            </div>

            <div id="team-info-results" style="min-height: 200px;">
                <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    Enter a query above to search TEAM.md
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.PR.REVIEWER.ASSIGNMENT.RG] PR Reviewer Assignment Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="color: var(--accent-purple); margin: 0;">ü§ñ ML-Driven PR Reviewer Assignment</h2>
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    <a href="../docs/24.0.0.0.0.0.0-HUMAN-CAPITAL-ORCHESTRATION.md#24333000000-ml-driven-pr-reviewer-assignment-enhanced" target="_blank" style="color: var(--accent-purple); text-decoration: none;">üìö Documentation</a>
                </div>
            </div>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                Analyze a Pull Request and get AI-powered reviewer suggestions based on code impact, departmental expertise, niche specializations, and developer availability.
            </p>
            
            <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 200px;">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">PR Number</label>
                    <input 
                        type="number" 
                        id="pr-reviewer-pr-number" 
                        placeholder="e.g., 1234"
                        style="width: 100%; padding: 0.75rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); font-size: 0.9rem;"
                        onkeypress="if(event.key === 'Enter') analyzePRReviewers()"
                    />
                </div>
                <div style="flex: 1; min-width: 200px;">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">Base Branch (optional)</label>
                    <input 
                        type="text" 
                        id="pr-reviewer-base-branch" 
                        placeholder="main"
                        value="main"
                        style="width: 100%; padding: 0.75rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); font-size: 0.9rem;"
                        onkeypress="if(event.key === 'Enter') analyzePRReviewers()"
                    />
                </div>
                <div style="display: flex; align-items: flex-end;">
                    <button 
                        onclick="analyzePRReviewers()" 
                        style="padding: 0.75rem 1.5rem; background: var(--accent-purple); border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 0.9rem; font-weight: 600; transition: all 0.2s;"
                        onmouseover="this.style.opacity='0.9'"
                        onmouseout="this.style.opacity='1'"
                    >
                        üîç Analyze PR
                    </button>
                </div>
            </div>

            <div id="pr-reviewer-results" style="min-height: 200px;">
                <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    Enter a PR number above to get ML-driven reviewer suggestions
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.DEVELOPER.WORKSPACE.RG] Developer Workspace Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="color: var(--accent-green); margin: 0;">üîë Developer Workspace</h2>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <a href="../docs/WORKSPACE-DEVELOPER-ONBOARDING.md" target="_blank" style="color: var(--accent-green); text-decoration: none;">üìö Documentation</a>
                    </div>
                    <a href="workspace.html" target="_blank" style="padding: 0.5rem 1rem; background: var(--accent-green); color: var(--bg-primary); text-decoration: none; border-radius: 6px; font-size: 0.85rem; font-weight: 600;">
                        üöÄ Open Workspace Dashboard
                    </a>
                </div>
            </div>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                Manage time-sensitive API keys for developers, onboarding candidates, and interview processes. Secure key management with Bun.secrets integration and rate limiting.
            </p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 3px solid var(--accent-green);">
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Active Keys</div>
                    <div id="workspace-active-keys" style="font-size: 1.5rem; font-weight: 600; color: var(--accent-green);">-</div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 3px solid var(--accent-blue);">
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Onboarding</div>
                    <div id="workspace-onboarding" style="font-size: 1.5rem; font-weight: 600; color: var(--accent-blue);">-</div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 3px solid var(--accent-purple);">
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Interviews</div>
                    <div id="workspace-interviews" style="font-size: 1.5rem; font-weight: 600; color: var(--accent-purple);">-</div>
                </div>
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 3px solid var(--accent-orange);">
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Total Requests (24h)</div>
                    <div id="workspace-requests" style="font-size: 1.5rem; font-weight: 600; color: var(--accent-orange);">-</div>
                </div>
            </div>

            <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem;">
                <button 
                    onclick="loadWorkspaceStats()" 
                    style="padding: 0.75rem 1.5rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); cursor: pointer; font-size: 0.9rem; font-weight: 600; transition: all 0.2s;"
                    onmouseover="this.style.background='var(--bg-primary)'"
                    onmouseout="this.style.background='var(--bg-tertiary)'"
                >
                    üîÑ Refresh Stats
                </button>
                <button 
                    onclick="window.open('workspace.html', '_blank')" 
                    style="padding: 0.75rem 1.5rem; background: var(--accent-green); border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 0.9rem; font-weight: 600; transition: all 0.2s;"
                    onmouseover="this.style.opacity='0.9'"
                    onmouseout="this.style.opacity='1'"
                >
                    ‚ûï Create Workspace Key
                </button>
            </div>

            <div id="workspace-keys-list" style="min-height: 100px;">
                <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    Loading workspace keys...
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.RSS.FEED.SECTION.RG] RSS Feed Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="color: var(--accent-blue); margin: 0;">üì° Team Updates (RSS Feed)</h2>
                <button onclick="refreshRSSFeed()" style="padding: 0.5rem 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary); cursor: pointer; font-size: 0.85rem; transition: all 0.2s;">
                    üîÑ Refresh
                </button>
            </div>
            <!-- [DASHBOARD.RSS.FEED.RG] RSS Feed Container -->
            <div id="rss-feed-container" style="min-height: 200px;">
                <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    Loading RSS feed...
                </div>
            </div>
        </div>

        <!-- [DASHBOARD.PATCH.TRACKING.SECTION.RG] Patch Tracking Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="color: var(--accent-blue); margin: 0;">üîß Patched Dependencies</h2>
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    <a href="../docs/BUN-PATCH.md" target="_blank" style="color: var(--accent-blue); text-decoration: none;">üìö Documentation</a>
                </div>
            </div>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6;">
                Track all patches applied to dependencies with team impact, severity, and metadata. Patches are automatically applied on <code style="background: var(--bg-tertiary); padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.85rem;">bun install</code>.
            </p>
            <!-- [DASHBOARD.PATCH.TRACKING.RG] Patch Tracking Container -->
            <div id="patch-tracking-container" style="min-height: 200px;">
                <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    Loading patch information...
                </div>
            </div>
        </div>

        <!-- Responsibility Matrix Section -->
        <div style="margin-top: 3rem; padding: 2rem; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border);">
            <h2 style="margin-bottom: 1.5rem; color: var(--accent-blue);">üìã Maintainer Responsibility Matrix</h2>
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                    <thead>
                        <tr style="border-bottom: 2px solid var(--border);">
                            <th style="padding: 0.75rem; text-align: left; color: var(--text-primary); font-weight: 600;">Responsibility</th>
                            <th style="padding: 0.75rem; text-align: left; color: var(--text-primary); font-weight: 600;">Team Lead</th>
                            <th style="padding: 0.75rem; text-align: left; color: var(--text-primary); font-weight: 600;">Maintainer</th>
                            <th style="padding: 0.75rem; text-align: left; color: var(--text-primary); font-weight: 600;">Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.75rem; font-weight: 600; color: var(--text-primary);">Package Review</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Required for all changes</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Required for major changes</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">All PRs need team lead approval</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.75rem; font-weight: 600; color: var(--text-primary);">Version Bumping</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Required</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Can patch for hotfixes</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Team lead decides version strategy</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.75rem; font-weight: 600; color: var(--text-primary);">Publishing</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Required</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Can publish patches</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Main publishing done by team lead</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.75rem; font-weight: 600; color: var(--text-primary);">Benchmark Review</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Required</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Runs benchmarks</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Team lead validates results</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.75rem; font-weight: 600; color: var(--text-primary);">Property Iteration</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Approves decisions</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Executes iterations</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Maintainer proposes changes</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border);">
                            <td style="padding: 0.75rem; font-weight: 600; color: var(--text-primary);">Documentation</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Reviews</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Writes</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Maintainer documents their work</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; font-weight: 600; color: var(--text-primary);">Incident Response</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Leads response</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">First responder</td>
                            <td style="padding: 0.75rem; color: var(--text-secondary);">Maintainer fixes, team lead coordinates</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Command Palette -->
    <!-- [DASHBOARD.COMMAND.PALETTE.RG] Command Palette Overlay -->
    <div class="cmdk-overlay" id="cmdkOverlay" onclick="closeCommandPalette(event)">
        <div class="cmdk-dialog" onclick="event.stopPropagation()">
            <div class="cmdk-input-wrapper">
                <input 
                    type="text" 
                    class="cmdk-input" 
                    id="cmdkInput" 
                    placeholder="Search team members, packages, or teams..."
                    autocomplete="off"
                />
            </div>
            <div class="cmdk-list" id="cmdkList"></div>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#00d4ff',
                primaryTextColor: '#ffffff',
                primaryBorderColor: '#00d4ff',
                lineColor: '#666',
                secondaryColor: '#1a1a1a',
                tertiaryColor: '#2a2a2a'
            }
        });

        // Initialize filter tabs accessibility and render team cards dynamically
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.filter-tab');
            tabs.forEach((tab, index) => {
                const isActive = tab.classList.contains('active');
                tab.setAttribute('tabindex', isActive ? '0' : '-1');
            });
            
            // Render team cards dynamically
            renderTeamCards();
            
            // Render department cards dynamically (async)
            renderDepartmentCards().catch(error => {
                console.error('[DASHBOARD.DEPARTMENT.RG:ERROR] Failed to render department cards:', error);
                const container = document.getElementById('department-cards');
                if (container) {
                    container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--accent-orange);">Failed to load departments. Please refresh the page.</div>';
                }
            });
            
            // Render on-call schedule (async)
            renderOnCallSchedule().catch(error => {
                console.error('[DASHBOARD.ONCALL.RG:ERROR] Failed to render on-call schedule:', error);
            });
            
            // Render reviewer specialties
            renderReviewerSpecialties();
        });

        // Team data with mini-app ports
        const teamData = {
            people: [
                { name: 'Alex Chen', role: 'Team Lead', team: 'sports', packages: ['@graph/layer4', '@graph/layer3'], type: 'team-lead', telegram: '@alexchen', supergroup: '#sports-correlation', topic: 'Topic 2: Live Alerts', miniAppPort: 4001 },
                { name: 'Jordan Lee', role: 'Maintainer', team: 'sports', packages: ['@graph/layer4'], type: 'maintainer', telegram: '@jordanlee' },
                { name: 'Priya Patel', role: 'Maintainer', team: 'sports', packages: ['@graph/layer3'], type: 'maintainer', telegram: '@priyapatel' },
                { name: 'Sarah Kumar', role: 'Team Lead', team: 'markets', packages: ['@graph/layer2', '@graph/layer1'], type: 'team-lead', telegram: '@sarahkumar', supergroup: '#market-analytics', topic: 'Topic 3: Arbitrage', miniAppPort: 4002 },
                { name: 'Tom Wilson', role: 'Maintainer', team: 'markets', packages: ['@graph/layer2'], type: 'maintainer', telegram: '@tomwilson' },
                { name: 'Lisa Zhang', role: 'Maintainer', team: 'markets', packages: ['@graph/layer1'], type: 'maintainer', telegram: '@lisazhang' },
                { name: 'Mike Rodriguez', role: 'Team Lead', team: 'platform', packages: ['@graph/algorithms', '@graph/storage', '@graph/utils', '@bench/*'], type: 'team-lead', telegram: '@mikerodriguez', supergroup: '#platform-tools', topic: 'Topic 4: Analytics', miniAppPort: 4003 },
                { name: 'David Kim', role: 'Maintainer', team: 'platform', packages: ['@graph/algorithms'], type: 'maintainer', telegram: '@davidkim' },
                { name: 'Emma Brown', role: 'Maintainer', team: 'platform', packages: ['@graph/storage', '@graph/streaming'], type: 'maintainer', telegram: '@emmabrown' },
                { name: 'Ryan Gupta', role: 'Maintainer', team: 'platform', packages: ['@bench/layer4', '@bench/layer3', '@bench/layer2', '@bench/layer1', '@bench/property', '@bench/stress'], type: 'maintainer', telegram: '@ryangupta' }
            ],
            packages: [
                { 
                    name: '@graph/layer4', 
                    team: 'sports', 
                    lead: 'Alex Chen', 
                    maintainer: 'Jordan Lee', 
                    scope: 'Cross-sport anomaly detection',
                    ref: 'v-1.3.4.COMP.LAYER4.SPRT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['@graph/algorithms', 'zod'],
                    exports: ['detectAnomalies', 'CorrelationEngine'],
                    type: 'component',
                    properties: ['anomaly-detection', 'cross-sport']
                },
                { 
                    name: '@graph/layer3', 
                    team: 'sports', 
                    lead: 'Alex Chen', 
                    maintainer: 'Priya Patel', 
                    scope: 'Cross-event temporal patterns',
                    ref: 'v-1.3.4.COMP.LAYER3.SPRT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['@graph/layer4'],
                    exports: ['detectPatterns', 'TemporalAnalyzer'],
                    type: 'component',
                    properties: ['temporal-analysis', 'event-patterns']
                },
                { 
                    name: '@graph/layer2', 
                    team: 'markets', 
                    lead: 'Sarah Kumar', 
                    maintainer: 'Tom Wilson', 
                    scope: 'Cross-market correlation',
                    ref: 'v-1.3.4.COMP.LAYER2.MRKT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['@graph/algorithms'],
                    exports: ['analyzeMarkets', 'MarketCorrelator'],
                    type: 'component',
                    properties: ['market-analysis', 'correlation']
                },
                { 
                    name: '@graph/layer1', 
                    team: 'markets', 
                    lead: 'Sarah Kumar', 
                    maintainer: 'Lisa Zhang', 
                    scope: 'Direct selection correlations',
                    ref: 'v-1.3.4.COMP.LAYER1.MRKT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['@graph/algorithms'],
                    exports: ['correlateSelections', 'SelectionAnalyzer'],
                    type: 'component',
                    properties: ['selection-analysis', 'price-correlation']
                },
                { 
                    name: '@graph/algorithms', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'David Kim', 
                    scope: 'Statistical models library',
                    ref: 'v-1.3.4.UTIL.ALGORITHMS.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: [],
                    exports: ['StatisticalModel', 'CorrelationAlgorithm', 'AnomalyDetector'],
                    type: 'utility',
                    properties: ['statistics', 'algorithms', 'models']
                },
                { 
                    name: '@graph/storage', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'Emma Brown', 
                    scope: 'Graph state persistence',
                    ref: 'v-1.3.4.SERV.STORAGE.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['bun:sqlite', 'timescaledb'],
                    exports: ['GraphStorage', 'StateManager'],
                    type: 'service',
                    properties: ['persistence', 'state-management', 'database']
                },
                { 
                    name: '@graph/streaming', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'Emma Brown', 
                    scope: 'WebSocket data ingestion',
                    ref: 'v-1.3.4.SERV.STREAMING.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['ws'],
                    exports: ['StreamAdapter', 'WebSocketManager'],
                    type: 'service',
                    properties: ['streaming', 'websocket', 'ingestion']
                },
                { 
                    name: '@graph/utils', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'Mike Rodriguez', 
                    scope: 'Error wrapper & utilities',
                    ref: 'v-1.3.4.UTIL.UTILS.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: [],
                    exports: ['ErrorWrapper', 'defensiveError'],
                    type: 'utility',
                    properties: ['error-handling', 'utilities']
                },
                { 
                    name: '@bench/layer4', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'Ryan Gupta', 
                    scope: 'Sport correlation benchmarks',
                    ref: 'v-1.3.4.SCRP.BENCHLAY4.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['@graph/layer4', 'bun:test'],
                    exports: ['benchmarkLayer4'],
                    type: 'script',
                    properties: ['benchmarking', 'performance', 'property-iteration']
                },
                { 
                    name: '@bench/layer3', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'Ryan Gupta', 
                    scope: 'Event temporal benchmarks',
                    ref: 'v-1.3.4.SCRP.BENCHLAY3.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['@graph/layer3', 'bun:test'],
                    exports: ['benchmarkLayer3'],
                    type: 'script',
                    properties: ['benchmarking', 'temporal-analysis']
                },
                { 
                    name: '@bench/layer2', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'Ryan Gupta', 
                    scope: 'Market efficiency benchmarks',
                    ref: 'v-1.3.4.SCRP.BENCHLAY2.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['@graph/layer2', 'bun:test'],
                    exports: ['benchmarkLayer2'],
                    type: 'script',
                    properties: ['benchmarking', 'market-efficiency']
                },
                { 
                    name: '@bench/layer1', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'Ryan Gupta', 
                    scope: 'Price correlation benchmarks',
                    ref: 'v-1.3.4.SCRP.BENCHLAY1.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['@graph/layer1', 'bun:test'],
                    exports: ['benchmarkLayer1'],
                    type: 'script',
                    properties: ['benchmarking', 'price-correlation']
                },
                { 
                    name: '@bench/property', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'Ryan Gupta', 
                    scope: 'Property iteration engine',
                    ref: 'v-1.3.4.UTIL.PROPERTY.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['bun:test'],
                    exports: ['PropertyIterator', 'optimizeProperties'],
                    type: 'utility',
                    properties: ['property-testing', 'optimization', 'iteration']
                },
                { 
                    name: '@bench/stress', 
                    team: 'platform', 
                    lead: 'Mike Rodriguez', 
                    maintainer: 'Ryan Gupta', 
                    scope: 'Load & scale tests',
                    ref: 'v-1.3.4.SCRP.STRESS.PLAT.1.0.A.1.1.DOC.1.1',
                    apiVersion: '1.0',
                    version: '1.3.4',
                    dependencies: ['bun:test'],
                    exports: ['stressTest', 'loadTest'],
                    type: 'script',
                    properties: ['stress-testing', 'load-testing', 'scalability']
                }
            ],
            teams: [
                { name: 'Sports Correlation', id: 'sports', lead: 'Alex Chen', members: 3 },
                { name: 'Market Analytics', id: 'markets', lead: 'Sarah Kumar', members: 3 },
                { name: 'Platform & Tools', id: 'platform', lead: 'Mike Rodriguez', members: 4 }
            ]
        };

        // [DASHBOARD.DEPARTMENT.DATA.RG] Department data structure from TEAM.md
        const departmentData = [
            {
                id: 'api',
                name: 'API & Routes',
                emoji: 'üîå',
                lead: 'API Team Lead',
                color: '#00d4ff',
                responsibilities: [
                    'REST API endpoint design and implementation',
                    'OpenAPI specification maintenance',
                    'Request/response handling',
                    'Error handling and status codes',
                    'API discovery and documentation'
                ],
                keyAreas: [
                    'src/api/routes.ts - Main API routes',
                    'src/api/docs.ts - OpenAPI documentation',
                    'src/api/discovery.ts - API discovery endpoint',
                    'Error registry integration'
                ],
                reviewFocus: ['Endpoint design', 'OpenAPI spec', 'Error handling', 'Backward compatibility']
            },
            {
                id: 'arbitrage',
                name: 'Arbitrage & Trading',
                emoji: 'üìä',
                lead: 'Trading Team Lead',
                color: '#ff1744',
                responsibilities: [
                    'Cross-market arbitrage detection',
                    'Trading algorithm implementation',
                    'Opportunity scanning and execution',
                    'Market matching and correlation'
                ],
                keyAreas: [
                    'src/arbitrage/ - Arbitrage detection system',
                    'src/analytics/ - Trading analytics',
                    'src/providers/ - Exchange connectors',
                    'Crypto matcher and scanner'
                ],
                reviewFocus: ['Algorithm correctness', 'Performance', 'Edge cases', 'Trading logic']
            },
            {
                id: 'orca',
                name: 'ORCA & Sports Betting',
                emoji: 'üèà',
                lead: 'ORCA Team Lead',
                color: '#9c27b0',
                responsibilities: [
                    'Sports betting normalization',
                    'Team and sport taxonomy',
                    'Bookmaker integration',
                    'Odds normalization and matching'
                ],
                keyAreas: [
                    'src/orca/ - ORCA normalizer',
                    'src/orca/taxonomy/ - Sports/team taxonomy',
                    'src/orca/sharp-books/ - Sharp bookmaker registry',
                    'src/orca/arbitrage/ - Sports arbitrage'
                ],
                reviewFocus: ['Normalization accuracy', 'Taxonomy updates', 'Bookmaker compatibility']
            },
            {
                id: 'dashboard',
                name: 'Dashboard & UI',
                emoji: 'üé®',
                lead: 'Frontend Team Lead',
                color: '#667eea',
                responsibilities: [
                    'Dashboard development and maintenance',
                    'User interface design',
                    'Browser compatibility',
                    'CORS and file:// protocol handling'
                ],
                keyAreas: [
                    'dashboard/index.html - Main dashboard',
                    'dashboard/17.14.0-nexus-dashboard.html - NEXUS Registry System dashboard',
                    'dashboard/registry.html - Registry browser',
                    'dashboard/workspace.html - Workspace management dashboard',
                    'apps/dashboard/ - Rspack-bundled dashboard application',
                    'src/cli/dashboard.ts - Dashboard CLI'
                ],
                reviewFocus: ['UX', 'Accessibility', 'CORS handling', 'Browser compatibility', 'Bundling configuration']
            },
            {
                id: 'registry',
                name: 'Registry & MCP Tools',
                emoji: 'üîß',
                lead: 'Platform Team Lead',
                color: '#ff00ff',
                responsibilities: [
                    'Registry system maintenance',
                    'MCP tools development',
                    'Tool signing and verification',
                    'Platform integration'
                ],
                keyAreas: [
                    'src/api/registry.ts - Registry system',
                    'src/mcp/ - MCP server and tools',
                    'scripts/mcp-server.ts - MCP server entry point',
                    'docs/api/MCP-SERVER.md - MCP server documentation',
                    'src/17.16.0.0.0.0.0-routing/ - URLPattern wildcard routing system',
                    '.bun-version - Bun version specification',
                    'bunfig.toml - Bun configuration'
                ],
                reviewFocus: ['Tool signatures', 'Registry consistency', 'MCP compliance', 'Platform integration']
            },
            {
                id: 'security',
                name: 'Security',
                emoji: 'üîí',
                lead: 'Security Team Lead',
                color: '#ff6b00',
                responsibilities: [
                    'Security vulnerability assessment',
                    'RBAC implementation',
                    'Input validation',
                    'Security headers and SRI'
                ],
                keyAreas: [
                    'src/security/ - Security modules',
                    'src/rbac/ - Role-based access control',
                    'src/middleware/csrf.ts - CSRF protection',
                    'Security testing tools'
                ],
                reviewFocus: ['Vulnerabilities', 'RBAC checks', 'Input validation', 'Security headers']
            },
            {
                id: 'performance',
                name: 'Performance & Caching',
                emoji: '‚ö°',
                lead: 'Performance Team Lead',
                color: '#00ff88',
                responsibilities: [
                    'Cache strategy and implementation',
                    'Query optimization',
                    'Performance monitoring',
                    'Latency optimization'
                ],
                keyAreas: [
                    'src/cache/ - Cache management',
                    'src/observability/metrics.ts - Metrics',
                    'benchmarks/ - Performance benchmarks',
                    'test-benchmark-registry.ts - Benchmark registry validation',
                    'Cache TTL strategies'
                ],
                reviewFocus: ['Cache strategy', 'Query optimization', 'Latency', 'Performance metrics', 'Benchmark thresholds']
            },
            {
                id: 'docs',
                name: 'Documentation & Developer Experience',
                emoji: 'üìö',
                lead: 'Docs Team Lead',
                color: '#00ff88',
                responsibilities: [
                    'Documentation maintenance',
                    'Developer guides',
                    'API documentation',
                    'Contributing guidelines'
                ],
                keyAreas: [
                    'docs/ - Documentation files',
                    'commands/ - CLI commands documentation',
                    'README.md - Project overview',
                    'docs/guides/CONTRIBUTING.md - Contributing guide',
                    'API documentation'
                ],
                reviewFocus: ['Documentation accuracy', 'Clarity', 'Completeness', 'Developer experience']
            }
        ];

        // Command Palette
        <!-- [DASHBOARD.JAVASCRIPT.COMMAND.PALETTE.RG] Command Palette Functions -->
        let selectedIndex = 0;
        let filteredItems = [];

        function openCommandPalette() {
            const overlay = document.getElementById('cmdkOverlay');
            const input = document.getElementById('cmdkInput');
            overlay.classList.add('active');
            input.focus();
            updateCommandPalette('');
        }

        function closeCommandPalette(event) {
            if (event && event.target.id === 'cmdkOverlay') {
                document.getElementById('cmdkOverlay').classList.remove('active');
                selectedIndex = 0;
            }
        }

        function updateCommandPalette(query) {
            const list = document.getElementById('cmdkList');
            query = query.toLowerCase();
            
            filteredItems = [];
            
            // Filter people
            const people = teamData.people.filter(p => 
                p.name.toLowerCase().includes(query) || 
                p.role.toLowerCase().includes(query) ||
                p.packages.some(pkg => pkg.toLowerCase().includes(query))
            );
            
            // Filter packages
            const packages = teamData.packages.filter(p => 
                p.name.toLowerCase().includes(query) ||
                p.scope.toLowerCase().includes(query) ||
                p.maintainer.toLowerCase().includes(query) ||
                p.lead.toLowerCase().includes(query)
            );
            
            // Filter teams
            const teams = teamData.teams.filter(t => 
                t.name.toLowerCase().includes(query) ||
                t.lead.toLowerCase().includes(query)
            );

            filteredItems = [
                ...teams.map(t => ({ type: 'team', data: t })),
                ...people.map(p => ({ type: 'person', data: p })),
                ...packages.map(p => ({ type: 'package', data: p }))
            ];

            selectedIndex = 0;
            renderCommandPalette();
        }

        function renderCommandPalette() {
            const list = document.getElementById('cmdkList');
            
            if (filteredItems.length === 0) {
                list.innerHTML = '<div class="cmdk-item"><div class="cmdk-item-content">No results found</div></div>';
                return;
            }

            let html = '';
            let currentGroup = '';

            filteredItems.forEach((item, index) => {
                const isSelected = index === selectedIndex;
                let groupTitle = '';
                
                if (item.type === 'team' && currentGroup !== 'teams') {
                    currentGroup = 'teams';
                    groupTitle = '<div class="cmdk-group-title">Teams</div>';
                } else if (item.type === 'person' && currentGroup !== 'people') {
                    currentGroup = 'people';
                    groupTitle = '<div class="cmdk-group-title">People</div>';
                } else if (item.type === 'package' && currentGroup !== 'packages') {
                    currentGroup = 'packages';
                    groupTitle = '<div class="cmdk-group-title">Packages</div>';
                }

                html += groupTitle;
                
                if (item.type === 'team') {
                    html += `
                        <div class="cmdk-item" ${isSelected ? 'aria-selected="true"' : ''} onclick="selectTeam('${item.data.id}')">
                            <div class="cmdk-item-icon" style="background: var(--accent-blue);">T</div>
                            <div class="cmdk-item-content">
                                <div class="cmdk-item-title">${item.data.name}</div>
                                <div class="cmdk-item-description">Team Lead: ${item.data.lead} ‚Ä¢ ${item.data.members} members</div>
                            </div>
                        </div>
                    `;
                } else if (item.type === 'person') {
                    const iconClass = item.data.type === 'team-lead' ? 'team-lead' : 'maintainer';
                    const telegramInfo = item.data.telegram ? ` ‚Ä¢ ${item.data.telegram}` : '';
                    const supergroupInfo = item.data.supergroup ? ` ‚Ä¢ ${item.data.supergroup}` : '';
                    html += `
                        <div class="cmdk-item" ${isSelected ? 'aria-selected="true"' : ''} onclick="selectPerson('${item.data.name}')">
                            <div class="cmdk-item-icon ${iconClass}">${item.data.name.charAt(0)}</div>
                            <div class="cmdk-item-content">
                                <div class="cmdk-item-title">${item.data.name}${telegramInfo}</div>
                                <div class="cmdk-item-description">${item.data.role} ‚Ä¢ ${item.data.packages.join(', ')}${supergroupInfo}</div>
                            </div>
                        </div>
                    `;
                } else if (item.type === 'package') {
                    const metadataInfo = [];
                    if (item.data.ref) metadataInfo.push(`REF: ${item.data.ref.split('.').slice(0, 4).join('.')}...`);
                    if (item.data.apiVersion) metadataInfo.push(`API v${item.data.apiVersion}`);
                    if (item.data.type) metadataInfo.push(`Type: ${item.data.type}`);
                    
                    html += `
                        <div class="cmdk-item" ${isSelected ? 'aria-selected="true"' : ''} onclick="selectPackage('${item.data.name}')">
                            <div class="cmdk-item-icon package">üì¶</div>
                            <div class="cmdk-item-content">
                                <div class="cmdk-item-title">${item.data.name}</div>
                                <div class="cmdk-item-description">${item.data.scope} ‚Ä¢ Maintainer: ${item.data.maintainer}${metadataInfo.length > 0 ? ` ‚Ä¢ ${metadataInfo.join(' ‚Ä¢ ')}` : ''}</div>
                            </div>
                        </div>
                    `;
                }
            });

            list.innerHTML = html;
        }

        function selectTeam(teamId) {
            filterTeam(teamId);
            closeCommandPalette({ target: { id: 'cmdkOverlay' } });
        }

        /**
         * Generate person actions HTML dynamically
         */
        function generatePersonActions(person) {
            const actions = [];
            const registryBase = 'http://localhost:4000';
            
            if (person.type === 'team-lead') {
                // Team lead actions
                const teamIdMap = { sports: 'sports-correlation', markets: 'market-analytics', platform: 'platform-tools' };
                const teamId = teamIdMap[person.team];
                const firstPackage = person.packages[0]?.replace('/*', '/layer4') || person.packages[0];
                
                actions.push(`<a href="${registryBase}/packages?team=${teamId}" target="_blank" class="person-action-btn">üì¶ View Packages</a>`);
                if (firstPackage) {
                    actions.push(`<a href="${registryBase}/rfcs/new?package=${encodeURIComponent(firstPackage)}" target="_blank" class="person-action-btn">üìù Create RFC</a>`);
                }
                if (person.miniAppPort) {
                    const emojiMap = { sports: 'üèÄ', markets: 'üìä', platform: 'üîß' };
                    actions.push(`<a href="http://localhost:${person.miniAppPort}" target="_blank" class="person-action-btn">${emojiMap[person.team] || 'üì±'} Mini-App</a>`);
                }
            } else {
                // Maintainer actions - show their packages (up to 2, then RFC)
                const displayPackages = person.packages.filter(p => !p.includes('/*')).slice(0, 2);
                displayPackages.forEach(pkg => {
                    actions.push(`<a href="${registryBase}/package/${encodeURIComponent(pkg)}" target="_blank" class="person-action-btn">üì¶ ${pkg}</a>`);
                });
                // Add RFC link for first package
                if (person.packages.length > 0) {
                    const firstPkg = person.packages[0].replace('/*', '/layer4');
                    actions.push(`<a href="${registryBase}/rfcs/new?package=${encodeURIComponent(firstPkg)}" target="_blank" class="person-action-btn">üìù RFC</a>`);
                }
            }
            
            return actions.length > 0 ? `<div class="person-actions">${actions.join('')}</div>` : '';
        }

        /**
         * Escape HTML to prevent XSS
         */
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        /**
         * [DASHBOARD.JAVASCRIPT.RENDER.TEAM.CARDS.RG:IMPLEMENTATION] Render Team Cards Function
         * Render team cards dynamically
         */
        function renderTeamCards() {
            const container = document.getElementById('team-cards');
            if (!container) return;
            
            const teams = ['sports', 'markets', 'platform'];
            const teamEmojis = { sports: 'üèÄ', markets: 'üìä', platform: 'üõ†Ô∏è' };
            const teamNames = { sports: 'Sports Correlation', markets: 'Market Analytics', platform: 'Platform & Tools' };
            const teamColors = { sports: '#2196f3', markets: '#9c27b0', platform: '#4caf50' };
            
            let html = '';
            
            teams.forEach(teamId => {
                const teamPeople = teamData.people.filter(p => p.team === teamId);
                if (teamPeople.length === 0) return;
                
                html += `<div class="team-card ${teamId}" data-team="${teamId}">`;
                html += `<h3>${teamEmojis[teamId]} ${teamNames[teamId]}</h3>`;
                
                teamPeople.forEach(person => {
                    const isTeamLead = person.type === 'team-lead';
                    const itemClass = isTeamLead ? 'team-lead' : 'maintainer';
                    const colorClass = isTeamLead ? teamColors[teamId] : 'var(--accent-green)';
                    
                    html += `<div class="person-item ${itemClass}">`;
                    html += `<div class="person-name">${escapeHtml(person.name)}</div>`;
                    
                    // Role display
                    if (isTeamLead) {
                        html += `<div class="person-role">${escapeHtml(person.role)}</div>`;
                    } else {
                        const firstPkg = person.packages[0] || '';
                        html += `<div class="person-role">${escapeHtml(person.role)}${firstPkg ? ': ' + escapeHtml(firstPkg) : ''}</div>`;
                    }
                    
                    // Packages display with metadata
                    if (person.packages.length > 0) {
                        if (isTeamLead) {
                            html += `<div class="person-packages">`;
                            person.packages.slice(0, 4).forEach(pkg => {
                                const pkgData = teamData.packages.find(p => p.name === pkg);
                                html += `<span class="package-badge" data-package="${escapeHtml(pkg)}" title="${pkgData ? `REF: ${pkgData.ref || 'N/A'}` : ''}">${escapeHtml(pkg)}</span>`;
                            });
                            html += `</div>`;
                        } else {
                            const pkgData = teamData.packages.find(p => p.name === person.packages[0]);
                            const scope = pkgData?.scope || '';
                            html += `<div class="person-packages">${escapeHtml(scope)}</div>`;
                            
                            // Show metadata for maintainer packages
                            if (pkgData && (pkgData.ref || pkgData.apiVersion || pkgData.dependencies || pkgData.exports)) {
                                html += `<div class="package-metadata" style="margin-top: 0.75rem; padding: 0.75rem; background: var(--bg-primary); border-radius: 6px; border-left: 3px solid var(--accent-blue); font-size: 0.75rem;">`;
                                html += `<div style="font-weight: 600; color: var(--accent-blue); margin-bottom: 0.5rem;">üìã Metadata</div>`;
                                
                                if (pkgData.ref) {
                                    html += `<div style="margin-bottom: 0.25rem;"><strong>REF:</strong> <code style="background: var(--bg-tertiary); padding: 0.2rem 0.4rem; border-radius: 3px; font-size: 0.7rem;">${escapeHtml(pkgData.ref)}</code></div>`;
                                }
                                
                                if (pkgData.apiVersion) {
                                    html += `<div style="margin-bottom: 0.25rem;"><strong>API Version:</strong> <span style="color: var(--accent-green);">${escapeHtml(pkgData.apiVersion)}</span></div>`;
                                }
                                
                                if (pkgData.version) {
                                    html += `<div style="margin-bottom: 0.25rem;"><strong>Version:</strong> <span style="color: var(--text-secondary);">${escapeHtml(pkgData.version)}</span></div>`;
                                }
                                
                                if (pkgData.type) {
                                    html += `<div style="margin-bottom: 0.25rem;"><strong>Type:</strong> <span style="color: var(--accent-purple); text-transform: uppercase;">${escapeHtml(pkgData.type)}</span></div>`;
                                }
                                
                                if (pkgData.dependencies && pkgData.dependencies.length > 0) {
                                    html += `<div style="margin-bottom: 0.25rem;"><strong>Dependencies:</strong> `;
                                    pkgData.dependencies.forEach((dep, idx) => {
                                        html += `<span style="background: var(--bg-tertiary); padding: 0.15rem 0.3rem; border-radius: 3px; font-size: 0.7rem; margin-right: 0.25rem;">${escapeHtml(dep)}</span>`;
                                    });
                                    html += `</div>`;
                                }
                                
                                if (pkgData.exports && pkgData.exports.length > 0) {
                                    html += `<div style="margin-bottom: 0.25rem;"><strong>Exports:</strong> `;
                                    pkgData.exports.forEach((exp, idx) => {
                                        html += `<code style="background: var(--bg-tertiary); padding: 0.15rem 0.3rem; border-radius: 3px; font-size: 0.7rem; margin-right: 0.25rem;">${escapeHtml(exp)}</code>`;
                                    });
                                    html += `</div>`;
                                }
                                
                                if (pkgData.properties && pkgData.properties.length > 0) {
                                    html += `<div style="margin-top: 0.5rem;"><strong>Properties:</strong> `;
                                    pkgData.properties.forEach((prop, idx) => {
                                        html += `<span style="background: var(--bg-tertiary); padding: 0.15rem 0.3rem; border-radius: 3px; font-size: 0.7rem; margin-right: 0.25rem; color: var(--accent-orange);">${escapeHtml(prop)}</span>`;
                                    });
                                    html += `</div>`;
                                }
                                
                                html += `</div>`;
                            }
                        }
                    }
                    
                    // Telegram info
                    const telegramStyle = isTeamLead ? `color: ${colorClass};` : 'color: var(--text-secondary);';
                    html += `<div style="margin-top: 0.5rem; font-size: ${isTeamLead ? '0.8' : '0.75'}rem; ${telegramStyle}">`;
                    html += `üì± <a href="https://t.me/${escapeHtml(person.telegram.replace('@', ''))}" style="color: ${isTeamLead ? colorClass : 'var(--accent-green)'}; text-decoration: none;">${escapeHtml(person.telegram)}</a>`;
                    if (person.supergroup) {
                        html += ` | ${escapeHtml(person.supergroup)}${person.topic ? ` / ${escapeHtml(person.topic)}` : ''}`;
                    }
                    html += `</div>`;
                    
                    // Dynamic actions
                    html += generatePersonActions(person);
                    
                    html += `</div>`;
                });
                
                html += `</div>`;
            });
            
            container.innerHTML = html;
        }

        function selectPerson(name) {
            filterTeam('all');
            // Highlight person in sidebar
            setTimeout(() => {
                const cards = document.querySelectorAll('.person-item');
                cards.forEach(card => {
                    if (card.querySelector('.person-name').textContent === name) {
                        card.style.background = 'var(--bg-primary)';
                        card.style.borderLeftColor = 'var(--accent-blue)';
                        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                });
            }, 100);
            closeCommandPalette({ target: { id: 'cmdkOverlay' } });
        }

        function selectPackage(name) {
            filterTeam('all');
            // Highlight package
            setTimeout(() => {
                const badges = document.querySelectorAll('.package-badge');
                badges.forEach(badge => {
                    if (badge.textContent === name) {
                        badge.style.background = 'var(--accent-blue)';
                        badge.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                });
            }, 100);
            closeCommandPalette({ target: { id: 'cmdkOverlay' } });
        }

        // Filter teams
        function filterTeam(team) {
            const tabs = document.querySelectorAll('.filter-tab');
            const teamNames = ['all', 'sports', 'markets', 'platform'];
            const tabIndex = teamNames.indexOf(team);
            
            // Update tab states
            tabs.forEach((tab, index) => {
                const isActive = index === tabIndex;
                tab.classList.toggle('active', isActive);
                tab.setAttribute('aria-selected', isActive.toString());
                tab.setAttribute('tabindex', isActive ? '0' : '-1');
            });
            
            // Update tabpanel
            const tabpanel = document.getElementById('team-cards');
            const activeTab = tabs[tabIndex];
            if (tabpanel && activeTab) {
                tabpanel.setAttribute('aria-labelledby', activeTab.id);
            }
            
            const cards = document.querySelectorAll('.team-card');
            let visibleCount = 0;
            
            if (team === 'all') {
                cards.forEach(card => {
                    card.style.display = 'block';
                    card.style.opacity = '1';
                    visibleCount++;
                });
            } else {
                cards.forEach(card => {
                    if (card.dataset.team === team) {
                        card.style.display = 'block';
                        card.style.opacity = '1';
                        visibleCount++;
                    } else {
                        card.style.display = 'none';
                        card.style.opacity = '0';
                    }
                });
            }
            
            // Announce filter change to screen readers
            if (tabpanel) {
                const teamLabels = {
                    'all': 'All teams',
                    'sports': 'Sports Correlation team',
                    'markets': 'Market Analytics team',
                    'platform': 'Platform & Tools team'
                };
                tabpanel.setAttribute('aria-label', `Showing ${teamLabels[team] || team} (${visibleCount} team card${visibleCount !== 1 ? 's' : ''})`);
            }
            
            // Smooth scroll to top of cards section
            const grid = document.querySelector('.grid');
            if (grid) {
                grid.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // [DASHBOARD.DEPARTMENT.LOAD.RG:IMPLEMENTATION] Load Department Data from API
        // Integrates with src/api/registry.ts getTeamDepartmentsRegistry()
        // Endpoint: GET /api/registry/team-departments
        // Returns: Department structure from TEAM.md with workspace API key integration
        async function loadDepartmentData() {
            try {
                const apiUrl = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
                    ? 'http://localhost:3001/api/registry/team-departments'
                    : `${window.location.protocol}//${window.location.host}/api/registry/team-departments`;
                
                const response = await fetch(apiUrl, {
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (response.ok) {
                    const registryData = await response.json();
                    if (registryData.departments && registryData.departments.length > 0) {
                        // Transform API data to match dashboard format
                        return registryData.departments.map(dept => ({
                            id: dept.id,
                            name: dept.name,
                            emoji: getDepartmentEmoji(dept.id),
                            lead: dept.lead,
                            color: dept.color,
                            responsibilities: dept.responsibilities || [],
                            keyAreas: dept.keyAreas || [],
                            reviewFocus: dept.reviewFocus || [],
                            members: dept.members || [],
                            memberCount: dept.members ? dept.members.length : 0,
                            withApiKeys: dept.members ? dept.members.filter(m => m.hasApiKey).length : 0
                        }));
                    }
                }
            } catch (error) {
                console.warn('[DASHBOARD.DEPARTMENT.RG:WARNING] Failed to load department data from API, using fallback:', error);
            }
            
            // Return fallback data
            return departmentData;
        }

        // [DASHBOARD.DEPARTMENT.EMOJI.RG:IMPLEMENTATION] Get Department Emoji
        function getDepartmentEmoji(id) {
            const emojiMap = {
                'api': 'üîå',
                'arbitrage': 'üìä',
                'orca': 'üèà',
                'dashboard': 'üé®',
                'registry': 'üîß',
                'security': 'üîí',
                'performance': '‚ö°',
                'docs': 'üìö'
            };
            return emojiMap[id] || 'üè¢';
        }

        // [DASHBOARD.DEPARTMENT.RENDER.RG:IMPLEMENTATION] Render Department Cards Function
        async function renderDepartmentCards() {
            const container = document.getElementById('department-cards');
            if (!container) return;
            
            // Show loading state
            container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-secondary);">Loading departments...</div>';
            
            // Load department data from API
            const departments = await loadDepartmentData();
            
            let html = '';
            
            departments.forEach(dept => {
                html += `<div class="team-card" data-department="${dept.id}" style="border-left: 4px solid ${dept.color};">`;
                html += `<h3 style="color: ${dept.color};">${dept.emoji} ${escapeHtml(dept.name)}</h3>`;
                html += `<div style="margin-bottom: 1rem; padding: 0.75rem; background: var(--bg-tertiary); border-radius: 6px;">`;
                html += `<div style="font-size: 0.9rem; color: var(--text-secondary);"><strong>Lead:</strong> ${escapeHtml(dept.lead)}</div>`;
                html += `<div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.5rem;"><strong>Color:</strong> <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">${dept.color}</code></div>`;
                if (dept.memberCount !== undefined) {
                    html += `<div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.5rem;">`;
                    html += `<strong>Members:</strong> ${dept.memberCount}`;
                    if (dept.withApiKeys !== undefined && dept.withApiKeys > 0) {
                        html += ` <span style="color: var(--accent-green);">(${dept.withApiKeys} with API keys)</span>`;
                    }
                    html += `</div>`;
                }
                html += `</div>`;
                
                html += `<div style="margin-bottom: 1rem;">`;
                html += `<div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem; font-size: 0.9rem;">üìã Responsibilities</div>`;
                html += `<ul style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.6;">`;
                dept.responsibilities.forEach(resp => {
                    html += `<li>${escapeHtml(resp)}</li>`;
                });
                html += `</ul>`;
                html += `</div>`;
                
                html += `<div style="margin-bottom: 1rem;">`;
                html += `<div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem; font-size: 0.9rem;">üîë Key Areas</div>`;
                html += `<ul style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.6;">`;
                dept.keyAreas.forEach(area => {
                    html += `<li><code style="background: var(--bg-primary); padding: 0.15rem 0.3rem; border-radius: 3px; font-size: 0.75rem;">${escapeHtml(area)}</code></li>`;
                });
                html += `</ul>`;
                html += `</div>`;
                
                html += `<div>`;
                html += `<div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem; font-size: 0.9rem;">üëÅÔ∏è Review Focus</div>`;
                html += `<div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">`;
                dept.reviewFocus.forEach(focus => {
                    html += `<span style="background: var(--bg-tertiary); padding: 0.3rem 0.6rem; border-radius: 4px; font-size: 0.75rem; color: var(--text-primary); border: 1px solid ${dept.color};">${escapeHtml(focus)}</span>`;
                });
                html += `</div>`;
                html += `</div>`;
                
                html += `</div>`;
            });
            
            container.innerHTML = html;
        }

        // [DASHBOARD.DEPARTMENT.REFRESH.RG:IMPLEMENTATION] Refresh Department Data Function
        async function refreshDepartmentData() {
            const container = document.getElementById('department-cards');
            if (!container) return;
            
            // Show loading state
            container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-secondary);">Refreshing departments...</div>';
            
            // Re-render with fresh data
            await renderDepartmentCards();
        }

        // [DASHBOARD.DEPARTMENT.FILTER.RG:IMPLEMENTATION] Filter Departments Function
        function filterDepartment(deptId) {
            const tabs = document.querySelectorAll('[id^="dept-tab-"]');
            const deptNames = ['all', 'api', 'arbitrage', 'orca', 'dashboard', 'registry', 'security', 'performance', 'docs'];
            const tabIndex = deptNames.indexOf(deptId);
            
            // Update tab states
            tabs.forEach((tab, index) => {
                const isActive = index === tabIndex;
                tab.classList.toggle('active', isActive);
                tab.setAttribute('aria-selected', isActive.toString());
                tab.setAttribute('tabindex', isActive ? '0' : '-1');
            });
            
            // Update tabpanel
            const tabpanel = document.getElementById('department-cards');
            const activeTab = tabs[tabIndex];
            if (tabpanel && activeTab) {
                tabpanel.setAttribute('aria-labelledby', activeTab.id);
            }
            
            const cards = document.querySelectorAll('[data-department]');
            let visibleCount = 0;
            
            if (deptId === 'all') {
                cards.forEach(card => {
                    card.style.display = 'block';
                    card.style.opacity = '1';
                    visibleCount++;
                });
            } else {
                cards.forEach(card => {
                    if (card.dataset.department === deptId) {
                        card.style.display = 'block';
                        card.style.opacity = '1';
                        visibleCount++;
                    } else {
                        card.style.display = 'none';
                        card.style.opacity = '0';
                    }
                });
            }
            
            // Announce filter change to screen readers
            if (tabpanel) {
                const deptLabels = {
                    'all': 'All departments',
                    'api': 'API & Routes department',
                    'arbitrage': 'Arbitrage & Trading department',
                    'orca': 'ORCA & Sports Betting department',
                    'dashboard': 'Dashboard & UI department',
                    'registry': 'Registry & MCP Tools department',
                    'security': 'Security department',
                    'performance': 'Performance & Caching department',
                    'docs': 'Documentation & Developer Experience department'
                };
                tabpanel.setAttribute('aria-label', `Showing ${deptLabels[deptId] || deptId} (${visibleCount} department card${visibleCount !== 1 ? 's' : ''})`);
            }
        }

        // [DASHBOARD.ONCALL.LOAD.RG:IMPLEMENTATION] Load On-Call Schedule from API
        async function loadOnCallSchedule() {
            try {
                // Try to get department data from API to extract on-call info
                const apiUrl = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
                    ? 'http://localhost:3001/api/registry/team-departments'
                    : `${window.location.protocol}//${window.location.host}/api/registry/team-departments`;
                
                const response = await fetch(apiUrl, {
                    headers: { 'Accept': 'application/json' }
                });
                
                if (response.ok) {
                    const registryData = await response.json();
                    // Could potentially extract on-call info from registry data if available
                    // For now, return null to use fallback
                }
            } catch (error) {
                console.warn('[DASHBOARD.ONCALL.RG:WARNING] Failed to load on-call schedule from API:', error);
            }
            
            return null; // Use fallback data
        }

        // [DASHBOARD.ONCALL.RENDER.RG:IMPLEMENTATION] Render On-Call Schedule Function
        async function renderOnCallSchedule() {
            const scheduleBody = document.getElementById('oncall-schedule-body');
            const currentStatus = document.getElementById('oncall-current-status');
            if (!scheduleBody || !currentStatus) return;
            
            // Try to load from API (future enhancement)
            await loadOnCallSchedule();
            
            // Fallback: Use hardcoded schedule from TEAM.md
            const onCallSchedule = [
                { week: '2025-W01', primary: '@api-team-lead', secondary: '@api-maintainer-1', escalation: '@platform-team-lead', department: 'API & Routes' },
                { week: '2025-W02', primary: '@trading-team-lead', secondary: '@trading-maintainer-1', escalation: '@platform-team-lead', department: 'Arbitrage & Trading' },
                { week: '2025-W03', primary: '@orca-team-lead', secondary: '@orca-maintainer-1', escalation: '@platform-team-lead', department: 'ORCA & Sports' },
                { week: '2025-W04', primary: '@frontend-team-lead', secondary: '@frontend-maintainer-1', escalation: '@platform-team-lead', department: 'Dashboard & UI' },
                { week: '2025-W05', primary: '@platform-team-lead', secondary: '@platform-maintainer-1', escalation: '@security-team-lead', department: 'Registry & MCP' },
                { week: '2025-W06', primary: '@security-team-lead', secondary: '@security-maintainer-1', escalation: '@platform-team-lead', department: 'Security' },
                { week: '2025-W07', primary: '@performance-team-lead', secondary: '@performance-maintainer-1', escalation: '@platform-team-lead', department: 'Performance & Caching' },
                { week: '2025-W08', primary: '@docs-team-lead', secondary: '@docs-maintainer-1', escalation: '@platform-team-lead', department: 'Documentation & DX' }
            ];
            
            // Calculate current week (simplified - in production, use proper date calculation)
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 1);
            const days = Math.floor((now - startOfYear) / (24 * 60 * 60 * 1000));
            const weekNumber = Math.ceil((days + startOfYear.getDay() + 1) / 7);
            const currentWeekIndex = (weekNumber - 1) % 8;
            const currentWeek = onCallSchedule[currentWeekIndex];
            
            // Render current status
            if (currentWeek) {
                currentStatus.innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div style="padding: 1rem; background: var(--bg-primary); border-radius: 6px;">
                            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Week</div>
                            <div style="font-weight: 600; color: var(--text-primary);">${escapeHtml(currentWeek.week)}</div>
                        </div>
                        <div style="padding: 1rem; background: var(--bg-primary); border-radius: 6px;">
                            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Primary</div>
                            <div style="font-weight: 600; color: var(--accent-orange);">${escapeHtml(currentWeek.primary)}</div>
                        </div>
                        <div style="padding: 1rem; background: var(--bg-primary); border-radius: 6px;">
                            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Department</div>
                            <div style="font-weight: 600; color: var(--text-primary);">${escapeHtml(currentWeek.department)}</div>
                        </div>
                    </div>
                `;
            }
            
            // Render schedule table
            let html = '';
            onCallSchedule.forEach((schedule, index) => {
                const isCurrentWeek = index === currentWeekIndex;
                const rowStyle = isCurrentWeek ? 'background: var(--bg-tertiary); border-left: 4px solid var(--accent-orange);' : '';
                html += `<tr style="border-bottom: 1px solid var(--border); ${rowStyle}">`;
                html += `<td style="padding: 0.75rem; color: var(--text-primary); font-weight: ${isCurrentWeek ? '600' : '400'};">${escapeHtml(schedule.week)}${isCurrentWeek ? ' <span style="color: var(--accent-orange);">(Current)</span>' : ''}</td>`;
                html += `<td style="padding: 0.75rem; color: var(--text-secondary);">${escapeHtml(schedule.primary)}</td>`;
                html += `<td style="padding: 0.75rem; color: var(--text-secondary);">${escapeHtml(schedule.secondary)}</td>`;
                html += `<td style="padding: 0.75rem; color: var(--text-secondary);">${escapeHtml(schedule.escalation)}</td>`;
                html += `<td style="padding: 0.75rem; color: var(--text-secondary);">${escapeHtml(schedule.department)}</td>`;
                html += `</tr>`;
            });
            
            scheduleBody.innerHTML = html;
        }

        // [DASHBOARD.REVIEWER.SPECIALTIES.RENDER.RG:IMPLEMENTATION] Render Reviewer Specialties Function
        function renderReviewerSpecialties() {
            const container = document.getElementById('reviewer-specialties-grid');
            if (!container) return;
            
            const specialties = [
                { lead: '@api-team-lead', name: 'API & Routes', specialties: ['API design', 'OpenAPI specs', 'REST patterns', 'Error handling'], color: '#00d4ff' },
                { lead: '@trading-team-lead', name: 'Arbitrage & Trading', specialties: ['Trading algorithms', 'Arbitrage logic', 'Market matching', 'Performance optimization'], color: '#ff1744' },
                { lead: '@orca-team-lead', name: 'ORCA & Sports', specialties: ['Sports normalization', 'Taxonomy', 'Bookmaker integration', 'Odds matching'], color: '#9c27b0' },
                { lead: '@frontend-team-lead', name: 'Dashboard & UI', specialties: ['UI/UX', 'Dashboard design', 'Browser compatibility', 'CORS handling'], color: '#667eea' },
                { lead: '@platform-team-lead', name: 'Registry & MCP', specialties: ['MCP tools', 'Registry systems', 'Infrastructure', 'CI/CD'], color: '#ff00ff' },
                { lead: '@security-team-lead', name: 'Security', specialties: ['Security audits', 'Vulnerability assessment', 'Compliance', 'Access control'], color: '#ff6b00' },
                { lead: '@performance-team-lead', name: 'Performance & Caching', specialties: ['Performance optimization', 'Caching strategies', 'Database queries', 'Profiling'], color: '#00ff88' },
                { lead: '@docs-team-lead', name: 'Documentation & DX', specialties: ['Documentation quality', 'RG markers', 'Discoverability', 'Onboarding'], color: '#00ff88' }
            ];
            
            let html = '';
            specialties.forEach(spec => {
                html += `<div style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid ${spec.color}; cursor: pointer; transition: all 0.2s;" onclick="setPRReviewerSpecialty('${spec.lead}')" onmouseover="this.style.background='var(--bg-primary)'" onmouseout="this.style.background='var(--bg-tertiary)'">`;
                html += `<div style="font-weight: 600; color: ${spec.color}; margin-bottom: 0.5rem; font-size: 1rem;">${escapeHtml(spec.lead)}</div>`;
                html += `<div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">${escapeHtml(spec.name)}</div>`;
                html += `<div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">`;
                spec.specialties.forEach(specialty => {
                    html += `<span style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: 4px; font-size: 0.75rem; color: var(--text-primary); border: 1px solid ${spec.color};">${escapeHtml(specialty)}</span>`;
                });
                html += `</div>`;
                html += `</div>`;
            });
            
            container.innerHTML = html;
        }

        // [DASHBOARD.REVIEWER.SPECIALTY.CLICK.RG:IMPLEMENTATION] Set PR Reviewer Specialty Function
        function setPRReviewerSpecialty(lead) {
            // Scroll to PR reviewer assignment section
            const prSection = document.querySelector('[id^="pr-reviewer"]')?.closest('div[style*="margin-top"]');
            if (prSection) {
                prSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            // Could pre-fill PR reviewer form with this lead
        }

        const grid = document.querySelector('.grid');
        if (grid) {
                grid.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        /**
         * Update team data and re-render cards dynamically
         * Call this function to update team members, packages, or teams
         * 
         * Example:
         *   updateTeamData({
         *     people: [...newPeople],
         *     packages: [...newPackages]
         *   });
         */
        function updateTeamData(newData) {
            if (newData.people) {
                teamData.people = newData.people;
            }
            if (newData.packages) {
                teamData.packages = newData.packages;
            }
            if (newData.teams) {
                teamData.teams = newData.teams;
            }
            renderTeamCards();
            filterTeam('all'); // Reset filter
        }

        // Expose updateTeamData globally for external updates
        window.updateTeamData = updateTeamData;

        /**
         * RSS Feed Integration
         */
        const RSS_FEED_URL = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
            ? 'http://localhost:3001/api/rss.xml'
            : `${window.location.protocol}//${window.location.host}/api/rss.xml`;

        /**
         * Fetch and parse RSS feed
         */
        async function fetchRSSFeed() {
            try {
                const response = await fetch(RSS_FEED_URL, {
                    headers: {
                        'Accept': 'application/rss+xml'
                    }
                });

                if (!response.ok) {
                    throw new Error(`RSS feed returned ${response.status}`);
                }

                const xml = await response.text();
                return parseRSSXML(xml);
            } catch (error) {
                console.error('Error fetching RSS feed:', error);
                return null;
            }
        }

        /**
         * Parse RSS XML into structured data
         */
        function parseRSSXML(xml) {
            const feed = {
                title: '',
                link: '',
                description: '',
                items: []
            };

            // Extract channel metadata
            const channelMatch = xml.match(/<channel>([\s\S]*?)<\/channel>/);
            if (!channelMatch) return feed;

            const channelXml = channelMatch[1];

            // Parse channel elements
            const titleMatch = channelXml.match(/<title><!\[CDATA\[(.*?)\]\]><\/title>|<title>(.*?)<\/title>/);
            feed.title = titleMatch ? (titleMatch[1] || titleMatch[2] || '').trim() : '';

            const linkMatch = channelXml.match(/<link>(.*?)<\/link>/);
            feed.link = linkMatch ? linkMatch[1].trim() : '';

            // Parse items
            const itemMatches = xml.matchAll(/<item>([\s\S]*?)<\/item>/g);

            for (const match of itemMatches) {
                const itemXml = match[1];

                const titleMatch = itemXml.match(/<title><!\[CDATA\[(.*?)\]\]><\/title>|<title>(.*?)<\/title>/);
                const linkMatch = itemXml.match(/<link>(.*?)<\/link>/);
                const descMatch = itemXml.match(/<description><!\[CDATA\[(.*?)\]\]><\/description>|<description>(.*?)<\/description>/);
                const categoryMatch = itemXml.match(/<category><!\[CDATA\[(.*?)\]\]><\/category>|<category>(.*?)<\/category>/);
                const pubDateMatch = itemXml.match(/<pubDate>(.*?)<\/pubDate>/);

                if (titleMatch && linkMatch) {
                    feed.items.push({
                        title: (titleMatch[1] || titleMatch[2] || '').trim(),
                        link: linkMatch[1].trim(),
                        description: descMatch ? (descMatch[1] || descMatch[2] || '').trim() : '',
                        category: categoryMatch ? (categoryMatch[1] || categoryMatch[2] || '').trim() : '',
                        pubDate: pubDateMatch ? pubDateMatch[1].trim() : new Date().toUTCString()
                    });
                }
            }

            return feed;
        }

        /**
         * Filter team-related RSS items
         */
        function filterTeamRSSItems(items) {
            const teamKeywords = ['team', 'sports', 'market', 'platform', 'maintainer', 'lead', 'package', 'registry', 'rfc'];
            return items.filter(item => {
                const titleLower = item.title.toLowerCase();
                const descLower = item.description.toLowerCase();
                const categoryLower = item.category.toLowerCase();
                
                return teamKeywords.some(keyword => 
                    titleLower.includes(keyword) || 
                    descLower.includes(keyword) || 
                    categoryLower === keyword
                );
            });
        }

        /**
         * Format date for display
         */
        function formatRSSDate(dateString) {
            try {
                const date = new Date(dateString);
                const now = new Date();
                const diffMs = now - date;
                const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

                if (diffDays === 0) {
                    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
                    if (diffHours === 0) {
                        const diffMins = Math.floor(diffMs / (1000 * 60));
                        return diffMins <= 1 ? 'Just now' : `${diffMins} minutes ago`;
                    }
                    return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
                } else if (diffDays === 1) {
                    return 'Yesterday';
                } else if (diffDays < 7) {
                    return `${diffDays} days ago`;
                } else {
                    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined });
                }
            } catch {
                return dateString;
            }
        }

        /**
         * Render RSS feed items
         */
        async function renderRSSFeed() {
            const container = document.getElementById('rss-feed-container');
            if (!container) return;

            container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-secondary);">Loading RSS feed...</div>';

            const feed = await fetchRSSFeed();
            
            if (!feed || feed.items.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-secondary);">No RSS feed items available</div>';
                return;
            }

            // Filter team-related items
            const teamItems = filterTeamRSSItems(feed.items).slice(0, 5);

            if (teamItems.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-secondary);">No team-related updates found</div>';
                return;
            }

            let html = '<div style="display: flex; flex-direction: column; gap: 1rem;">';

            teamItems.forEach(item => {
                const categoryEmoji = {
                    'team': 'üë•',
                    'registry': 'üìã',
                    'process': 'üîÑ',
                    'organization': 'üè¢',
                    'tooling': 'üîß',
                    'feature': '‚ú®',
                    'development': 'üíª',
                    'ci': 'üöÄ',
                    'cd': 'üöÄ',
                    'deployment': 'üöÄ'
                };
                const emoji = categoryEmoji[item.category.toLowerCase()] || 'üì¢';
                const shortDesc = item.description.length > 150 
                    ? item.description.substring(0, 150) + '...' 
                    : item.description;

                html += `
                    <div style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 6px; transition: all 0.2s;" 
                         onmouseover="this.style.borderColor='var(--accent-blue)'" 
                         onmouseout="this.style.borderColor='var(--border)'">
                        <div style="display: flex; align-items: start; gap: 0.75rem;">
                            <div style="font-size: 1.5rem; flex-shrink: 0;">${emoji}</div>
                            <div style="flex: 1; min-width: 0;">
                                <h3 style="margin: 0 0 0.5rem 0; font-size: 1rem; color: var(--text-primary);">
                                    <a href="${escapeHtml(item.link)}" target="_blank" style="color: var(--accent-blue); text-decoration: none; transition: color 0.2s;" 
                                       onmouseover="this.style.color='var(--accent-purple)'" 
                                       onmouseout="this.style.color='var(--accent-blue)'">
                                        ${escapeHtml(item.title)}
                                    </a>
                                </h3>
                                ${shortDesc ? `<p style="margin: 0 0 0.5rem 0; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.4;">${escapeHtml(shortDesc)}</p>` : ''}
                                <div style="display: flex; align-items: center; gap: 1rem; font-size: 0.75rem; color: var(--text-secondary);">
                                    ${item.category ? `<span style="background: var(--bg-secondary); padding: 0.25rem 0.5rem; border-radius: 4px;">${escapeHtml(item.category)}</span>` : ''}
                                    <span>${formatRSSDate(item.pubDate)}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        /**
         * Refresh RSS feed
         */
        function refreshRSSFeed() {
            renderRSSFeed();
        }

        /**
         * [DASHBOARD.TEAM.INFO.QUERY.RG:IMPLEMENTATION] Team Info Query Functions
         */
        // [DASHBOARD.TEAM.INFO.QUERY.FUNCTION.RG:IMPLEMENTATION] Query team info from API
        async function queryTeamInfo() {
            const queryInput = document.getElementById('team-info-query');
            const resultsContainer = document.getElementById('team-info-results');
            
            if (!queryInput || !resultsContainer) return;
            
            const query = queryInput.value.trim() || 'department:api';
            
            resultsContainer.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-secondary);">Querying...</div>';
            
            try {
                const apiUrl = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
                    ? 'http://localhost:3001/api/team/info'
                    : `${window.location.protocol}//${window.location.host}/api/team/info`;
                
                const response = await fetch(`${apiUrl}?query=${encodeURIComponent(query)}`, {
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`API returned ${response.status}`);
                }
                
                const result = await response.json();
                renderTeamInfoResults(result);
            } catch (error) {
                resultsContainer.innerHTML = `
                    <div style="padding: 2rem; background: var(--bg-tertiary); border: 1px solid var(--accent-orange); border-radius: 8px; color: var(--accent-orange);">
                        <strong>Error:</strong> ${escapeHtml(error.message || 'Failed to query team info')}
                        <br><br>
                        <small>Make sure the API server is running: <code>bun run dev</code></small>
                    </div>
                `;
            }
        }

        // [DASHBOARD.TEAM.INFO.RENDER.RG:IMPLEMENTATION] Render team info query results
        function renderTeamInfoResults(result) {
            const resultsContainer = document.getElementById('team-info-results');
            if (!resultsContainer) return;
            
            let html = '<div style="display: flex; flex-direction: column; gap: 1.5rem;">';
            
            // Summary
            html += `
                <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 3px solid var(--accent-blue);">
                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">üìä ${escapeHtml(result.summary || 'Results')}</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        Query: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">${escapeHtml(result.query || '')}</code>
                        ‚Ä¢ Matches: ${result.matches?.length || 0}
                    </div>
                </div>
            `;
            
            // Matches
            if (result.matches && result.matches.length > 0) {
                html += '<div><h3 style="color: var(--accent-blue); margin-bottom: 1rem;">üìç Matches</h3>';
                html += '<div style="display: flex; flex-direction: column; gap: 1rem;">';
                
                result.matches.slice(0, 5).forEach((match, i) => {
                    const preview = match.content.split('\n')[0].substring(0, 100);
                    html += `
                        <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px;">
                            <div style="display: flex; align-items: start; gap: 0.75rem;">
                                <div style="font-weight: 600; color: var(--accent-yellow);">${i + 1}.</div>
                                <div style="flex: 1;">
                                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;">
                                        Line ${match.line}${match.marker ? ` ‚Ä¢ <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px; font-size: 0.75rem;">[${escapeHtml(match.marker)}]</code>` : ''}
                                    </div>
                                    <div style="color: var(--text-primary); font-family: monospace; font-size: 0.85rem; white-space: pre-wrap; word-break: break-word;">
                                        ${escapeHtml(preview)}${preview.length >= 100 ? '...' : ''}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                if (result.matches.length > 5) {
                    html += `<div style="text-align: center; color: var(--text-secondary); font-size: 0.85rem;">... and ${result.matches.length - 5} more match(es)</div>`;
                }
                
                html += '</div></div>';
            }
            
            // Contacts
            if (result.contacts && result.contacts.length > 0) {
                html += `
                    <div>
                        <h3 style="color: var(--accent-blue); margin-bottom: 1rem;">üë• Contacts</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            ${result.contacts.map((contact) => `
                                <span style="background: var(--bg-tertiary); padding: 0.5rem 1rem; border-radius: 6px; color: var(--accent-cyan); font-weight: 500;">
                                    ${escapeHtml(contact)}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            // Related Markers
            if (result.relatedMarkers && result.relatedMarkers.length > 0) {
                html += `
                    <div>
                        <h3 style="color: var(--accent-blue); margin-bottom: 1rem;">üè∑Ô∏è Related Markers</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            ${result.relatedMarkers.map((marker) => `
                                <code style="background: var(--bg-tertiary); padding: 0.5rem 1rem; border-radius: 6px; color: var(--text-secondary); font-size: 0.85rem;">
                                    [${escapeHtml(marker)}]
                                </code>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            // Full Section (collapsible)
            if (result.section) {
                const sectionId = `team-info-section-${Date.now()}`;
                html += `
                    <div>
                        <h3 style="color: var(--accent-blue); margin-bottom: 1rem;">
                            üìÑ Full Section
                            <button onclick="toggleSection('${sectionId}')" style="margin-left: 1rem; padding: 0.25rem 0.75rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); cursor: pointer; font-size: 0.75rem;">
                                Show
                            </button>
                        </h3>
                        <div id="${sectionId}" style="display: none; padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; max-height: 500px; overflow-y: auto;">
                            <pre style="margin: 0; color: var(--text-primary); font-size: 0.85rem; white-space: pre-wrap; word-break: break-word;">${escapeHtml(result.section)}</pre>
                        </div>
                    </div>
                `;
            }
            
            html += '</div>';
            resultsContainer.innerHTML = html;
        }

        // [DASHBOARD.TEAM.INFO.SETQUERY.RG:IMPLEMENTATION] Set query from quick button
        function setTeamQuery(query) {
            const queryInput = document.getElementById('team-info-query');
            if (queryInput) {
                queryInput.value = query;
                queryTeamInfo();
            }
        }

        // [DASHBOARD.TEAM.INFO.TOGGLE.RG:IMPLEMENTATION] Toggle section visibility
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const button = event && event.target;
            if (section && button) {
                const isVisible = section.style.display !== 'none';
                section.style.display = isVisible ? 'none' : 'block';
                button.textContent = isVisible ? 'Show' : 'Hide';
            }
        }

        /**
         * [DASHBOARD.PR.REVIEWER.ASSIGNMENT.RG:IMPLEMENTATION] PR Reviewer Assignment Functions
         */
        // [DASHBOARD.PR.REVIEWER.ANALYZE.RG:IMPLEMENTATION] Analyze PR and get reviewer suggestions
        async function analyzePRReviewers() {
            const prNumberInput = document.getElementById('pr-reviewer-pr-number');
            const baseBranchInput = document.getElementById('pr-reviewer-base-branch');
            const resultsContainer = document.getElementById('pr-reviewer-results');
            
            if (!prNumberInput || !resultsContainer) return;
            
            const prNumber = parseInt(prNumberInput.value.trim(), 10);
            const baseBranch = baseBranchInput?.value.trim() || 'main';
            
            if (!prNumber || isNaN(prNumber)) {
                resultsContainer.innerHTML = `
                    <div style="padding: 2rem; background: var(--bg-tertiary); border: 1px solid var(--accent-orange); border-radius: 8px; color: var(--accent-orange);">
                        <strong>Error:</strong> Please enter a valid PR number
                    </div>
                `;
                return;
            }
            
            resultsContainer.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-secondary);">Analyzing PR...</div>';
            
            try {
                const apiUrl = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
                    ? 'http://localhost:3001/api/pr/reviewers'
                    : `${window.location.protocol}//${window.location.host}/api/pr/reviewers`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({ prNumber, baseBranch })
                });
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error || `API returned ${response.status}`);
                }
                
                const assignment = await response.json();
                renderPRReviewerResults(assignment);
            } catch (error) {
                resultsContainer.innerHTML = `
                    <div style="padding: 2rem; background: var(--bg-tertiary); border: 1px solid var(--accent-orange); border-radius: 8px; color: var(--accent-orange);">
                        <strong>Error:</strong> ${escapeHtml(error.message || 'Failed to analyze PR')}
                        <br><br>
                        <small>Make sure the API server is running: <code>bun run dev</code></small>
                    </div>
                `;
            }
        }

        // [DASHBOARD.PR.REVIEWER.RENDER.RG:IMPLEMENTATION] Render PR reviewer assignment results
        function renderPRReviewerResults(assignment) {
            const resultsContainer = document.getElementById('pr-reviewer-results');
            if (!resultsContainer) return;
            
            let html = '<div style="display: flex; flex-direction: column; gap: 1.5rem;">';
            
            // PR Summary
            html += `
                <div style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid var(--accent-purple);">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                        <div>
                            <div style="font-weight: 600; color: var(--text-primary); font-size: 1.1rem; margin-bottom: 0.5rem;">
                                PR-${assignment.prNumber}
                            </div>
                            <div style="font-size: 0.85rem; color: var(--text-secondary);">
                                Author: <code style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px;">${escapeHtml(assignment.prAuthor || 'unknown')}</code>
                                ‚Ä¢ Affected Files: ${assignment.affectedFiles?.length || 0}
                                ‚Ä¢ Suggested Reviewers: ${assignment.suggestedReviewers?.length || 0}
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            ${assignment.departmentOwners?.map(dept => `
                                <span style="background: var(--bg-primary); padding: 0.4rem 0.8rem; border-radius: 4px; font-size: 0.75rem; color: var(--accent-blue);">
                                    ${escapeHtml(dept)}
                                </span>
                            `).join('') || ''}
                        </div>
                    </div>
                    ${assignment.affectedFiles && assignment.affectedFiles.length > 0 ? `
                        <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border);">
                            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Affected Files:</div>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                ${assignment.affectedFiles.slice(0, 10).map(file => `
                                    <code style="background: var(--bg-primary); padding: 0.3rem 0.6rem; border-radius: 4px; font-size: 0.75rem; color: var(--text-secondary);">
                                        ${escapeHtml(file)}
                                    </code>
                                `).join('')}
                                ${assignment.affectedFiles.length > 10 ? `<span style="color: var(--text-secondary); font-size: 0.75rem;">+${assignment.affectedFiles.length - 10} more</span>` : ''}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
            
            // Reviewer Suggestions
            if (assignment.suggestedReviewers && assignment.suggestedReviewers.length > 0) {
                html += '<div><h3 style="color: var(--accent-purple); margin-bottom: 1rem;">üë• Suggested Reviewers (Ranked by Confidence)</h3>';
                html += '<div style="display: flex; flex-direction: column; gap: 1rem;">';
                
                assignment.suggestedReviewers.forEach((reviewer, idx) => {
                    const confidencePercent = Math.round(reviewer.confidence * 100);
                    const confidenceColor = reviewer.confidence >= 0.8 ? 'var(--accent-green)' : 
                                           reviewer.confidence >= 0.6 ? 'var(--accent-yellow)' : 
                                           'var(--accent-orange)';
                    const availabilityColor = reviewer.availability === 'high' ? 'var(--accent-green)' :
                                             reviewer.availability === 'medium' ? 'var(--accent-yellow)' :
                                             'var(--accent-orange)';
                    const loadPercent = Math.round(reviewer.currentLoad * 100);
                    
                    html += `
                        <div style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid ${confidenceColor};">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                <div style="flex: 1;">
                                    <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
                                        <div style="font-weight: 700; color: var(--accent-purple); font-size: 1.2rem; min-width: 2rem;">
                                            #${idx + 1}
                                        </div>
                                        <div style="font-weight: 600; color: var(--text-primary); font-size: 1rem;">
                                            ${escapeHtml(reviewer.username)}
                                        </div>
                                        <div style="padding: 0.3rem 0.6rem; background: ${confidenceColor}; border-radius: 4px; font-size: 0.75rem; font-weight: 600; color: var(--bg-primary);">
                                            ${confidencePercent}% confidence
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 0.75rem;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                                            <span style="font-size: 0.85rem; color: var(--text-secondary);">Availability:</span>
                                            <span style="padding: 0.25rem 0.5rem; background: ${availabilityColor}; border-radius: 3px; font-size: 0.75rem; font-weight: 600; color: var(--bg-primary);">
                                                ${reviewer.availability.toUpperCase()}
                                            </span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                                            <span style="font-size: 0.85rem; color: var(--text-secondary);">Current Load:</span>
                                            <span style="font-size: 0.85rem; color: var(--text-primary); font-weight: 500;">
                                                ${loadPercent}%
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            ${reviewer.reasons && reviewer.reasons.length > 0 ? `
                                <div style="margin-bottom: 0.75rem;">
                                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Reasons:</div>
                                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                        ${reviewer.reasons.map(reason => `
                                            <span style="background: var(--bg-primary); padding: 0.4rem 0.8rem; border-radius: 4px; font-size: 0.75rem; color: var(--accent-blue);">
                                                ${escapeHtml(reason)}
                                            </span>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${reviewer.expertise && reviewer.expertise.length > 0 ? `
                                <div>
                                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Expertise:</div>
                                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                        ${reviewer.expertise.map(exp => `
                                            <span style="background: var(--bg-primary); padding: 0.4rem 0.8rem; border-radius: 4px; font-size: 0.75rem; color: var(--accent-green);">
                                                ${escapeHtml(exp)}
                                            </span>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                html += '</div></div>';
            } else {
                html += `
                    <div style="padding: 2rem; text-align: center; color: var(--text-secondary); background: var(--bg-tertiary); border-radius: 8px;">
                        No reviewer suggestions available for this PR
                    </div>
                `;
            }
            
            html += '</div>';
            resultsContainer.innerHTML = html;
        }

        /**
         * [DASHBOARD.DEVELOPER.WORKSPACE.RG:IMPLEMENTATION] Developer Workspace Functions
         */
        // [DASHBOARD.WORKSPACE.LOAD.STATS.RG:IMPLEMENTATION] Load workspace statistics
        async function loadWorkspaceStats() {
            try {
                const apiUrl = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
                    ? 'http://localhost:3001/api/registry/workspace'
                    : `${window.location.protocol}//${window.location.host}/api/registry/workspace`;
                
                const response = await fetch(apiUrl, {
                    headers: { 'Accept': 'application/json' }
                });
                
                if (!response.ok) {
                    throw new Error(`API returned ${response.status}`);
                }
                
                const registry = await response.json();
                renderWorkspaceStats(registry);
                await loadWorkspaceKeys();
            } catch (error) {
                console.error('[DASHBOARD.WORKSPACE.RG:ERROR] Failed to load workspace stats:', error);
                document.getElementById('workspace-active-keys').textContent = 'Error';
                document.getElementById('workspace-onboarding').textContent = 'Error';
                document.getElementById('workspace-interviews').textContent = 'Error';
                document.getElementById('workspace-requests').textContent = 'Error';
            }
        }

        // [DASHBOARD.WORKSPACE.RENDER.STATS.RG:IMPLEMENTATION] Render workspace statistics
        function renderWorkspaceStats(registry) {
            if (!registry || !registry.metrics) {
                document.getElementById('workspace-active-keys').textContent = '0';
                document.getElementById('workspace-onboarding').textContent = '0';
                document.getElementById('workspace-interviews').textContent = '0';
                document.getElementById('workspace-requests').textContent = '0';
                return;
            }

            const metrics = registry.metrics.workspace || {};
            document.getElementById('workspace-active-keys').textContent = metrics.activeItems || 0;
            document.getElementById('workspace-onboarding').textContent = 
                registry.items?.filter(item => item.purpose === 'onboarding').length || 0;
            document.getElementById('workspace-interviews').textContent = 
                registry.items?.filter(item => item.purpose === 'interview').length || 0;
            document.getElementById('workspace-requests').textContent = metrics.queryCount24h || 0;
        }

        // [DASHBOARD.WORKSPACE.LOAD.KEYS.RG:IMPLEMENTATION] Load workspace keys list
        async function loadWorkspaceKeys() {
            const container = document.getElementById('workspace-keys-list');
            if (!container) return;

            try {
                const apiUrl = (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
                    ? 'http://localhost:3001/api/workspace/keys'
                    : `${window.location.protocol}//${window.location.host}/api/workspace/keys`;
                
                const response = await fetch(apiUrl, {
                    headers: { 'Accept': 'application/json' }
                });
                
                if (!response.ok) {
                    throw new Error(`API returned ${response.status}`);
                }
                
                const keys = await response.json();
                renderWorkspaceKeys(keys);
            } catch (error) {
                container.innerHTML = `
                    <div style="padding: 2rem; background: var(--bg-tertiary); border: 1px solid var(--accent-orange); border-radius: 8px; color: var(--accent-orange);">
                        <strong>Error:</strong> ${escapeHtml(error.message || 'Failed to load workspace keys')}
                        <br><br>
                        <small>Make sure the API server is running: <code>bun run dev</code></small>
                    </div>
                `;
            }
        }

        // [DASHBOARD.WORKSPACE.RENDER.KEYS.RG:IMPLEMENTATION] Render workspace keys list
        function renderWorkspaceKeys(keys) {
            const container = document.getElementById('workspace-keys-list');
            if (!container) return;

            if (!keys || keys.length === 0) {
                container.innerHTML = `
                    <div style="padding: 2rem; text-align: center; color: var(--text-secondary); background: var(--bg-tertiary); border-radius: 8px;">
                        No workspace keys found. <a href="workspace.html" target="_blank" style="color: var(--accent-green);">Create one</a>
                    </div>
                `;
                return;
            }

            let html = '<div style="display: flex; flex-direction: column; gap: 1rem;">';
            html += '<h3 style="color: var(--accent-green); margin-bottom: 0.5rem;">Active Workspace Keys</h3>';

            keys.slice(0, 10).forEach(key => {
                const expiresAt = new Date(key.expiresAt);
                const isExpired = expiresAt < new Date();
                const expiresIn = Math.ceil((expiresAt - new Date()) / (1000 * 60 * 60)); // hours
                const purposeColor = key.purpose === 'onboarding' ? 'var(--accent-blue)' :
                                    key.purpose === 'interview' ? 'var(--accent-purple)' :
                                    'var(--accent-orange)';

                html += `
                    <div style="padding: 1rem; background: var(--bg-tertiary); border-radius: 6px; border-left: 3px solid ${purposeColor};">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.25rem;">
                                    ${escapeHtml(key.email || 'Unknown')}
                                </div>
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                                    <span style="background: var(--bg-primary); padding: 0.2rem 0.4rem; border-radius: 3px; font-size: 0.75rem; color: ${purposeColor};">
                                        ${escapeHtml(key.purpose || 'workspace')}
                                    </span>
                                    ${isExpired ? 
                                        '<span style="color: var(--accent-orange); margin-left: 0.5rem;">Expired</span>' :
                                        `<span style="color: var(--accent-green); margin-left: 0.5rem;">Expires in ${expiresIn}h</span>`
                                    }
                                </div>
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-secondary);">
                                ${key.requestCount || 0} requests
                            </div>
                        </div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary); font-family: monospace;">
                            Key ID: ${escapeHtml(key.keyId || 'N/A')}
                        </div>
                    </div>
                `;
            });

            if (keys.length > 10) {
                html += `<div style="text-align: center; color: var(--text-secondary); font-size: 0.85rem; margin-top: 0.5rem;">
                    ... and ${keys.length - 10} more key(s). <a href="workspace.html" target="_blank" style="color: var(--accent-green);">View all</a>
                </div>`;
            }

            html += '</div>';
            container.innerHTML = html;
        }

        // Load workspace stats on page load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadWorkspaceStats);
        } else {
            loadWorkspaceStats();
        }

        /**
         * [DASHBOARD.JAVASCRIPT.PATCH.TRACKING.RG:IMPLEMENTATION] Patch Tracking Functions
         * Patch Tracking Integration
         * Loads and displays patch information from rss-constants.ts
         */
        async function loadPatchData() {
            try {
                // In a real implementation, this would fetch from an API endpoint
                // For now, we'll use inline data matching the constants structure
                const patchData = {
                    global: {
                        '@hyper-bun/cli': {
                            version: '1.3.4',
                            patches: [
                                {
                                    id: 'HYPERBUN-001',
                                    description: 'Add team-aware RSS feed routing',
                                    category: 'routing',
                                    severity: 'medium',
                                    applied_by: 'mike.rodriguez@yourcompany.com',
                                    applied_date: '2025-01-10',
                                    team_impact: ['sports_correlation', 'market_analytics'],
                                },
                                {
                                    id: 'HYPERBUN-002',
                                    description: 'Enable MCP tool auto-discovery',
                                    category: 'ai-integration',
                                    severity: 'high',
                                    applied_by: 'mike.rodriguez@yourcompany.com',
                                    applied_date: '2025-01-10',
                                    team_impact: ['platform_tools'],
                                },
                            ],
                            patch_dir: 'patches/@hyper-bun/cli',
                            checksum: 'sha256:a7f8c9...',
                        },
                        'bun:test': {
                            version: '1.3.4',
                            patches: [
                                {
                                    id: 'BUN-TEST-001',
                                    description: 'Add Hyper-Bun-specific matchers for CMMS assertions',
                                    category: 'testing',
                                    severity: 'medium',
                                    applied_by: 'sarah.kumar@yourcompany.com',
                                    applied_date: '2025-01-09',
                                    team_impact: ['market_analytics'],
                                },
                            ],
                        },
                    },
                    team_specific: {
                        sports_correlation: {
                            '@mlg/rss-integrator': {
                                version: '1.3.4',
                                patches: [
                                    {
                                        id: 'RSS-SPORTS-001',
                                        description: 'Cache sports feeds for 30s vs default 5min',
                                        category: 'performance',
                                        severity: 'critical',
                                        applied_by: 'alex.chen@yourcompany.com',
                                        applied_date: '2025-01-08',
                                        team_impact: ['sports_correlation'],
                                    },
                                ],
                            },
                        },
                        market_analytics: {
                            '@mlg/rss-integrator': {
                                version: '1.3.4',
                                patches: [
                                    {
                                        id: 'RSS-MARKETS-001',
                                        description: 'Enable market data deduplication',
                                        category: 'data-quality',
                                        severity: 'high',
                                        applied_by: 'sarah.kumar@yourcompany.com',
                                        applied_date: '2025-01-08',
                                        team_impact: ['market_analytics'],
                                    },
                                ],
                            },
                        },
                    },
                };
                
                renderPatchTracking(patchData);
            } catch (error) {
                console.error('Error loading patch data:', error);
                const container = document.getElementById('patch-tracking-container');
                if (container) {
                    container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--accent-orange);">Error loading patch information</div>';
                }
            }
        }

        /**
         * Render patch tracking information
         */
        function renderPatchTracking(patchData) {
            const container = document.getElementById('patch-tracking-container');
            if (!container) return;

            const severityColors = {
                critical: 'var(--accent-orange)',
                high: '#ef4444',
                medium: 'var(--accent-blue)',
                low: 'var(--text-secondary)',
            };

            const categoryEmojis = {
                routing: 'üõ£Ô∏è',
                'ai-integration': 'ü§ñ',
                testing: 'üß™',
                performance: '‚ö°',
                'data-quality': 'üìä',
            };

            const teamIdMap = {
                sports_correlation: 'sports',
                market_analytics: 'markets',
                platform_tools: 'platform',
            };

            let html = '<div style="display: flex; flex-direction: column; gap: 1.5rem;">';

            // Global patches
            if (patchData.global && Object.keys(patchData.global).length > 0) {
                html += '<div>';
                html += '<h3 style="margin-bottom: 1rem; color: var(--text-primary); font-size: 1.1rem;">üåê Global Patches</h3>';
                html += '<div style="display: flex; flex-direction: column; gap: 1rem;">';

                for (const [pkgName, pkgData] of Object.entries(patchData.global)) {
                    if (!pkgData.patches || pkgData.patches.length === 0) continue;

                    html += `<div style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;">`;
                    html += `<div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.75rem;">`;
                    html += `<div>`;
                    html += `<div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.25rem;">${escapeHtml(pkgName)}</div>`;
                    html += `<div style="font-size: 0.85rem; color: var(--text-secondary);">v${escapeHtml(pkgData.version)}</div>`;
                    html += `</div>`;
                    if (pkgData.patch_dir) {
                        html += `<div style="font-size: 0.75rem; color: var(--text-secondary); font-family: monospace; background: var(--bg-primary); padding: 0.25rem 0.5rem; border-radius: 4px;">${escapeHtml(pkgData.patch_dir)}</div>`;
                    }
                    html += `</div>`;

                    pkgData.patches.forEach(patch => {
                        const severityColor = severityColors[patch.severity] || 'var(--text-secondary)';
                        const categoryEmoji = categoryEmojis[patch.category] || 'üîß';
                        const teamLabels = patch.team_impact.map(tid => {
                            const teamId = teamIdMap[tid] || tid;
                            const teamNames = { sports: 'Sports', markets: 'Markets', platform: 'Platform' };
                            return teamNames[teamId] || tid;
                        }).join(', ');

                        html += `<div style="margin-top: 0.75rem; padding: 0.75rem; background: var(--bg-primary); border-left: 3px solid ${severityColor}; border-radius: 4px;">`;
                        html += `<div style="display: flex; align-items: start; gap: 0.5rem; margin-bottom: 0.5rem;">`;
                        html += `<span style="font-size: 1.25rem;">${categoryEmoji}</span>`;
                        html += `<div style="flex: 1;">`;
                        html += `<div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem;">`;
                        html += `<span style="font-weight: 600; color: var(--text-primary);">${escapeHtml(patch.id)}</span>`;
                        html += `<span style="font-size: 0.75rem; color: ${severityColor}; background: var(--bg-tertiary); padding: 0.2rem 0.4rem; border-radius: 4px; text-transform: uppercase;">${escapeHtml(patch.severity)}</span>`;
                        html += `</div>`;
                        html += `<div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.5rem;">${escapeHtml(patch.description)}</div>`;
                        html += `<div style="display: flex; flex-wrap: wrap; gap: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">`;
                        html += `<span>üë§ ${escapeHtml(patch.applied_by.split('@')[0])}</span>`;
                        html += `<span>üìÖ ${escapeHtml(patch.applied_date)}</span>`;
                        if (teamLabels) {
                            html += `<span>üë• ${escapeHtml(teamLabels)}</span>`;
                        }
                        html += `</div>`;
                        html += `</div>`;
                        html += `</div>`;
                        html += `</div>`;
                    });

                    html += `</div>`;
                    html += `</div>`;
                }

                html += '</div>';
                html += '</div>';
            }

            // Team-specific patches
            if (patchData.team_specific && Object.keys(patchData.team_specific).length > 0) {
                html += '<div>';
                html += '<h3 style="margin-bottom: 1rem; color: var(--text-primary); font-size: 1.1rem;">üë• Team-Specific Patches</h3>';
                html += '<div style="display: flex; flex-direction: column; gap: 1rem;">';

                for (const [teamId, teamPatches] of Object.entries(patchData.team_specific)) {
                    const teamName = teamIdMap[teamId] || teamId;
                    const teamNames = { sports: 'Sports Correlation', markets: 'Market Analytics', platform: 'Platform & Tools' };
                    const displayName = teamNames[teamName] || teamId;

                    html += `<div style="padding: 1rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 8px;">`;
                    html += `<h4 style="margin-bottom: 0.75rem; color: var(--accent-blue); font-size: 1rem;">${escapeHtml(displayName)}</h4>`;

                    for (const [pkgName, pkgData] of Object.entries(teamPatches)) {
                        if (!pkgData.patches || pkgData.patches.length === 0) continue;

                        html += `<div style="margin-bottom: 0.75rem;">`;
                        html += `<div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">${escapeHtml(pkgName)} v${escapeHtml(pkgData.version)}</div>`;

                        pkgData.patches.forEach(patch => {
                            const severityColor = severityColors[patch.severity] || 'var(--text-secondary)';
                            const categoryEmoji = categoryEmojis[patch.category] || 'üîß';

                            html += `<div style="padding: 0.75rem; background: var(--bg-primary); border-left: 3px solid ${severityColor}; border-radius: 4px; margin-bottom: 0.5rem;">`;
                            html += `<div style="display: flex; align-items: start; gap: 0.5rem;">`;
                            html += `<span style="font-size: 1.25rem;">${categoryEmoji}</span>`;
                            html += `<div style="flex: 1;">`;
                            html += `<div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem;">`;
                            html += `<span style="font-weight: 600; color: var(--text-primary); font-size: 0.9rem;">${escapeHtml(patch.id)}</span>`;
                            html += `<span style="font-size: 0.7rem; color: ${severityColor}; background: var(--bg-tertiary); padding: 0.15rem 0.35rem; border-radius: 4px; text-transform: uppercase;">${escapeHtml(patch.severity)}</span>`;
                            html += `</div>`;
                            html += `<div style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 0.25rem;">${escapeHtml(patch.description)}</div>`;
                            html += `<div style="font-size: 0.7rem; color: var(--text-secondary);">üë§ ${escapeHtml(patch.applied_by.split('@')[0])} ‚Ä¢ üìÖ ${escapeHtml(patch.applied_date)}</div>`;
                            html += `</div>`;
                            html += `</div>`;
                            html += `</div>`;
                        });

                        html += `</div>`;
                    }

                    html += `</div>`;
                }

                html += '</div>';
                html += '</div>';
            }

            html += '</div>';

            if (html === '<div style="display: flex; flex-direction: column; gap: 1.5rem;"></div>') {
                container.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--text-secondary);">No patches currently applied</div>';
            } else {
                container.innerHTML = html;
            }
        }

        // Load RSS feed on page load
        document.addEventListener('DOMContentLoaded', () => {
            renderRSSFeed();
            loadPatchData();
        });

        // Keyboard shortcuts
        document.getElementById('cmdkInput')?.addEventListener('input', (e) => {
            updateCommandPalette(e.target.value);
        });

        document.getElementById('cmdkInput')?.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowDown') {
                e.preventDefault();
                selectedIndex = Math.min(selectedIndex + 1, filteredItems.length - 1);
                renderCommandPalette();
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                selectedIndex = Math.max(selectedIndex - 1, 0);
                renderCommandPalette();
            } else if (e.key === 'Enter') {
                e.preventDefault();
                if (filteredItems[selectedIndex]) {
                    const item = filteredItems[selectedIndex];
                    if (item.type === 'team') selectTeam(item.data.id);
                    else if (item.type === 'person') selectPerson(item.data.name);
                    else if (item.type === 'package') selectPackage(item.data.name);
                }
            } else if (e.key === 'Escape') {
                closeCommandPalette({ target: { id: 'cmdkOverlay' } });
            }
        });

        // Global keyboard shortcut
        document.addEventListener('keydown', (e) => {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                openCommandPalette();
            }
        });

        // Keyboard navigation for filter tabs
        document.querySelectorAll('.filter-tab').forEach((tab, index) => {
            tab.addEventListener('keydown', (e) => {
                const tabs = Array.from(document.querySelectorAll('.filter-tab'));
                let newIndex = index;

                if (e.key === 'ArrowRight') {
                    e.preventDefault();
                    newIndex = (index + 1) % tabs.length;
                } else if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    newIndex = (index - 1 + tabs.length) % tabs.length;
                } else if (e.key === 'Home') {
                    e.preventDefault();
                    newIndex = 0;
                } else if (e.key === 'End') {
                    e.preventDefault();
                    newIndex = tabs.length - 1;
                } else if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    const teamNames = ['all', 'sports', 'markets', 'platform'];
                    filterTeam(teamNames[index]);
                    return;
                }

                if (newIndex !== index) {
                    tabs[newIndex].focus();
                    tabs[newIndex].setAttribute('tabindex', '0');
                    tab.setAttribute('tabindex', '-1');
                }
            });
        });
    </script>
</body>
</html>
