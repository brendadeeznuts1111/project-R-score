# Production Environment Configuration for Bun 1.3 Betting Platform
# Copy this file to .env.production and update with your values

# ==========================================
# APPLICATION SETTINGS
# ==========================================

NODE_ENV=production
BUN_ENV=production
DOMAIN=your-domain.com
ENVIRONMENT=production

# Application Version (used in User-Agent and health checks)
APP_VERSION=1.3.1
APP_NAME=betting-platform

# ==========================================
# SECURITY SETTINGS
# ==========================================

# JWT Configuration
JWT_SECRET=your-super-secure-jwt-secret-here-minimum-64-characters
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# API Keys
BETTING_API_KEY=your-betting-api-key-here
ADMIN_API_KEY=your-admin-api-key-here

# SSL/TLS Settings
SSL_EMAIL=your-email@domain.com
SSL_AUTO_RENEW=true

# ==========================================
# DATABASE SETTINGS
# ==========================================

# PostgreSQL Configuration
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=betting_platform
POSTGRES_USER=betting_user
POSTGRES_PASSWORD=your-secure-db-password-here
POSTGRES_SSL=true
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_IDLE_TIMEOUT=30000
POSTGRES_CONNECTION_TIMEOUT=2000

# Database Pool Settings (optimized for Bun 1.3)
DB_POOL_SIZE=50
DB_POOL_MIN=10
DB_POOL_MAX=200
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_ACQUIRE_TIMEOUT=60000

# ==========================================
# CACHE SETTINGS (Redis)
# ==========================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAXMEMORY=1gb
REDIS_MAXMEMORY_POLICY=allkeys-lru
REDIS_TLS=false

# Redis Cluster (optional)
# REDIS_CLUSTER_ENABLED=false
# REDIS_CLUSTER_NODES=redis:6379

# Cache TTL Settings (seconds)
CACHE_TTL_SHORT=300     # 5 minutes
CACHE_TTL_MEDIUM=3600   # 1 hour
CACHE_TTL_LONG=86400    # 24 hours

# ==========================================
# PERFORMANCE SETTINGS
# ==========================================

# Bun 1.3 Specific Optimizations
BUN_SQL_PRECONNECT=true
BUN_TELEMETRY_ENABLED=true
BUN_PERFORMANCE_PROFILING=true
BUN_WEB_SOCKET_COMPRESSION=true
BUN_YAML_HOT_RELOAD=false

# Server Configuration
PORT=3000
HOST=0.0.0.0
WORKER_COUNT=auto
MAX_WORKERS=8
WORKER_TIMEOUT=30

# Rate Limiting
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=1000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# Request/Response Limits
MAX_REQUEST_SIZE=50mb
MAX_RESPONSE_SIZE=100mb
REQUEST_TIMEOUT=30000
RESPONSE_TIMEOUT=30000

# ==========================================
# MONITORING & LOGGING
# ==========================================

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
PROMETHEUS_ENABLED=true

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log
LOG_MAX_SIZE=100m
LOG_MAX_FILES=10

# Tracing (optional)
TRACING_ENABLED=false
TRACING_SERVICE_NAME=betting-platform
TRACING_ENDPOINT=http://jaeger:14268/api/traces

# ==========================================
# EXTERNAL SERVICES
# ==========================================

# Email Configuration (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Slack Notifications (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_ALERT_CHANNEL=#alerts

# ==========================================
# FEATURE FLAGS
# ==========================================

# Enable/Disable Features
WEBSOCKET_ENABLED=true
GRAPHQL_ENABLED=false
API_DOCS_ENABLED=true
HEALTH_CHECKS_ENABLED=true
CORS_ENABLED=true

# Betting Features
ODDS_CALCULATION_ENABLED=true
RISK_MANAGEMENT_ENABLED=true
AUTO_SETTLEMENT_ENABLED=true
MULTI_CURRENCY_ENABLED=true

# ==========================================
# BACKUP & RECOVERY
# ==========================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *    # Daily at 2 AM
BACKUP_RETENTION_DAYS=7
BACKUP_COMPRESSION=gzip
BACKUP_ENCRYPTION=true

# Recovery Settings
RECOVERY_AUTO_FAILOVER=true
RECOVERY_TIMEOUT=300
RECOVERY_MAX_RETRIES=3

# ==========================================
# DEVELOPMENT & DEBUGGING (PRODUCTION = FALSE)
# ==========================================

DEBUG=false
DEV_MODE=false
HOT_RELOAD=false
SOURCE_MAPS=false
VERBOSE_LOGGING=false

# ==========================================
# THIRD-PARTY INTEGRATIONS
# ==========================================

# Payment Gateway (example)
PAYMENT_GATEWAY_API_KEY=your-payment-gateway-key
PAYMENT_GATEWAY_URL=https://api.payment-gateway.com
PAYMENT_WEBHOOK_SECRET=your-webhook-secret

# CDN Configuration (optional)
CDN_ENABLED=false
CDN_URL=https://cdn.your-domain.com
CDN_API_KEY=your-cdn-key

# ==========================================
# COMPLIANCE & REGULATORY
# ==========================================

# GDPR Compliance
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555  # 7 years
USER_CONSENT_REQUIRED=true

# KYC/AML (if applicable)
KYC_ENABLED=true
KYC_PROVIDER=your-kyc-provider
KYC_API_KEY=your-kyc-api-key

# Geographic Restrictions
ALLOWED_COUNTRIES=US,CA,GB,AU
BLOCKED_COUNTRIES=CU,IR,KP,SY

# ==========================================
# CONTAINER & ORCHESTRATION
# ==========================================

# Docker Settings
DOCKER_REGISTRY=your-registry.com
DOCKER_TAG=latest
DOCKER_PULL_POLICY=always

# Kubernetes (if using k8s)
K8S_NAMESPACE=betting-platform
K8S_REPLICAS=3
K8S_CPU_REQUEST=500m
K8S_CPU_LIMIT=2000m
K8S_MEMORY_REQUEST=512Mi
K8S_MEMORY_LIMIT=2Gi

# ==========================================
# ENVIRONMENT SPECIFIC OVERRIDES
# ==========================================

# Staging Environment (uncomment for staging)
# ENVIRONMENT=staging
# LOG_LEVEL=debug
# METRICS_ENABLED=false
# BACKUP_ENABLED=false

# Development Environment (uncomment for development)
# ENVIRONMENT=development
# LOG_LEVEL=debug
# DEBUG=true
# HOT_RELOAD=true
# BACKUP_ENABLED=false