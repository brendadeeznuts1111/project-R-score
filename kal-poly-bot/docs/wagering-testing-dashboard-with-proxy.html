<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Advanced Sports Wagering - Enhanced Testing Dashboard with Proxy Config</title>
    <link rel="stylesheet" href="style.css">
    <!-- Chart.js for advanced visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Enhanced Modern Styles */
        :root {
            --alice-cyan: #00CED1;
            --bob-yellow: #FFD700;
            --carol-pink: #FF69B4;
            --dave-green: #00FF7F;
            --dark-bg: #0f0f23;
            --card-bg: rgba(255, 255, 255, 0.98);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --border-glow: rgba(52, 152, 219, 0.3);
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --info: #3498db;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 50%, rgba(0, 206, 209, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 105, 180, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%);
            animation: backgroundPulse 15s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundPulse {

            0%,
            100% {
                opacity: 0.5;
                transform: scale(1);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--alice-cyan), var(--carol-pink), var(--bob-yellow), var(--dave-green));
            animation: gradientFlow 8s ease infinite;
            background-size: 300% 300%;
        }

        @keyframes gradientFlow {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        .header-title h1 {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .tag:hover {
            background: rgba(52, 152, 219, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85em;
            color: #7f8c8d;
            margin-top: 10px;
            justify-content: flex-end;
            background: rgba(255, 255, 255, 0.7);
            padding: 8px 12px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            box-shadow: 0 0 10px currentColor;
        }

        .pulse-green {
            background: #27ae60;
            animation: pulse-green 2s infinite;
        }

        @keyframes pulse-green {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(39, 174, 96, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(39, 174, 96, 0);
            }
        }

        /* Enhanced Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 18px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            border-color: var(--border-glow);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h3 i {
            font-size: 1.1em;
            opacity: 0.8;
        }

        /* Enhanced Metrics */
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .metric {
            text-align: center;
            padding: 15px;
            border-radius: 12px;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .metric::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--info), var(--success));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .metric:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .metric:hover::after {
            transform: scaleX(1);
        }

        .metric-value {
            font-size: 2.2em;
            font-weight: 800;
            color: #2c3e50;
            display: block;
            transition: all 0.3s ease;
        }

        .metric:hover .metric-value {
            color: #3498db;
            transform: scale(1.05);
        }

        .metric-label {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-top: 5px;
            font-weight: 500;
        }

        /* Enhanced Status Grid */
        .status-grid {
            display: grid;
            gap: 12px;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 16px;
            border-radius: 10px;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
        }

        .status-item:hover {
            transform: translateX(5px);
            border-color: var(--info);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.15);
        }

        .status-name {
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            box-shadow: 0 0 8px currentColor;
            animation: statusPulse 2s ease-in-out infinite;
        }

        @keyframes statusPulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.7;
                transform: scale(1.1);
            }
        }

        .status-passed {
            background: #27ae60;
            color: #27ae60;
        }

        .status-failed {
            background: #e74c3c;
            color: #e74c3c;
        }

        .status-pending {
            background: #f39c12;
            color: #f39c12;
        }

        .status-implemented {
            background: #3498db;
            color: #3498db;
        }

        /* Enhanced Progress Bars */
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #ecf0f1;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            border-radius: 6px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        /* Enhanced Table */
        .table-container {
            overflow-x: auto;
            border-radius: 12px;
            background: #fff;
            border: 1px solid #e9ecef;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            max-height: 500px;
            overflow-y: auto;
        }

        .pattern-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }

        .pattern-table th {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 14px 12px;
            font-weight: 700;
            color: #2c3e50;
            text-transform: uppercase;
            font-size: 0.85em;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            z-index: 10;
            border-bottom: 2px solid #dee2e6;
        }

        .pattern-table td {
            padding: 12px;
            border-bottom: 1px solid #f1f3f5;
            transition: all 0.2s ease;
        }

        .pattern-table tr:hover td {
            background: rgba(52, 152, 219, 0.05);
        }

        .pattern-table strong {
            color: #2c3e50;
        }

        .pattern-status {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #27ae60;
            color: white;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .pattern-status:hover {
            transform: scale(1.2) rotate(15deg);
            box-shadow: 0 0 12px rgba(39, 174, 96, 0.5);
        }

        /* Enhanced Team Badges */
        .team-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 700;
            color: #fff;
            margin-left: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .team-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .badge-alice {
            background: var(--alice-cyan);
        }

        .badge-bob {
            background: var(--bob-yellow);
            color: #333;
        }

        .badge-carol {
            background: var(--carol-pink);
        }

        .badge-dave {
            background: var(--dave-green);
            color: #333;
        }

        /* Enhanced Mini Metrics */
        .metrics-summary {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-left: 4px solid #3498db;
            padding: 18px;
            margin: 18px 0;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            font-size: 0.85em;
        }

        .mini-metric {
            padding: 10px;
            background: #fff;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .mini-metric:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: #3498db;
        }

        /* Enhanced Odds Engine */
        .odds-engine-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .engine-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 8px;
            font-size: 0.8em;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .engine-item:hover {
            transform: translateX(3px);
            border-color: #27ae60;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.15);
        }

        .engine-tag {
            font-weight: 700;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .engine-status {
            color: #27ae60;
            font-weight: 800;
            font-family: 'Courier New', monospace;
        }

        .engine-status.status-active {
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {

            0%,
            100% {
                text-shadow: 0 0 5px rgba(39, 174, 96, 0.5);
            }

            50% {
                text-shadow: 0 0 15px rgba(39, 174, 96, 0.8);
            }
        }

        /* Enhanced Liability Indicator */
        .liability-indicator {
            padding: 18px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 12px;
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .liability-indicator::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(231, 76, 60, 0.1), transparent);
            animation: liabilityShine 3s infinite;
        }

        @keyframes liabilityShine {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .liability-indicator p {
            font-size: 0.8em;
            color: #a0a0ba;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
        }

        .exposure-value {
            font-size: 1.6em;
            font-weight: 900;
            color: #e74c3c;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .mini-progress {
            width: 100%;
            height: 6px;
            background: #2c3e50;
            border-radius: 3px;
            overflow: hidden;
            position: relative;
            z-index: 1;
        }

        .mini-progress-fill.pulse-red {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            animation: pulse-red 2s infinite;
        }

        @keyframes pulse-red {

            0%,
            100% {
                opacity: 1;
                filter: brightness(1);
            }

            50% {
                opacity: 0.8;
                filter: brightness(1.2);
            }
        }

        /* Enhanced Test Progress */
        .test-progress-container {
            display: flex;
            flex-direction: column;
            gap: 6px;
            width: 140px;
        }

        .test-percentage {
            font-size: 0.9em;
            font-weight: 800;
            text-align: right;
            color: #2c3e50;
            transition: all 0.3s ease;
        }

        .test-percentage:hover {
            color: #3498db;
            transform: scale(1.1);
        }

        .mini-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            border-radius: 3px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .mini-progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: miniShimmer 1.5s infinite;
        }

        @keyframes miniShimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        /* Enhanced Filter Controls */
        .filter-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .filter-controls select {
            padding: 8px 12px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            background: #fff;
            font-weight: 600;
            color: #2c3e50;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .filter-controls select:hover {
            border-color: #3498db;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.2);
        }

        .filter-controls select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        /* Enhanced Performance Classes */
        .performance-good {
            color: #27ae60;
            font-weight: 800;
            text-shadow: 0 0 5px rgba(39, 174, 96, 0.3);
        }

        .performance-warning {
            color: #f39c12;
            font-weight: 800;
            text-shadow: 0 0 5px rgba(243, 156, 18, 0.3);
        }

        .reliability-good {
            color: #27ae60;
            font-weight: 700;
        }

        .reliability-excellent {
            color: #2ecc71;
            font-weight: 800;
            text-shadow: 0 0 8px rgba(46, 204, 113, 0.4);
            animation: reliabilityGlow 2s ease-in-out infinite;
        }

        @keyframes reliabilityGlow {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }
        }

        /* Enhanced Footer */
        .footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 30px;
            padding: 25px;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer p {
            margin: 8px 0;
            font-size: 0.95em;
        }

        .legal-notice {
            font-size: 0.75em;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 15px;
            font-style: italic;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        /* Enhanced Alert System */
        .alert {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .success {
            background: linear-gradient(135deg, #27ae60, #229954);
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        /* WebSocket Connection Status */
        .websocket-status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 25px;
            font-size: 0.85em;
            font-weight: 600;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        .websocket-connected {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }

        .websocket-disconnected {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .websocket-connecting {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .websocket-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
            animation: websocketPulse 2s infinite;
        }

        @keyframes websocketPulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(1.2);
            }
        }

        /* Enhanced Proxy Configuration */
        .proxy-pool-section {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border: 2px solid #3498db;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .proxy-pool-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .proxy-pool-title {
            font-size: 1.1em;
            font-weight: 700;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .proxy-pool-list {
            display: grid;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 10px;
            background: #fff;
        }

        .proxy-pool-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border: 1px solid #e9ecef;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .proxy-pool-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.15);
            border-color: #3498db;
        }

        .proxy-pool-item.active {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border-color: #27ae60;
        }

        .proxy-pool-info {
            flex: 1;
        }

        .proxy-pool-url {
            font-weight: 600;
            color: #2c3e50;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .proxy-pool-stats {
            font-size: 0.8em;
            color: #7f8c8d;
            margin-top: 4px;
        }

        .proxy-pool-actions {
            display: flex;
            gap: 5px;
        }

        .proxy-pool-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .proxy-pool-btn.edit {
            background: #3498db;
            color: white;
        }

        .proxy-pool-btn.edit:hover {
            background: #2980b9;
        }

        .proxy-pool-btn.remove {
            background: #e74c3c;
            color: white;
        }

        .proxy-pool-btn.remove:hover {
            background: #c0392b;
        }

        .proxy-pool-btn.test {
            background: #27ae60;
            color: white;
        }

        .proxy-pool-btn.test:hover {
            background: #229954;
        }

        /* Load Balancing Controls */
        .load-balancing-section {
            background: linear-gradient(135deg, #ecf0f1, #bdc3c7);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .load-balancing-title {
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 0.95em;
        }

        .load-balancing-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .load-balancing-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e9ecef;
        }

        .load-balancing-option input[type="radio"] {
            margin: 0;
        }

        .load-balancing-option label {
            font-size: 0.85em;
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
            cursor: pointer;
        }

        /* Enhanced Pattern Filtering */
        .enhanced-filter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 0.85em;
            font-weight: 600;
            color: #2c3e50;
        }

        .filter-group select,
        .filter-group input {
            padding: 8px 10px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .filter-actions {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        .filter-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85em;
        }

        .filter-btn-primary {
            background: #3498db;
            color: white;
        }

        .filter-btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .filter-btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .filter-btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        /* Export Controls */
        .export-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .export-btn {
            padding: 10px 15px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85em;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .export-btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .export-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .export-btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .export-btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(149, 165, 166, 0.4);
        }

        /* Enhanced Threat Level */
        .threat-level {
            font-size: 0.85em;
            color: #7f8c8d;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Proxy Configuration Styles */
        .proxy-config-section {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border: 2px solid #3498db;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }

        .proxy-input-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }

        .proxy-input {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .proxy-input label {
            font-size: 0.8em;
            font-weight: 600;
            color: #2c3e50;
        }

        .proxy-input input,
        .proxy-input select {
            padding: 8px 10px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .proxy-input input:focus,
        .proxy-input select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .proxy-buttons {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .proxy-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85em;
        }

        .proxy-btn-primary {
            background: #3498db;
            color: white;
        }

        .proxy-btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .proxy-btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .proxy-btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .proxy-btn-success {
            background: #27ae60;
            color: white;
        }

        .proxy-btn-success:hover {
            background: #229954;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
        }

        .proxy-status-display {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 12px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.8em;
            margin-top: 10px;
            max-height: 120px;
            overflow-y: auto;
        }

        .proxy-status-display .success-line {
            color: #2ecc71;
        }

        .proxy-status-display .error-line {
            color: #e74c3c;
        }

        .proxy-status-display .info-line {
            color: #3498db;
        }

        .proxy-headers-list {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 8px;
            margin-top: 8px;
            font-size: 0.85em;
        }

        .proxy-header-item {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .proxy-header-item:last-child {
            border-bottom: none;
        }

        .proxy-header-key {
            font-weight: 600;
            color: #2c3e50;
        }

        .proxy-header-value {
            color: #7f8c8d;
            font-family: 'Courier New', monospace;
        }

        /* Proxy Code Example Block */
        .proxy-code-example {
            background: #1a1a2e;
            color: #00ff7f;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.8em;
            margin-top: 10px;
            overflow-x: auto;
            border: 1px solid #3498db;
        }

        .proxy-code-example .code-comment {
            color: #7f8c8d;
        }

        .proxy-code-example .code-keyword {
            color: #3498db;
            font-weight: bold;
        }

        .proxy-code-example .code-string {
            color: #f39c12;
        }

        .proxy-code-example .code-function {
            color: #2ecc71;
        }

        /* Responsive Enhancements */
        @media (max-width: 1400px) {
            .dashboard-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .header-status {
                align-items: flex-start;
            }

            .proxy-input-group {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .header-title h1 {
                font-size: 2em;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .odds-engine-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #3498db;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Real-time Update Indicator */
        .live-update {
            animation: liveFlash 0.5s ease;
        }

        @keyframes liveFlash {

            0%,
            100% {
                background-color: transparent;
            }

            50% {
                background-color: rgba(52, 152, 219, 0.1);
            }
        }

        /* Chart Container Enhancements */
        .chart-container {
            position: relative;
            height: 150px;
            width: 100%;
            margin-top: 15px;
        }

        /* Additional Utility Classes */
        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .mt-10 {
            margin-top: 10px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-10 {
            margin-bottom: 10px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .flex {
            display: flex;
        }

        .flex-between {
            justify-content: space-between;
        }

        .flex-center {
            justify-content: center;
            align-items: center;
        }

        .gap-10 {
            gap: 10px;
        }

        .gap-15 {
            gap: 15px;
        }

        /* Performance Optimizations */
        .card,
        .metric,
        .status-item,
        .engine-item {
            will-change: transform;
        }

        /* Accessibility Improvements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Focus Styles for Accessibility */
        button:focus,
        select:focus,
        a:focus,
        input:focus {
            outline: 3px solid rgba(52, 152, 219, 0.5);
            outline-offset: 2px;
        }

        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            .card {
                border: 2px solid #000;
            }

            .metric {
                border: 2px solid #000;
            }
        }

        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>

<body>
    <!-- WebSocket Connection Status -->
    <div class="websocket-status websocket-connecting" id="websocket-status">
        <div class="websocket-dot"></div>
        <span id="websocket-text">Connecting...</span>
    </div>

    <!-- Export Controls -->
    <div class="export-controls">
        <button class="export-btn export-btn-primary" onclick="exportDashboardData()">
            <i class="fas fa-download"></i> Export Data
        </button>
        <button class="export-btn export-btn-secondary" onclick="exportProxyConfig()">
            <i class="fas fa-cog"></i> Export Config
        </button>
    </div>
    <!-- Header Section -->
    <header class="header">
        <div class="header-content">
            <div class="header-title">
                <h1>üéØ Advanced Sports Wagering</h1>
                <p>Enhanced Testing Dashboard with Bun Proxy Integration</p>
                <div class="header-tags">
                    <span class="tag" title="95th percentile latency target"><i class="fas fa-bolt"></i> P95 <
                            100ms</span>
                            <span class="tag" title="Zero-trust security architecture"><i class="fas fa-shield-alt"></i>
                                Zero-Trust</span>
                            <span class="tag" title="Bun fetch() proxy support"><i class="fas fa-network-wired"></i>
                                Proxy Ready</span>
                            <span class="tag" title="High availability target"><i class="fas fa-check-circle"></i>
                                99.99% Uptime</span>
                </div>
            </div>
            <div class="header-status">
                <div class="alert success" style="margin-bottom: 0; padding: 12px 20px; border-radius: 12px;">
                    <strong><i class="fas fa-check-circle"></i> ‚úÖ System Operational</strong><br>
                    <small id="current-timestamp">Loading...</small>
                </div>
                <div class="live-indicator">
                    <span class="dot pulse-green"></span>
                    <span id="live-users">0</span> Active Users
                    <span style="margin-left: 10px; font-size: 0.85em; color: #95a5a6;">|</span>
                    <span id="system-health" style="font-weight: 600; color: #27ae60;">HEALTHY</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard Grid -->
    <main class="container">
        <section class="dashboard-grid">

            <!-- 1. Test Overview Card -->
            <article class="card overview-card">
                <h3><i class="fas fa-chart-line"></i> üìä Test Overview</h3>
                <div class="metric-grid">
                    <div class="metric">
                        <span class="metric-value" id="test-pass-rate">98.5%</span>
                        <span class="metric-label">Pass Rate</span>
                    </div>
                    <div class="metric">
                        <span class="metric-value" id="url-patterns-count">30/30</span>
                        <span class="metric-label">API Patterns</span>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="overall-progress" style="width: 0%"></div>
                </div>
                <div class="flex flex-between mt-10" style="font-size: 0.85em; color: #7f8c8d;">
                    <span><i class="fas fa-bullseye"></i> Reliability Target: 99.95%</span>
                    <span id="compliance-status"><i class="fas fa-check"></i> Compliant</span>
                </div>
            </article>

            <!-- 2. Performance Metrics Card -->
            <article class="card performance-card">
                <h3><i class="fas fa-stopwatch"></i> ‚ö° Real-time Latency (P95)</h3>
                <div class="metric-grid">
                    <div class="metric">
                        <span class="metric-value" id="avg-response">--</span>
                        <span class="metric-label">Avg Latency</span>
                    </div>
                    <div class="metric">
                        <span class="metric-value" id="req-per-sec">--</span>
                        <span class="metric-label">Req/sec</span>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="latencyChart"></canvas>
                </div>
            </article>

            <!-- 3. Security & Compliance Card -->
            <article class="card security-card">
                <h3><i class="fas fa-lock"></i> üîê Security Matrix</h3>
                <div class="status-grid">
                    <div class="status-item">
                        <span class="status-name">Zero-Trust Validation <span
                                class="team-badge badge-alice">Alice</span></span>
                        <span class="status-indicator status-passed"></span>
                    </div>
                    <div class="status-item">
                        <span class="status-name">ML-DSA-65 Signatures <span
                                class="team-badge badge-bob">Bob</span></span>
                        <span class="status-indicator status-passed"></span>
                    </div>
                    <div class="status-item">
                        <span class="status-name">RG Limit Enforcement <span
                                class="team-badge badge-dave">Dave</span></span>
                        <span class="status-indicator status-passed"></span>
                    </div>
                    <div class="status-item">
                        <span class="status-name">Threat Intelligence <span
                                class="team-badge badge-alice">Alice</span></span>
                        <div class="threat-level">
                            <i class="fas fa-shield-alt"></i> Threat Level:
                            <span id="threat-score" style="color: #27ae60; font-weight: 800;">Low (0.02)</span>

                            /* High Contrast Mode Support */
                            @media (prefers-contrast: high) {
                            .card {
                            border: 2px solid #000;
                            }

                            .metric {
                            border: 2px solid #000;
                            }
                            }

                            /* Reduced Motion Support */
                            @media (prefers-reduced-motion: reduce) {

                            *,
                            *::before,
                            *::after {
                            animation-duration: 0.01ms !important;
                            animation-iteration-count: 1 !important;
                            transition-duration: 0.01ms !important;
                            }
                            }
                            </style>
                            </head>

                            <body>
                                <!-- WebSocket Connection Status -->
                                <div class="websocket-status websocket-connecting" id="websocket-status">
                                    <div class="websocket-dot"></div>
                                    <span id="websocket-text">Connecting...</span>
                                </div>

                                <!-- Export Controls -->
                                <div class="export-controls">
                                    <button class="export-btn export-btn-primary" onclick="exportDashboardData()">
                                        <i class="fas fa-download"></i> Export Data
                                    </button>
                                    <button class="export-btn export-btn-secondary" onclick="exportProxyConfig()">
                                        <i class="fas fa-cog"></i> Export Config
                                    </button>
                                </div>
                                <!-- Header Section -->
                                <header class="header">
                                    <div class="header-content">
                                        <div class="header-title">
                                            <h1>üéØ Advanced Sports Wagering</h1>
                                            <p>Enhanced Testing Dashboard with Bun Proxy Integration</p>
                                            <div class="header-tags">
                                                <span class="tag" title="95th percentile latency target"><i
                                                        class="fas fa-bolt"></i> P95 < 100ms</span>
                                                        <span class="tag" title="Zero-trust security architecture"><i
                                                                class="fas fa-shield-alt"></i>
                                                            Zero-Trust</span>
                                                        <span class="tag" title="Bun fetch() proxy support"><i
                                                                class="fas fa-network-wired"></i>
                                                            Proxy Ready</span>
                                                        <span class="tag" title="High availability target"><i
                                                                class="fas fa-check-circle"></i>
                                                            99.99% Uptime</span>
                                            </div>
                                        </div>
                                        <div class="header-status">
                                            <div class="alert success"
                                                style="margin-bottom: 0; padding: 12px 20px; border-radius: 12px;">
                                                <strong><i class="fas fa-check-circle"></i> ‚úÖ System
                                                    Operational</strong><br>
                                                <small id="current-timestamp">Loading...</small>
                                            </div>
                                            <div class="live-indicator">
                                                <span class="dot pulse-green"></span>
                                                <span id="live-users">0</span> Active Users
                                                <span
                                                    style="margin-left: 10px; font-size: 0.85em; color: #95a5a6;">|</span>
                                                <span id="system-health"
                                                    style="font-weight: 600; color: #27ae60;">HEALTHY</span>
                                            </div>
                                        </div>
                                    </div>
                                </header>

                                <!-- Main Dashboard Grid -->
                                <main class="container">
                                    <section class="dashboard-grid">

                                        <!-- 1. Test Overview Card -->
                                        <article class="card overview-card">
                                            <h3><i class="fas fa-chart-line"></i> üìä Test Overview</h3>
                                            <div class="metric-grid">
                                                <div class="metric">
                                                    <span class="metric-value" id="test-pass-rate">98.5%</span>
                                                    <span class="metric-label">Pass Rate</span>
                                                </div>
                                                <div class="metric">
                                                    <span class="metric-value" id="url-patterns-count">30/30</span>
                                                    <span class="metric-label">API Patterns</span>
                                                </div>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="progress-fill" id="overall-progress" style="width: 0%">
                                                </div>
                                            </div>
                                            <div class="flex flex-between mt-10"
                                                style="font-size: 0.85em; color: #7f8c8d;">
                                                <span><i class="fas fa-bullseye"></i> Reliability Target: 99.95%</span>
                                                <span id="compliance-status"><i class="fas fa-check"></i>
                                                    Compliant</span>
                                            </div>
                                        </article>

                                        <!-- 2. Performance Metrics Card -->
                                        <article class="card performance-card">
                                            <h3><i class="fas fa-stopwatch"></i> ‚ö° Real-time Latency (P95)</h3>
                                            <div class="metric-grid">
                                                <div class="metric">
                                                    <span class="metric-value" id="avg-response">--</span>
                                                    <span class="metric-label">Avg Latency</span>
                                                </div>
                                                <div class="metric">
                                                    <span class="metric-value" id="req-per-sec">--</span>
                                                    <span class="metric-label">Req/sec</span>
                                                </div>
                                            </div>
                                            <div class="chart-container">
                                                <canvas id="latencyChart"></canvas>
                                            </div>
                                        </article>

                                        <!-- 3. Security & Compliance Card -->
                                        <article class="card security-card">
                                            <h3><i class="fas fa-lock"></i> üîê Security Matrix</h3>
                                            <div class="status-grid">
                                                <div class="status-item">
                                                    <span class="status-name">Zero-Trust Validation <span
                                                            class="team-badge badge-alice">Alice</span></span>
                                                    <span class="status-indicator status-passed"></span>
                                                </div>
                                                <div class="status-item">
                                                    <span class="status-name">ML-DSA-65 Signatures <span
                                                            class="team-badge badge-bob">Bob</span></span>
                                                    <span class="status-indicator status-passed"></span>
                                                </div>
                                                <div class="status-item">
                                                    <span class="status-name">RG Limit Enforcement <span
                                                            class="team-badge badge-dave">Dave</span></span>
                                                    <span class="status-indicator status-passed"></span>
                                                </div>
                                                <div class="status-item">
                                                    <span class="status-name">Threat Intelligence <span
                                                            class="team-badge badge-alice">Alice</span></span>
                                                    <div class="threat-level">
                                                        <i class="fas fa-shield-alt"></i> Threat Level:
                                                        <span id="threat-score"
                                                            style="color: #27ae60; font-weight: 800;">Low (0.02)</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </article>

                                        <!-- 4. Advanced Proxy Configuration & Network Card -->
                                        <article class="card proxy-card" style="grid-column: span 2;">
                                            <h3><i class="fas fa-network-wired"></i> üîó Advanced Proxy Pool Management
                                            </h3>

                                            <div class="proxy-config-section">
                                                <div class="proxy-input-group">
                                                    <div class="proxy-input">
                                                        <label>Proxy URL</label>
                                                        <input type="text" id="proxy-url"
                                                            placeholder="https://proxy.internal:8080"
                                                            value="https://proxy.internal:8080">
                                                    </div>
                                                    <div class="proxy-input">
                                                        <label>Authentication</label>
                                                        <select id="proxy-auth-type">
                                                            <option value="none">None</option>
                                                            <option value="basic">Basic Auth</option>
                                                            <option value="bearer">Bearer Token</option>
                                                            <option value="custom">Custom Header</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="proxy-input-group">
                                                    <div class="proxy-input">
                                                        <label>Username (for Basic Auth)</label>
                                                        <input type="text" id="proxy-username" placeholder="username">
                                                    </div>
                                                    <div class="proxy-input">
                                                        <label>Password/Token</label>
                                                        <input type="password" id="proxy-password"
                                                            placeholder="password/token">
                                                    </div>
                                                </div>

                                                <div class="proxy-input-group">
                                                    <div class="proxy-input">
                                                        <label>Custom Header Name</label>
                                                        <input type="text" id="proxy-header-name"
                                                            placeholder="X-Proxy-Region">
                                                    </div>
                                                    <div class="proxy-input">
                                                        <label>Custom Header Value</label>
                                                        <input type="text" id="proxy-header-value"
                                                            placeholder="us-east-1">
                                                    </div>
                                                </div>

                                                <div class="proxy-buttons">
                                                    <button class="proxy-btn proxy-btn-primary"
                                                        onclick="addProxyToPool()">
                                                        <i class="fas fa-plus"></i> Add to Pool
                                                    </button>
                                                    <button class="proxy-btn proxy-btn-success"
                                                        onclick="testAllProxies()">
                                                        <i class="fas fa-plug"></i> Test All
                                                    </button>
                                                    <button class="proxy-btn proxy-btn-secondary"
                                                        onclick="toggleProxyPool()">
                                                        <i class="fas fa-power-off"></i> Toggle Pool
                                                    </button>
                                                    <button class="proxy-btn proxy-btn-secondary"
                                                        onclick="clearProxyConfig()">
                                                        <i class="fas fa-trash"></i> Clear All
                                                    </button>
                                                </div>

                                                <div class="proxy-status-display" id="proxy-status">
                                                    <div class="info-line">> Advanced proxy pool system ready...</div>
                                                    <div class="info-line">> Configure multiple proxies for load
                                                        balancing</div>
                                                </div>
                                            </div>

                                            <!-- Proxy Pool Section -->
                                            <div class="proxy-pool-section">
                                                <div class="proxy-pool-header">
                                                    <div class="proxy-pool-title">
                                                        <i class="fas fa-server"></i> Active Proxy Pool
                                                        <span class="team-badge badge-alice" id="pool-count">0
                                                            Proxies</span>
                                                    </div>
                                                    <button class="proxy-btn proxy-btn-primary"
                                                        onclick="showAddProxyModal()">
                                                        <i class="fas fa-plus"></i> Add Proxy
                                                    </button>
                                                </div>

                                                <div class="proxy-pool-list" id="proxy-pool-list">
                                                    <!-- Proxy pool items will be populated here -->
                                                    <div style="text-align: center; color: #7f8c8d; padding: 20px;">
                                                        <i class="fas fa-inbox"
                                                            style="font-size: 2em; margin-bottom: 10px;"></i>
                                                        <p>No proxies configured. Add your first proxy to get started.
                                                        </p>
                                                    </div>
                                                </div>

                                                <!-- Load Balancing Section -->
                                                <div class="load-balancing-section">
                                                    <div class="load-balancing-title">
                                                        <i class="fas fa-balance-scale"></i> Load Balancing Strategy
                                                    </div>
                                                    <div class="load-balancing-options">
                                                        <div class="load-balancing-option">
                                                            <input type="radio" id="round-robin" name="load-balancing"
                                                                value="round-robin" checked>
                                                            <label for="round-robin">Round Robin</label>
                                                        </div>
                                                        <div class="load-balancing-option">
                                                            <input type="radio" id="least-latency" name="load-balancing"
                                                                value="least-latency">
                                                            <label for="least-latency">Least Latency</label>
                                                        </div>
                                                        <div class="load-balancing-option">
                                                            <input type="radio" id="random" name="load-balancing"
                                                                value="random">
                                                            <label for="random">Random</label>
                                                        </div>
                                                        <div class="load-balancing-option">
                                                            <input type="radio" id="weighted" name="load-balancing"
                                                                value="weighted">
                                                            <label for="weighted">Weighted</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="proxy-code-example">
                                                <div class="code-comment">// Bun fetch() with advanced proxy pool</div>
                                                <div class="code-keyword">const</div> proxyPool = <span
                                                    class="code-keyword">new</span> <span
                                                    class="code-function">ProxyPool</span>([<br>
                                                &nbsp;&nbsp;<span
                                                    class="code-string">"https://proxy1.example.com:8080"</span>,<br>
                                                &nbsp;&nbsp;<span
                                                    class="code-string">"https://proxy2.example.com:8080"</span>,<br>
                                                &nbsp;&nbsp;<span
                                                    class="code-string">"https://proxy3.example.com:8080"</span><br>
                                                ]);<br>
                                                <br>
                                                <div class="code-keyword">const</div> response = <span
                                                    class="code-keyword">await</span> <span
                                                    class="code-function">fetch</span>(<span
                                                    class="code-string">"https://sportsbook-api.com/odds"</span>, {<br>
                                                &nbsp;&nbsp;proxy: proxyPool.<span
                                                    class="code-function">getOptimalProxy</span>(),<br>
                                                &nbsp;&nbsp;loadBalancing: <span
                                                    class="code-string">"least-latency"</span>,<br>
                                                &nbsp;&nbsp;retryOnFailure: <span class="code-keyword">true</span>,<br>
                                                &nbsp;&nbsp;timeout: <span class="code-string">"5000ms"</span><br>
                                                });
                                            </div>
                                        </article>

                                        <!-- 5. URL Pattern Implementation Card -->
                                        <article class="card patterns-card" style="grid-column: span 2;">
                                            <div class="flex flex-between flex-center mb-20">
                                                <h3 style="margin-bottom: 0;"><i class="fas fa-bullseye"></i> üéØ
                                                    Wagering Patterns & Edge Analysis
                                                </h3>
                                                <!-- Enhanced Filter Controls -->
                                                <div class="enhanced-filter-controls">
                                                    <div class="filter-group">
                                                        <label>Cluster</label>
                                                        <select id="pattern-cluster-filter">
                                                            <option value="all">All Clusters</option>
                                                            <option value="Value Discovery">Value Discovery</option>
                                                            <option value="Trend Exploitation">Trend Exploitation
                                                            </option>
                                                            <option value="Risk Mitigation">Risk Mitigation</option>
                                                            <option value="Prop Specialization">Prop Specialization
                                                            </option>
                                                            <option value="Market Making">Market Making</option>
                                                        </select>
                                                    </div>
                                                    <div class="filter-group">
                                                        <label>Risk Level</label>
                                                        <select id="risk-filter">
                                                            <option value="all">All Levels</option>
                                                            <option value="Low">Low</option>
                                                            <option value="Medium">Medium</option>
                                                            <option value="High">High</option>
                                                        </select>
                                                    </div>
                                                    <div class="filter-group">
                                                        <label>Performance</label>
                                                        <select id="performance-filter">
                                                            <option value="all">All Performance</option>
                                                            <option value="fast">&lt;50ms</option>
                                                            <option value="medium">50-100ms</option>
                                                            <option value="slow">&gt;100ms</option>
                                                        </select>
                                                    </div>
                                                    <div class="filter-group">
                                                        <label>Search</label>
                                                        <input type="text" id="pattern-search"
                                                            placeholder="Search patterns...">
                                                    </div>
                                                    <div class="filter-actions">
                                                        <button class="filter-btn filter-btn-primary"
                                                            onclick="applyFilters()">
                                                            <i class="fas fa-filter"></i> Apply
                                                        </button>
                                                        <button class="filter-btn filter-btn-secondary"
                                                            onclick="resetFilters()">
                                                            <i class="fas fa-undo"></i> Reset
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="metrics-summary">
                                                <div class="metrics-grid">
                                                    <div class="mini-metric"><strong>Patterns:</strong> <span
                                                            id="active-patterns">30</span> Active
                                                        <article class="card patterns-card"
                                                            style="grid-column: span 2;">
                                                            <div class="flex flex-between flex-center mb-20">
                                                                <h3 style="margin-bottom: 0;"><i
                                                                        class="fas fa-bullseye"></i> üéØ Wagering
                                                                    Patterns & Edge Analysis
                                                                </h3>
                                                                <div class="filter-controls">
                                                                    <select id="pattern-cluster-filter"
                                                                        aria-label="Filter patterns by cluster">
                                                                        <option value="all">All Clusters</option>
                                                                        <option value="Value Discovery">Value Discovery
                                                                        </option>
                                                                        <option value="Trend Exploitation">Trend
                                                                            Exploitation</option>
                                                                        <option value="Risk Mitigation">Risk Mitigation
                                                                        </option>
                                                                        <option value="Prop Specialization">Prop
                                                                            Specialization</option>
                                                                        <option value="Market Making">Market Making
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>

                                                            <div class="metrics-summary">
                                                                <div class="metrics-grid">
                                                                    <div class="mini-metric"><strong>Patterns:</strong>
                                                                        <span id="active-patterns">30</span> Active
                                                                    </div>
                                                                    <div class="mini-metric">
                                                                        <strong>Cross-Book:</strong> <span
                                                                            id="cross-book-sources">7+</span>
                                                                        Sources
                                                                    </div>
                                                                    <div class="mini-metric"><strong>Avg
                                                                            Performance:</strong> <span
                                                                            id="avg-perf">68ms</span></div>
                                                                    <div class="mini-metric"><strong>Test
                                                                            Coverage:</strong> <span
                                                                            id="test-coverage">92%</span>
                                                                    </div>
                                                                    <div class="mini-metric">
                                                                        <strong>Reliability:</strong> <span
                                                                            id="reliability">99.99%</span>
                                                                    </div>
                                                                    <div class="mini-metric"><strong>SLA
                                                                            Alerts:</strong> <span
                                                                            id="sla-alerts">0</span></div>
                                                                </div>
                                                            </div>

                                                            <div class="table-container">
                                                                <table class="pattern-table" id="pattern-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>#</th>
                                                                            <th>Wager Type</th>
                                                                            <th>Primary Edge</th>
                                                                            <th>Statistical Method</th>
                                                                            <th>Risk</th>
                                                                            <th>Perf</th>
                                                                            <th>Status</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody id="pattern-tbody">
                                                                        <!-- Data will be populated by script -->
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </article>

                                                        <!-- 6. System Health & Infrastructure Card -->
                                                        <article class="card health-card">
                                                            <h3><i class="fas fa-heartbeat"></i> üè• Global
                                                                Infrastructure</h3>
                                                            <div class="status-grid">
                                                                <div class="status-item">
                                                                    <span class="status-name">Global Uptime</span>
                                                                    <span class="metric-value"
                                                                        style="font-size: 1.1em; color: #27ae60; font-weight: 800;"
                                                                        id="global-uptime">99.998%</span>
                                                                </div>
                                                                <div class="status-item">
                                                                    <span class="status-name">US-East Region</span>
                                                                    <span class="status-indicator status-passed"></span>
                                                                </div>
                                                                <div class="status-item">
                                                                    <span class="status-name">EU-West Region</span>
                                                                    <span class="status-indicator status-passed"></span>
                                                                </div>
                                                                <div class="status-item">
                                                                    <span class="status-name">Memory Usage (RSS)</span>
                                                                    <span class="metric-value"
                                                                        style="font-size: 1em; color: #3498db; font-weight: 700;"
                                                                        id="mem-usage">--</span>
                                                                </div>
                                                                <div class="status-item">
                                                                    <span class="status-name">Redis Pool Depth</span>
                                                                    <span class="metric-value"
                                                                        style="font-size: 1em; color: #f39c12; font-weight: 700;"
                                                                        id="redis-depth">--</span>
                                                                </div>
                                                                <div class="status-item">
                                                                    <span class="status-name">Database
                                                                        Connections</span>
                                                                    <span class="metric-value"
                                                                        style="font-size: 1em; color: #9b59b6; font-weight: 700;"
                                                                        id="db-connections">--</span>
                                                                </div>
                                                            </div>
                                                        </article>

                                                        <!-- 7. Test Results (Surgical Precision) -->
                                                        <article class="card results-card" style="grid-column: span 2;">
                                                            <h3><i class="fas fa-flask"></i> üß™ Surgical Precision Tests
                                                            </h3>
                                                            <div class="status-grid">
                                                                <div class="status-item">
                                                                    <span class="status-name">Unit Tests <span
                                                                            class="team-badge badge-carol">Carol</span></span>
                                                                    <div class="test-progress-container">
                                                                        <div class="test-percentage" id="unit-percent">
                                                                            --</div>
                                                                        <div class="mini-progress">
                                                                            <div class="mini-progress-fill"
                                                                                id="unit-progress" style="width: 0%">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="status-item">
                                                                    <span class="status-name">Integration <span
                                                                            class="team-badge badge-alice">Alice</span></span>
                                                                    <div class="test-progress-container">
                                                                        <div class="test-percentage"
                                                                            id="integration-percent">--</div>
                                                                        <div class="mini-progress">
                                                                            <div class="mini-progress-fill"
                                                                                id="integration-progress"
                                                                                style="width: 0%"></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="status-item">
                                                                    <span class="status-name">Performance <span
                                                                            class="team-badge badge-bob">Bob</span></span>
                                                                    <div class="test-progress-container">
                                                                        <div class="test-percentage"
                                                                            id="performance-percent">--</div>
                                                                        <div class="mini-progress">
                                                                            <div class="mini-progress-fill"
                                                                                id="performance-progress"
                                                                                style="width: 0%"></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="status-item">
                                                                    <span class="status-name">Security (Red Team) <span
                                                                            class="team-badge badge-carol">Carol</span></span>
                                                                    <div class="test-progress-container">
                                                                        <div class="test-percentage"
                                                                            id="security-percent">--</div>
                                                                        <div class="mini-progress">
                                                                            <div class="mini-progress-fill"
                                                                                id="security-progress"
                                                                                style="width: 0%"></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </article>

                                                        <!-- 8. Mathematical Odds Engine Status -->
                                                        <article class="card odds-card">
                                                            <h3><i class="fas fa-dice"></i> üé≤ Odds Engine & Risk</h3>
                                                            <div class="odds-engine-grid">
                                                                <div class="engine-item">
                                                                    <span class="engine-tag"><i
                                                                            class="fas fa-calculator"></i> Kelly
                                                                        Criterion</span>
                                                                    <span class="engine-status status-active"
                                                                        id="kelly-f">f=0.5</span>
                                                                </div>
                                                                <div class="engine-item">
                                                                    <span class="engine-tag"><i
                                                                            class="fas fa-chart-area"></i> Monte
                                                                        Carlo</span>
                                                                    <span class="engine-status status-active"
                                                                        id="monte-carlo">10k samples</span>
                                                                </div>
                                                                <div class="engine-item">
                                                                    <span class="engine-tag"><i
                                                                            class="fas fa-search-dollar"></i> Arb
                                                                        Detect</span>
                                                                    <span class="engine-status status-active"
                                                                        id="arb-detect">Active</span>
                                                                </div>
                                                                <div class="engine-item">
                                                                    <span class="engine-tag"><i
                                                                            class="fas fa-function"></i> Poisson
                                                                        Totals</span>
                                                                    <span class="engine-status status-active"
                                                                        id="poisson">Œª=1.2</span>
                                                                </div>
                                                                <div class="engine-item">
                                                                    <span class="engine-tag"><i
                                                                            class="fas fa-sliders-h"></i> Elo
                                                                        Adjustment</span>
                                                                    <span class="engine-status status-active"
                                                                        id="elo">K=15</span>
                                                                </div>
                                                                <div class="engine-item">
                                                                    <span class="engine-tag"><i
                                                                            class="fas fa-brain"></i> Bayesian
                                                                        Update</span>
                                                                    <span class="engine-status status-active"
                                                                        id="bayesian">œÅ=0.3</span>
                                                                </div>
                                                            </div>
                                                            <div class="liability-indicator">
                                                                <p><i class="fas fa-exposure"></i> Current Total
                                                                    Exposure</p>
                                                                <div class="exposure-value" id="exposure-value">
                                                                    $1,245,670.00</div>
                                                                <div class="mini-progress" style="background: #2c3e50;">
                                                                    <div class="mini-progress-fill pulse-red"
                                                                        id="exposure-bar" style="width: 65%;"></div>
                                                                </div>
                                                                <small id="exposure-text">65% of Global Risk
                                                                    Limit</small>
                                                            </div>
                                                        </article>

                                    </section>
                                </main>

                                <!-- Footer Section -->
                                <footer class="footer">
                                    <p><strong>Advanced Sports Wagering Testing Dashboard</strong> - Licensed Operators
                                        Only</p>
                                    <p>Dashboard Generated: <span id="generate-date">Loading...</span> | Version: <span
                                            id="version">2.1.0</span> |
                                        Environment: <span id="environment">Production</span></p>
                                    <div class="legal-notice">
                                        <i class="fas fa-lock"></i> Zero-collateral operations enforced by Surgical
                                        Precision Framework.
                                        All operations monitored in real-time with < 100ms response targets. Proxy
                                            configuration uses Bun's native fetch() proxy support. </div>
                                </footer>

                                <!-- Enhanced JavaScript -->
                                <script>
                                    // Enhanced Sports Wagering Patterns Data with additional metadata
                                    const patternsData = [
                                        { id: 1, type: "Micro-Market Bet", edge: "Dynamic margin injection", ref: "Cross-book odds comparison", method: "Real-time liability analysis", risk: "Medium", perf: "<25ms", cluster: "Market Making", successRate: 99.2, volume: 12500 },
                                        { id: 2, type: "Live Cash Out", edge: "Monte Carlo simulation", ref: "Cross-book cash out quotes", method: "10k path simulations", risk: "High", perf: "150ms", cluster: "Risk Mitigation", successRate: 97.8, volume: 8900 },
                                        { id: 3, type: "Parlay Builder", edge: "Correlation matrix", ref: "Cross-book parlay odds", method: "Mathematical correlation", risk: "High", perf: "50ms", cluster: "Prop Specialization", successRate: 96.5, volume: 15600 },
                                        { id: 4, type: "Arbitrage Detection", edge: "Cross-book scraping", ref: "7+ sportsbooks", method: "Implied probability > 100%", risk: "Low", perf: "200ms", cluster: "Value Discovery", successRate: 99.8, volume: 22000 },
                                        { id: 5, type: "Smart Money Tracking", edge: "Bet cloning analysis", ref: "Reverse line movement", method: "Public vs sharp betting %", risk: "Medium", perf: "75ms", cluster: "Trend Exploitation", successRate: 98.1, volume: 18500 },
                                        { id: 6, type: "Betting Exchange", edge: "Matched betting engine", ref: "Lay/back order matching", method: "Redis sorted sets", risk: "Medium", perf: "<10ms", cluster: "Market Making", successRate: 99.5, volume: 31000 },
                                        { id: 7, type: "In-Play Suspension", edge: "Circuit breaker pattern", ref: "Market suspension status", method: "Time-based triggers", risk: "Low", perf: "5ms", cluster: "Risk Mitigation", successRate: 99.9, volume: 45000 },
                                        { id: 8, type: "Liability Ladder", edge: "Real-time exposure", ref: "User liability across books", method: "Atomic Redis updates", risk: "High", perf: "15ms", cluster: "Risk Mitigation", successRate: 98.7, volume: 27000 },
                                        { id: 9, type: "Boosted Odds Promo", edge: "Personalized pricing", ref: "User LTV comparison", method: "ML-driven pricing", risk: "Medium", perf: "30ms", cluster: "Value Discovery", successRate: 97.3, volume: 14200 },
                                        { id: 10, type: "Settlement Oracle", edge: "Multi-source verification", ref: "3-of-5 data providers", method: "Consensus algorithms", risk: "Low", perf: "100ms", cluster: "Risk Mitigation", successRate: 99.95, volume: 50000 },
                                        { id: 11, type: "Responsible Gambling", edge: "ML-driven intervention", ref: "User betting patterns", method: "Behavioral analysis", risk: "Low", perf: "20ms", cluster: "Risk Mitigation", successRate: 99.2, volume: 35000 },
                                        { id: 12, type: "Market Maker API", edge: "Two-way pricing", ref: "Embedded spread comparison", method: "Atomic quote updates", risk: "Medium", perf: "<5ms", cluster: "Market Making", successRate: 98.9, volume: 42000 },
                                        { id: 13, type: "Bet Slug Cryptography", edge: "Short hash IDs", ref: "Slug-to-bet mapping", method: "Quantum-resistant entropy", risk: "Low", perf: "10ms", cluster: "Risk Mitigation", successRate: 100, volume: 60000 },
                                        { id: 14, type: "Cross-Region Replication", edge: "CRDT synchronization", ref: "Regional bet replication", method: "Conflict-free data types", risk: "Medium", perf: "50ms", cluster: "Market Making", successRate: 98.5, volume: 28000 },
                                        { id: 15, type: "Regulatory Report", edge: "Zero-kettle anonymization", ref: "Regional compliance", method: "Differential privacy", risk: "Low", perf: "5min", cluster: "Risk Mitigation", successRate: 100, volume: 10000 },
                                        { id: 16, type: "Statistical Edge Bet", edge: "Z-score analysis", ref: "Historical database", method: "Statistical significance", risk: "Medium", perf: "45ms", cluster: "Value Discovery", successRate: 97.6, volume: 19000 },
                                        { id: 17, type: "Correlation Gap Bet", edge: "Pearson correlation", ref: "Correlated props", method: "Mathematical correlation", risk: "High", perf: "60ms", cluster: "Prop Specialization", successRate: 96.2, volume: 13500 },
                                        { id: 18, type: "Volatility Bet", edge: "GARCH modeling", ref: "Volatility forecasts", method: "Time-series analysis", risk: "High", perf: "80ms", cluster: "Trend Exploitation", successRate: 95.8, volume: 11000 },
                                        { id: 19, type: "Weather Impact Bet", edge: "Regression model", ref: "Weather forecasts", method: "Multi-source regression", risk: "Medium", perf: "100ms", cluster: "Value Discovery", successRate: 97.1, volume: 16500 },
                                        { id: 20, type: "Injury Impact Bet", edge: "Player value model", ref: "Injury reports", method: "Performance modeling", risk: "Medium", perf: "70ms", cluster: "Prop Specialization", successRate: 98.3, volume: 21000 },
                                        { id: 21, type: "Line Movement Bet", edge: "Kalman filter", ref: "Line movement data", method: "Predictive filtering", risk: "Medium", perf: "55ms", cluster: "Trend Exploitation", successRate: 97.9, volume: 23500 },
                                        { id: 22, type: "Public vs Sharp Bet", edge: "Bettor classification", ref: "Betting patterns", method: "Pattern recognition", risk: "Medium", perf: "65ms", cluster: "Trend Exploitation", successRate: 98.4, volume: 26000 },
                                        { id: 23, type: "Home/Away Edge", edge: "Historical home advantage", ref: "Team performance", method: "Historical analysis", risk: "Low", perf: "50ms", cluster: "Value Discovery", successRate: 99.1, volume: 32000 },
                                        { id: 24, type: "Time-Based Edge", edge: "Intra-game patterns", ref: "Period-specific data", method: "Time-series analysis", risk: "Medium", perf: "75ms", cluster: "Trend Exploitation", successRate: 97.5, volume: 19500 },
                                        { id: 25, type: "Player Matchup Bet", edge: "Head-to-head model", ref: "Player stats", method: "Comparative analysis", risk: "Medium", perf: "85ms", cluster: "Prop Specialization", successRate: 96.8, volume: 17500 },
                                        { id: 26, type: "Team Form Bet", edge: "Exponential decay", ref: "Recent performance", method: "Weighted averaging", risk: "Low", perf: "90ms", cluster: "Trend Exploitation", successRate: 98.7, volume: 24500 },
                                        { id: 27, type: "Advanced Parlay Builder", edge: "Monte Carlo simulation", ref: "Parlay odds", method: "Probability modeling", risk: "High", perf: "120ms", cluster: "Market Making", successRate: 95.4, volume: 12800 },
                                        { id: 28, type: "Live Odds Arbitrage", edge: "Real-time cross-book sync", ref: "Live odds", method: "500ms window analysis", risk: "Low", perf: "150ms", cluster: "Value Discovery", successRate: 99.3, volume: 29000 },
                                        { id: 29, type: "Statistical Anomaly Bet", edge: "Chi-square test", ref: "Statistical outliers", method: "Hypothesis testing", risk: "Medium", perf: "95ms", cluster: "Value Discovery", successRate: 97.2, volume: 15800 },
                                        { id: 30, type: "Machine Learning Edge", edge: "Ensemble prediction", ref: "ML models", method: "Model combination", risk: "High", perf: "110ms", cluster: "Trend Exploitation", successRate: 96.1, volume: 14900 }
                                    ];

                                    // Proxy Configuration State
                                    let proxyConfig = {
                                        active: false,
                                        url: '',
                                        authType: 'none',
                                        username: '',
                                        password: '',
                                        customHeaders: {}
                                    };

                                    // Enhanced Proxy Pool State
                                    let proxyPool = [];
                                    let proxyPoolConfig = {
                                        active: false,
                                        loadBalancing: 'round-robin',
                                        currentProxyIndex: 0,
                                        retryAttempts: 3,
                                        timeout: 5000
                                    };

                                    // WebSocket Connection State
                                    let websocketConnection = null;
                                    let websocketReconnectAttempts = 0;
                                    let maxReconnectAttempts = 5;

                                    // Enhanced Dashboard Controller with WebSocket Support
                                    class EnhancedDashboardController {
                                        constructor() {
                                            this.charts = {};
                                            this.metrics = {
                                                latency: [],
                                                users: 542,
                                                exposure: 1245670,
                                                threatLevel: 0.02,
                                                memory: 1.4,
                                                redis: 12,
                                                db: 45,
                                                uptime: 99.998
                                            };
                                            this.updateInterval = null;
                                            this.chartUpdateInterval = null;
                                            this.websocket = null;
                                        }

                                        initialize() {
                                            this.renderPatterns();
                                            this.initializeCharts();
                                            this.startRealTimeUpdates();
                                            this.animateProgressBars();
                                            this.updateTimestamps();
                                            this.startMetricSimulation();
                                        }

                                        renderPatterns(filter = 'all') {
                                            const tbody = document.getElementById('pattern-tbody');
                                            const filtered = filter === 'all' ? patternsData : patternsData.filter(p => p.cluster === filter);

                                            tbody.innerHTML = '';

                                            filtered.forEach(p => {
                                                const tr = document.createElement('tr');
                                                tr.classList.add('live-update');

                                                // Determine performance class
                                                const perfValue = parseInt(p.perf);
                                                const perfClass = (perfValue < 50 || p.perf.includes('<')) ? 'performance-good' : 'performance-warning';

                                                // Determine reliability class
                                                const reliabilityClass = p.successRate > 99 ? 'reliability-excellent' : 'reliability-good';

                                                tr.innerHTML = `
                        <td><strong>${p.id}</strong></td>
                        <td>
                            <strong>${p.type}</strong><br>
                            <small style="color:#7f8c8d; font-size: 0.85em;">${p.cluster}</small><br>
                            <small style="color:#95a5a6; font-size: 0.75em;">Vol: ${p.volume.toLocaleString()}</small>
                        </td>
                        <td>
                            ${p.edge}<br>
                            <small style="color:#3498db; font-size: 0.85em;">${p.ref}</small>
                        </td>
                        <td>${p.method}</td>
                        <td>
                            <span class="${reliabilityClass}" title="Success Rate: ${p.successRate}%">
                                ${p.risk}<br>
                                <small style="font-size: 0.75em;">${p.successRate}%</small>
                            </span>
                        </td>
                        <td class="${perfClass}" title="Performance Target: <100ms">
                            ${p.perf}
                        </td>
                        <td class="text-center">
                            <span class="pattern-status" title="Status: Implemented & Verified">
                                <i class="fas fa-check"></i>
                            </span>
                        </td>
                    `;

                                                tbody.appendChild(tr);
                                            });

                                            // Update summary metrics
                                            document.getElementById('active-patterns').textContent = filtered.length;
                                            document.getElementById('avg-perf').textContent =
                                                Math.round(filtered.reduce((sum, p) => {
                                                    const val = parseInt(p.perf) || 15;
                                                    return sum + val;
                                                }, 0) / filtered.length) + 'ms';

                                            const totalSuccess = filtered.reduce((sum, p) => sum + p.successRate, 0) / filtered.length;
                                            document.getElementById('reliability').textContent = totalSuccess.toFixed(2) + '%';
                                        }

                                        initializeCharts() {
                                            const ctx = document.getElementById('latencyChart').getContext('2d');

                                            // Create gradient for chart
                                            const gradient = ctx.createLinearGradient(0, 0, 0, 150);
                                            gradient.addColorStop(0, 'rgba(52, 152, 219, 0.4)');
                                            gradient.addColorStop(1, 'rgba(52, 152, 219, 0.05)');

                                            this.charts.latency = new Chart(ctx, {
                                                type: 'line',
                                                data: {
                                                    labels: Array(20).fill(''),
                                                    datasets: [{
                                                        label: 'P95 Latency (ms)',
                                                        data: Array(20).fill(0).map(() => 40 + Math.random() * 20),
                                                        borderColor: '#3498db',
                                                        backgroundColor: gradient,
                                                        borderWidth: 3,
                                                        fill: true,
                                                        tension: 0.4,
                                                        pointRadius: 2,
                                                        pointHoverRadius: 5,
                                                        pointBackgroundColor: '#3498db',
                                                        pointBorderColor: '#fff',
                                                        pointBorderWidth: 2
                                                    }]
                                                },
                                                options: {
                                                    responsive: true,
                                                    maintainAspectRatio: false,
                                                    plugins: {
                                                        legend: {
                                                            display: false
                                                        },
                                                        tooltip: {
                                                            mode: 'index',
                                                            intersect: false,
                                                            backgroundColor: 'rgba(44, 62, 80, 0.9)',
                                                            titleColor: '#fff',
                                                            bodyColor: '#fff',
                                                            borderColor: '#3498db',
                                                            borderWidth: 1,
                                                            padding: 10,
                                                            displayColors: false,
                                                            callbacks: {
                                                                label: function (context) {
                                                                    return 'Latency: ' + context.parsed.y.toFixed(1) + 'ms';
                                                                }
                                                            }
                                                        }
                                                    },
                                                    scales: {
                                                        y: {
                                                            beginAtZero: false,
                                                            min: 20,
                                                            max: 100,
                                                            grid: {
                                                                color: 'rgba(0, 0, 0, 0.05)',
                                                                drawBorder: false
                                                            },
                                                            ticks: {
                                                                color: '#7f8c8d',
                                                                font: { size: 10, weight: '600' }
                                                            }
                                                        },
                                                        x: {
                                                            display: false
                                                        }
                                                    },
                                                    interaction: {
                                                        mode: 'nearest',
                                                        axis: 'x',
                                                        intersect: false
                                                    },
                                                    animation: {
                                                        duration: 750,
                                                        easing: 'easeInOutQuart'
                                                    }
                                                }
                                            });
                                        }

                                        startRealTimeUpdates() {
                                            // Update every 2 seconds
                                            this.updateInterval = setInterval(() => {
                                                this.updateMetrics();
                                                this.updateChart();
                                                this.updateSecurityMetrics();
                                                this.updateInfrastructureMetrics();
                                            }, 2000);

                                            // Update every 5 seconds for slower metrics
                                            this.chartUpdateInterval = setInterval(() => {
                                                this.updateOddsEngine();
                                                this.updateExposure();
                                            }, 5000);
                                        }

                                        updateMetrics() {
                                            // Update latency
                                            const avgResp = document.getElementById('avg-response');
                                            const currentAvg = parseInt(avgResp.textContent) || 45;
                                            const newAvg = Math.max(25, Math.min(85, currentAvg + (Math.random() - 0.5) * 5));
                                            avgResp.textContent = Math.round(newAvg) + 'ms';
                                            avgResp.parentElement.classList.add('live-update');
                                            setTimeout(() => avgResp.parentElement.classList.remove('live-update'), 500);

                                            // Update requests per second
                                            const reqPerSec = document.getElementById('req-per-sec');
                                            const currentReq = parseFloat(reqPerSec.textContent) || 10.2;
                                            const newReq = Math.max(8, Math.min(15, currentReq + (Math.random() - 0.5) * 0.5));
                                            reqPerSec.textContent = newReq.toFixed(1) + 'K';
                                            reqPerSec.parentElement.classList.add('live-update');
                                            setTimeout(() => reqPerSec.parentElement.classList.remove('live-update'), 500);

                                            // Update live users
                                            const liveUsers = document.getElementById('live-users');
                                            const currentUsers = parseInt(liveUsers.textContent) || 542;
                                            const newUsers = Math.max(400, Math.min(800, currentUsers + Math.floor((Math.random() - 0.5) * 10)));
                                            liveUsers.textContent = newUsers;
                                            liveUsers.parentElement.classList.add('live-update');
                                            setTimeout(() => liveUsers.parentElement.classList.remove('live-update'), 500);

                                            // Update system health
                                            const health = document.getElementById('system-health');
                                            const healthScore = Math.random();
                                            if (healthScore > 0.95) {
                                                health.textContent = 'EXCELLENT';
                                                health.style.color = '#27ae60';
                                            } else if (healthScore > 0.8) {
                                                health.textContent = 'HEALTHY';
                                                health.style.color = '#27ae60';
                                            } else {
                                                health.textContent = 'GOOD';
                                                health.style.color = '#f39c12';
                                            }
                                        }

                                        updateChart() {
                                            if (!this.charts.latency) return;

                                            const chart = this.charts.latency;
                                            const currentData = chart.data.datasets[0].data;

                                            // Add new data point
                                            const newValue = 40 + Math.random() * 25;
                                            currentData.push(newValue);
                                            currentData.shift();

                                            chart.update('none');
                                        }

                                        updateSecurityMetrics() {
                                            const threatScore = document.getElementById('threat-score');
                                            const score = (Math.random() * 0.05).toFixed(2);
                                            threatScore.textContent = `Low (${score})`;

                                            if (score > 0.04) {
                                                threatScore.style.color = '#f39c12';
                                            } else {
                                                threatScore.style.color = '#27ae60';
                                            }
                                        }

                                        updateInfrastructureMetrics() {
                                            // Memory usage
                                            const memUsage = document.getElementById('mem-usage');
                                            const currentMem = parseFloat(memUsage.textContent) || 1.4;
                                            const newMem = Math.max(0.8, Math.min(2.5, currentMem + (Math.random() - 0.5) * 0.1));
                                            memUsage.textContent = newMem.toFixed(1) + ' GB';

                                            // Redis pool
                                            const redisDepth = document.getElementById('redis-depth');
                                            const currentRedis = parseInt(redisDepth.textContent) || 12;
                                            const newRedis = Math.max(5, Math.min(25, currentRedis + Math.floor((Math.random() - 0.5) * 2)));
                                            redisDepth.textContent = `${newRedis}/100`;

                                            // DB connections
                                            const dbConnections = document.getElementById('db-connections');
                                            const currentDB = parseInt(dbConnections.textContent) || 45;
                                            const newDB = Math.max(30, Math.min(60, currentDB + Math.floor((Math.random() - 0.5) * 3)));
                                            dbConnections.textContent = newDB;

                                            // Update uptime with slight variation
                                            const uptime = document.getElementById('global-uptime');
                                            const currentUptime = parseFloat(uptime.textContent) || 99.998;
                                            const newUptime = Math.max(99.95, Math.min(99.999, currentUptime + (Math.random() - 0.5) * 0.001));
                                            uptime.textContent = newUptime.toFixed(3) + '%';
                                        }

                                        updateOddsEngine() {
                                            // Update Kelly Criterion
                                            const kelly = document.getElementById('kelly-f');
                                            const currentF = parseFloat(kelly.textContent.split('=')[1]) || 0.5;
                                            const newF = Math.max(0.1, Math.min(0.9, currentF + (Math.random() - 0.5) * 0.05));
                                            kelly.textContent = `f=${newF.toFixed(2)}`;

                                            // Update Monte Carlo samples
                                            const monteCarlo = document.getElementById('monte-carlo');
                                            const samples = [10000, 12000, 15000, 20000];
                                            monteCarlo.textContent = samples[Math.floor(Math.random() * samples.length)].toLocaleString() + ' samples';

                                            // Update Poisson lambda
                                            const poisson = document.getElementById('poisson');
                                            const currentLambda = parseFloat(poisson.textContent.split('=')[1]) || 1.2;
                                            const newLambda = Math.max(0.8, Math.min(1.8, currentLambda + (Math.random() - 0.5) * 0.1));
                                            poisson.textContent = `Œª=${newLambda.toFixed(1)}`;

                                            // Update Elo K-factor
                                            const elo = document.getElementById('elo');
                                            const currentK = parseInt(elo.textContent.split('=')[1]) || 15;
                                            const newK = Math.max(10, Math.min(25, currentK + Math.floor((Math.random() - 0.5) * 2)));
                                            elo.textContent = `K=${newK}`;

                                            // Update Bayesian rho
                                            const bayesian = document.getElementById('bayesian');
                                            const currentRho = parseFloat(bayesian.textContent.split('=')[1]) || 0.3;
                                            const newRho = Math.max(0.1, Math.min(0.5, currentRho + (Math.random() - 0.5) * 0.05));
                                            bayesian.textContent = `œÅ=${newRho.toFixed(1)}`;
                                        }

                                        updateExposure() {
                                            const exposureValue = document.getElementById('exposure-value');
                                            const exposureBar = document.getElementById('exposure-bar');
                                            const exposureText = document.getElementById('exposure-text');

                                            // Update exposure amount
                                            const currentExposure = parseFloat(exposureValue.textContent.replace(/[$,]/g, '')) || 1245670;
                                            const newExposure = Math.max(800000, Math.min(1800000, currentExposure + (Math.random() - 0.5) * 50000));
                                            exposureValue.textContent = '$' + newExposure.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

                                            // Update bar width (percentage of $2M limit)
                                            const percentage = (newExposure / 2000000) * 100;
                                            exposureBar.style.width = percentage.toFixed(1) + '%';

                                            // Update text
                                            exposureText.textContent = `${percentage.toFixed(1)}% of Global Risk Limit`;

                                            // Change color based on severity
                                            if (percentage > 80) {
                                                exposureBar.style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
                                                exposureValue.style.color = '#e74c3c';
                                            } else if (percentage > 60) {
                                                exposureBar.style.background = 'linear-gradient(90deg, #f39c12, #e67e22)';
                                                exposureValue.style.color = '#f39c12';
                                            } else {
                                                exposureBar.style.background = 'linear-gradient(90deg, #27ae60, #229954)';
                                                exposureValue.style.color = '#27ae60';
                                            }
                                        }

                                        animateProgressBars() {
                                            // Animate main progress bar
                                            const mainProgress = document.getElementById('overall-progress');
                                            setTimeout(() => {
                                                mainProgress.style.width = '98.5%';
                                            }, 300);

                                            // Animate test progress bars
                                            const testProgress = [
                                                { id: 'unit-progress', percent: 95.2, textId: 'unit-percent' },
                                                { id: 'integration-progress', percent: 98.1, textId: 'integration-percent' },
                                                { id: 'performance-progress', percent: 97.8, textId: 'performance-percent' },
                                                { id: 'security-progress', percent: 99.5, textId: 'security-percent' }
                                            ];

                                            testProgress.forEach((test, index) => {
                                                setTimeout(() => {
                                                    const bar = document.getElementById(test.id);
                                                    const text = document.getElementById(test.textId);
                                                    bar.style.width = test.percent + '%';
                                                    text.textContent = test.percent + '%';
                                                }, 300 + (index * 150));
                                            });
                                        }

                                        updateTimestamps() {
                                            const now = new Date();

                                            // Current timestamp
                                            const timestamp = document.getElementById('current-timestamp');
                                            timestamp.textContent = `System Time: ${now.toLocaleTimeString()} | Production`;

                                            // Generate date
                                            const generateDate = document.getElementById('generate-date');
                                            generateDate.textContent = now.toLocaleDateString('en-US', {
                                                month: 'short',
                                                day: 'numeric',
                                                year: 'numeric'
                                            });

                                            // Version and environment
                                            document.getElementById('version').textContent = '2.1.0';
                                            document.getElementById('environment').textContent = 'Production';
                                        }

                                        startMetricSimulation() {
                                            // Simulate initial data population
                                            setTimeout(() => {
                                                // Set initial values
                                                document.getElementById('avg-response').textContent = '45ms';
                                                document.getElementById('req-per-sec').textContent = '10.2K';
                                                document.getElementById('live-users').textContent = '542';
                                                document.getElementById('mem-usage').textContent = '1.4 GB';
                                                document.getElementById('redis-depth').textContent = '12/100';
                                                document.getElementById('db-connections').textContent = '45';
                                            }, 500);
                                        }

                                        destroy() {
                                            // Clean up intervals
                                            if (this.updateInterval) clearInterval(this.updateInterval);
                                            if (this.chartUpdateInterval) clearInterval(this.chartUpdateInterval);

                                            // Destroy charts
                                            if (this.charts.latency) {
                                                this.charts.latency.destroy();
                                            }
                                        }
                                    }

                                    // Proxy Configuration Functions
                                    function configureProxy() {
                                        const url = document.getElementById('proxy-url').value;
                                        const authType = document.getElementById('proxy-auth-type').value;
                                        const username = document.getElementById('proxy-username').value;
                                        const password = document.getElementById('proxy-password').value;
                                        const headerName = document.getElementById('proxy-header-name').value;
                                        const headerValue = document.getElementById('proxy-header-value').value;

                                        if (!url) {
                                            addProxyStatus('‚ùå Error: Proxy URL is required', 'error-line');
                                            return;
                                        }

                                        // Build proxy configuration
                                        proxyConfig.url = url;
                                        proxyConfig.authType = authType;
                                        proxyConfig.username = username;
                                        proxyConfig.password = password;
                                        proxyConfig.customHeaders = {};

                                        if (headerName && headerValue) {
                                            proxyConfig.customHeaders[headerName] = headerValue;
                                        }

                                        // Generate Bun fetch() configuration
                                        let configCode = '';

                                        if (authType === 'none' && Object.keys(proxyConfig.customHeaders).length === 0) {
                                            configCode = `await fetch("https://api.example.com", {
  proxy: "${url}"
});`;
                                        } else if (authType === 'basic' && username && password) {
                                            const auth = btoa(`${username}:${password}`);
                                            configCode = `await fetch("https://api.example.com", {
  proxy: {
    url: "${url}",
    headers: {
      "Proxy-Authorization": "Basic ${auth}"
    }
  }
});`;
                                        } else if (authType === 'bearer' && password) {
                                            configCode = `await fetch("https://api.example.com", {
  proxy: {
    url: "${url}",
    headers: {
      "Proxy-Authorization": "Bearer ${password}"
    }
  }
});`;
                                        } else if (authType === 'custom' && headerName && headerValue) {
                                            configCode = `await fetch("https://api.example.com", {
  proxy: {
    url: "${url}",
    headers: {
      "${headerName}": "${headerValue}"
    }
  }
});`;
                                        } else {
                                            configCode = `await fetch("https://api.example.com", {
  proxy: "${url}"
});`;
                                        }

                                        addProxyStatus('‚úÖ Proxy configured successfully', 'success-line');
                                        addProxyStatus('Configuration:', 'info-line');
                                        addProxyStatus(`  URL: ${url}`, 'info-line');
                                        addProxyStatus(`  Auth: ${authType}`, 'info-line');

                                        if (Object.keys(proxyConfig.customHeaders).length > 0) {
                                            addProxyStatus('  Custom Headers:', 'info-line');
                                            for (const [key, value] of Object.entries(proxyConfig.customHeaders)) {
                                                addProxyStatus(`    ${key}: ${value}`, 'info-line');
                                            }
                                        }

                                        addProxyStatus('Bun fetch() code:', 'info-line');
                                        configCode.split('\n').forEach(line => {
                                            addProxyStatus(`  ${line}`, 'info-line');
                                        });

                                        // Update proxy status display
                                        updateProxyStatusDisplay();
                                    }

                                    async function testProxyConnection() {
                                        if (!proxyConfig.url) {
                                            addProxyStatus('‚ùå Error: Configure proxy first', 'error-line');
                                            return;
                                        }

                                        addProxyStatus('üîÑ Testing proxy connection...', 'info-line');

                                        try {
                                            // Call server API for proxy testing
                                            const response = await fetch('/api/proxy-test', {
                                                method: 'POST',
                                                headers: {
                                                    'Content-Type': 'application/json',
                                                },
                                                body: JSON.stringify({
                                                    url: proxyConfig.url,
                                                    authType: proxyConfig.authType,
                                                    username: proxyConfig.username,
                                                    password: proxyConfig.password,
                                                    customHeaders: proxyConfig.customHeaders
                                                })
                                            });

                                            const result = await response.json();

                                            if (result.success) {
                                                addProxyStatus('‚úÖ Proxy connection successful', 'success-line');
                                                addProxyStatus(`Response time: ${result.responseTime}ms`, 'success-line');
                                                addProxyStatus(`Status: ${result.status} OK`, 'success-line');

                                                // Update API response time metric
                                                const apiResponseTime = document.getElementById('api-response-time');
                                                if (apiResponseTime) {
                                                    apiResponseTime.textContent = `${result.responseTime}ms`;
                                                    apiResponseTime.style.color = '#27ae60';
                                                }
                                            } else {
                                                addProxyStatus('‚ùå Proxy connection failed', 'error-line');
                                                addProxyStatus(`Error: ${result.message}`, 'error-line');
                                                if (result.error) {
                                                    addProxyStatus(`Details: ${result.error}`, 'error-line');
                                                }
                                            }
                                        } catch (error) {
                                            addProxyStatus('‚ùå Network error', 'error-line');
                                            addProxyStatus(`Error: ${error.message}`, 'error-line');
                                        }
                                    }

                                    function toggleProxy() {
                                        proxyConfig.active = !proxyConfig.active;

                                        if (proxyConfig.active) {
                                            addProxyStatus('‚úÖ Proxy activated', 'success-line');
                                            addProxyStatus('All fetch() requests will route through proxy', 'info-line');
                                        } else {
                                            addProxyStatus('‚è∏Ô∏è Proxy deactivated', 'info-line');
                                            addProxyStatus('Direct connections will be used', 'info-line');
                                        }

                                        updateProxyStatusDisplay();
                                    }

                                    function clearProxyConfig() {
                                        proxyConfig = {
                                            active: false,
                                            url: '',
                                            authType: 'none',
                                            username: '',
                                            password: '',
                                            customHeaders: {}
                                        };

                                        // Clear form fields
                                        document.getElementById('proxy-url').value = '';
                                        document.getElementById('proxy-auth-type').value = 'none';
                                        document.getElementById('proxy-username').value = '';
                                        document.getElementById('proxy-password').value = '';
                                        document.getElementById('proxy-header-name').value = '';
                                        document.getElementById('proxy-header-value').value = '';

                                        // Clear status
                                        const statusDiv = document.getElementById('proxy-status');
                                        statusDiv.innerHTML = '<div class="info-line">> Proxy configuration cleared</div><div class="info-line">> Ready for new configuration</div>';

                                        addProxyStatus('üóëÔ∏è Proxy configuration cleared', 'info-line');
                                    }

                                    function addProxyStatus(message, className) {
                                        const statusDiv = document.getElementById('proxy-status');
                                        const line = document.createElement('div');
                                        line.className = className;
                                        line.textContent = message;
                                        statusDiv.appendChild(line);
                                        statusDiv.scrollTop = statusDiv.scrollHeight;
                                    }

                                    function updateProxyStatusDisplay() {
                                        // This would update any visual indicators on the dashboard
                                        // For now, we'll just log to the status console
                                        if (proxyConfig.active && proxyConfig.url) {
                                            addProxyStatus(`‚ÑπÔ∏è Current active proxy: ${proxyConfig.url}`, 'info-line');
                                        }
                                    }

                                    // Initialize Dashboard
                                    document.addEventListener('DOMContentLoaded', function () {
                                        const dashboard = new EnhancedDashboardController();

                                        // Set up event listeners
                                        const clusterFilter = document.getElementById('pattern-cluster-filter');
                                        clusterFilter.addEventListener('change', (e) => {
                                            dashboard.renderPatterns(e.target.value);
                                        });

                                        // Initialize dashboard
                                        dashboard.initialize();

                                        // Enhanced real-time updates with server API
                                        async function fetchServerMetrics() {
                                            try {
                                                const response = await fetch('/api/metrics');
                                                if (response.ok) {
                                                    const metrics = await response.json();

                                                    // Update dashboard metrics from server
                                                    document.getElementById('avg-response').textContent = `${metrics.latency}ms`;
                                                    document.getElementById('req-per-sec').textContent = `${metrics.throughput}K`;
                                                    document.getElementById('live-users').textContent = metrics.activeUsers;
                                                    document.getElementById('system-health').textContent = metrics.systemHealth;
                                                    document.getElementById('global-uptime').textContent = `${metrics.uptime}%`;
                                                    document.getElementById('mem-usage').textContent = `${metrics.memory} GB`;
                                                    document.getElementById('threat-score').textContent = `Low (${metrics.threatLevel})`;

                                                    // Update exposure if it exists
                                                    const exposureValue = document.getElementById('exposure-value');
                                                    if (exposureValue) {
                                                        const exposure = metrics.exposure;
                                                        exposureValue.textContent = '$' + exposure.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

                                                        // Update exposure bar
                                                        const percentage = (exposure / 2000000) * 100;
                                                        const exposureBar = document.getElementById('exposure-bar');
                                                        const exposureText = document.getElementById('exposure-text');

                                                        if (exposureBar && exposureText) {
                                                            exposureBar.style.width = percentage.toFixed(1) + '%';
                                                            exposureText.textContent = `${percentage.toFixed(1)}% of Global Risk Limit`;

                                                            // Color coding
                                                            if (percentage > 80) {
                                                                exposureBar.style.background = 'linear-gradient(90deg, #e74c3c, #c0392b)';
                                                                exposureValue.style.color = '#e74c3c';
                                                            } else if (percentage > 60) {
                                                                exposureBar.style.background = 'linear-gradient(90deg, #f39c12, #e67e22)';
                                                                exposureValue.style.color = '#f39c12';
                                                            } else {
                                                                exposureBar.style.background = 'linear-gradient(90deg, #27ae60, #229954)';
                                                                exposureValue.style.color = '#27ae60';
                                                            }
                                                        }
                                                    }
                                                }
                                            } catch (error) {
                                                console.warn('Server metrics fetch failed, using local simulation:', error);
                                            }
                                        }

                                        // Replace local updates with server API integration
                                        const originalStartRealTimeUpdates = dashboard.startRealTimeUpdates.bind(dashboard);
                                        dashboard.startRealTimeUpdates = function () {
                                            // Update every 2 seconds with server data
                                            this.updateInterval = setInterval(() => {
                                                this.updateChart();
                                                this.updateSecurityMetrics();
                                                fetchServerMetrics();
                                            }, 2000);

                                            // Update odds engine every 5 seconds
                                            this.chartUpdateInterval = setInterval(() => {
                                                this.updateOddsEngine();
                                            }, 5000);
                                        };

                                        // Handle page visibility changes to pause/resume updates
                                        document.addEventListener('visibilitychange', function () {
                                            if (document.hidden) {
                                                // Page is hidden, pause updates
                                                if (dashboard.updateInterval) {
                                                    clearInterval(dashboard.updateInterval);
                                                    dashboard.updateInterval = null;
                                                }
                                                if (dashboard.chartUpdateInterval) {
                                                    clearInterval(dashboard.chartUpdateInterval);
                                                    dashboard.chartUpdateInterval = null;
                                                }
                                            } else {
                                                // Page is visible, resume updates
                                                if (!dashboard.updateInterval) {
                                                    dashboard.startRealTimeUpdates();
                                                }
                                            }
                                        });

                                        // Cleanup on page unload
                                        window.addEventListener('beforeunload', function () {
                                            dashboard.destroy();
                                        });

                                        // Enhanced Proxy Pool Functions
                                        function addProxyToPool() {
                                            const url = document.getElementById('proxy-url').value;
                                            const authType = document.getElementById('proxy-auth-type').value;
                                            const username = document.getElementById('proxy-username').value;
                                            const password = document.getElementById('proxy-password').value;
                                            const headerName = document.getElementById('proxy-header-name').value;
                                            const headerValue = document.getElementById('proxy-header-value').value;

                                            if (!url) {
                                                addProxyStatus('‚ùå Error: Proxy URL is required', 'error-line');
                                                return;
                                            }

                                            const proxy = {
                                                id: Date.now(),
                                                url: url,
                                                authType: authType,
                                                username: username,
                                                password: password,
                                                customHeaders: headerName && headerValue ? { [headerName]: headerValue } : {},
                                                latency: null,
                                                successRate: null,
                                                active: false,
                                                lastTested: null
                                            };

                                            proxyPool.push(proxy);
                                            saveProxyPool();
                                            dashboard.updateProxyPoolUI();
                                            addProxyStatus(`‚úÖ Proxy added to pool: ${url}`, 'success-line');

                                            // Clear form
                                            document.getElementById('proxy-url').value = '';
                                            document.getElementById('proxy-auth-type').value = 'none';
                                            document.getElementById('proxy-username').value = '';
                                            document.getElementById('proxy-password').value = '';
                                            document.getElementById('proxy-header-name').value = '';
                                            document.getElementById('proxy-header-value').value = '';
                                        }

                                        function removeProxy(index) {
                                            const proxy = proxyPool[index];
                                            proxyPool.splice(index, 1);
                                            saveProxyPool();
                                            dashboard.updateProxyPoolUI();
                                            addProxyStatus(`üóëÔ∏è Proxy removed: ${proxy.url}`, 'info-line');
                                        }

                                        async function testSingleProxy(index) {
                                            const proxy = proxyPool[index];
                                            addProxyStatus(`üîÑ Testing proxy: ${proxy.url}...`, 'info-line');

                                            try {
                                                const startTime = Date.now();
                                                const response = await fetch('/api/proxy-test', {
                                                    method: 'POST',
                                                    headers: { 'Content-Type': 'application/json' },
                                                    body: JSON.stringify(proxy)
                                                });

                                                const endTime = Date.now();
                                                const result = await response.json();

                                                if (result.success) {
                                                    proxy.latency = endTime - startTime;
                                                    proxy.successRate = 100;
                                                    proxy.lastTested = new Date().toISOString();
                                                    addProxyStatus(`‚úÖ Proxy test successful: ${proxy.latency}ms`, 'success-line');
                                                } else {
                                                    proxy.successRate = 0;
                                                    proxy.lastTested = new Date().toISOString();
                                                    addProxyStatus(`‚ùå Proxy test failed: ${result.message}`, 'error-line');
                                                }

                                                saveProxyPool();
                                                dashboard.updateProxyPoolUI();
                                            } catch (error) {
                                                addProxyStatus(`‚ùå Proxy test error: ${error.message}`, 'error-line');
                                            }
                                        }

                                        async function testAllProxies() {
                                            if (proxyPool.length === 0) {
                                                addProxyStatus('‚ùå No proxies in pool to test', 'error-line');
                                                return;
                                            }

                                            addProxyStatus('üîÑ Testing all proxies in pool...', 'info-line');

                                            for (let i = 0; i < proxyPool.length; i++) {
                                                await testSingleProxy(i);
                                                await new Promise(resolve => setTimeout(resolve, 500)); // Brief delay between tests
                                            }

                                            addProxyStatus('‚úÖ All proxy tests completed', 'success-line');
                                        }

                                        function toggleProxyPool() {
                                            proxyPoolConfig.active = !proxyPoolConfig.active;
                                            saveProxyPoolConfig();

                                            if (proxyPoolConfig.active) {
                                                addProxyStatus('‚úÖ Proxy pool activated', 'success-line');
                                                addProxyStatus('Load balancing strategy: ' + proxyPoolConfig.loadBalancing, 'info-line');
                                            } else {
                                                addProxyStatus('‚è∏Ô∏è Proxy pool deactivated', 'info-line');
                                            }
                                        }

                                        function saveProxyPool() {
                                            localStorage.setItem('proxyPool', JSON.stringify(proxyPool));
                                        }

                                        function saveProxyPoolConfig() {
                                            localStorage.setItem('proxyPoolConfig', JSON.stringify(proxyPoolConfig));
                                        }

                                        // Enhanced Pattern Filtering Functions
                                        function applyFilters() {
                                            const clusterFilter = document.getElementById('pattern-cluster-filter').value;
                                            const riskFilter = document.getElementById('risk-filter').value;
                                            const performanceFilter = document.getElementById('performance-filter').value;
                                            const searchTerm = document.getElementById('pattern-search').value.toLowerCase();

                                            let filtered = patternsData;

                                            // Apply cluster filter
                                            if (clusterFilter !== 'all') {
                                                filtered = filtered.filter(p => p.cluster === clusterFilter);
                                            }

                                            // Apply risk filter
                                            if (riskFilter !== 'all') {
                                                filtered = filtered.filter(p => p.risk === riskFilter);
                                            }

                                            // Apply performance filter
                                            if (performanceFilter !== 'all') {
                                                filtered = filtered.filter(p => {
                                                    const perfValue = parseInt(p.perf) || 0;
                                                    if (performanceFilter === 'fast') return perfValue < 50 || p.perf.includes('<');
                                                    if (performanceFilter === 'medium') return perfValue >= 50 && perfValue <= 100;
                                                    if (performanceFilter === 'slow') return perfValue > 100;
                                                    return true;
                                                });
                                            }

                                            // Apply search filter
                                            if (searchTerm) {
                                                filtered = filtered.filter(p =>
                                                    p.type.toLowerCase().includes(searchTerm) ||
                                                    p.edge.toLowerCase().includes(searchTerm) ||
                                                    p.method.toLowerCase().includes(searchTerm) ||
                                                    p.cluster.toLowerCase().includes(searchTerm)
                                                );
                                            }

                                            dashboard.renderFilteredPatterns(filtered);
                                        }

                                        function resetFilters() {
                                            document.getElementById('pattern-cluster-filter').value = 'all';
                                            document.getElementById('risk-filter').value = 'all';
                                            document.getElementById('performance-filter').value = 'all';
                                            document.getElementById('pattern-search').value = '';

                                            dashboard.renderPatterns();
                                        }

                                        // Export Functions
                                        function exportDashboardData() {
                                            const data = {
                                                timestamp: new Date().toISOString(),
                                                metrics: dashboard.metrics,
                                                patterns: patternsData,
                                                proxyPool: proxyPool,
                                                proxyConfig: proxyPoolConfig
                                            };

                                            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                                            const url = URL.createObjectURL(blob);
                                            const a = document.createElement('a');
                                            a.href = url;
                                            a.download = `wagering-dashboard-export-${new Date().toISOString().split('T')[0]}.json`;
                                            document.body.appendChild(a);
                                            a.click();
                                            document.body.removeChild(a);
                                            URL.revokeObjectURL(url);

                                            addProxyStatus('üìä Dashboard data exported successfully', 'success-line');
                                        }

                                        function exportProxyConfig() {
                                            const config = {
                                                proxyPool: proxyPool,
                                                proxyPoolConfig: proxyPoolConfig,
                                                timestamp: new Date().toISOString()
                                            };

                                            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
                                            const url = URL.createObjectURL(blob);
                                            const a = document.createElement('a');
                                            a.href = url;
                                            a.download = `proxy-config-${new Date().toISOString().split('T')[0]}.json`;
                                            document.body.appendChild(a);
                                            a.click();
                                            document.body.removeChild(a);
                                            URL.revokeObjectURL(url);

                                            addProxyStatus('‚öôÔ∏è Proxy configuration exported successfully', 'success-line');
                                        }

                                        // Load balancing event listeners
                                        document.querySelectorAll('input[name="load-balancing"]').forEach(radio => {
                                            radio.addEventListener('change', (e) => {
                                                proxyPoolConfig.loadBalancing = e.target.value;
                                                saveProxyPoolConfig();
                                                addProxyStatus(`üîÑ Load balancing changed to: ${e.target.value}`, 'info-line');
                                            });
                                        });

                                    });
                                </script>
                            </body>

</html>
