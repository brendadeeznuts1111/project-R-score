name: Validate Syntax Colors

on:
  push:
    paths:
      - '**/*.toml'
      - '**/colors.schema.json'
      - 'scripts/colors-lint.ts'
  pull_request:
    paths:
      - '**/*.toml'
      - '**/colors.schema.json'
      - 'scripts/colors-lint.ts'

jobs:
  lint-colors:
    name: Lint TOML Color Configs
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Bun
        uses: oven-sh/setup-bun@v2
        with:
          bun-version: latest

      - name: Install dependencies
        run: bun install --frozen-lockfile

      - name: Run colors lint
        run: bun scripts/colors-lint.ts --verbose

      - name: Schema validation summary
        if: always()
        run: |
          echo "## TOML Colors Validation" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          if [ $? -eq 0 ]; then
            echo "✅ All color TOML files are valid" >> $GITHUB_STEP_SUMMARY
          else
            echo "❌ Validation failed - check logs" >> $GITHUB_STEP_SUMMARY
          fi
