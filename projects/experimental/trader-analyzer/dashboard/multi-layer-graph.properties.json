{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Multi-Layer Graph Dashboard Properties",
  "description": "Complete property mapping and configuration for dashboard/multi-layer-graph.html",
  "type": "object",
  "properties": {
    "dashboard": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "value": "Multi-Layer Correlation Graph - Developer Dashboard",
          "description": "Dashboard display name"
        },
        "version": {
          "type": "string",
          "value": "1.0.0",
          "description": "Dashboard version"
        },
        "apiBase": {
          "type": "string",
          "default": "http://localhost:3000",
          "description": "Base URL for API requests"
        },
        "autoRefreshInterval": {
          "type": "number",
          "default": 5000,
          "description": "Auto-refresh interval in milliseconds"
        }
      }
    },
    "layers": {
      "type": "object",
      "properties": {
        "1": {
          "type": "object",
          "properties": {
            "name": { "type": "string", "value": "Layer 1: Direct" },
            "color": { "type": "string", "value": "#FF6B6B" },
            "description": { "type": "string", "value": "Direct market correlations" },
            "enabled": { "type": "boolean", "default": true }
          }
        },
        "2": {
          "type": "object",
          "properties": {
            "name": { "type": "string", "value": "Layer 2: Cross-Market" },
            "color": { "type": "string", "value": "#4ECDC4" },
            "description": { "type": "string", "value": "Cross-market correlations" },
            "enabled": { "type": "boolean", "default": true }
          }
        },
        "3": {
          "type": "object",
          "properties": {
            "name": { "type": "string", "value": "Layer 3: Cross-Event" },
            "color": { "type": "string", "value": "#45B7D1" },
            "description": { "type": "string", "value": "Cross-event correlations" },
            "enabled": { "type": "boolean", "default": true }
          }
        },
        "4": {
          "type": "object",
          "properties": {
            "name": { "type": "string", "value": "Layer 4: Cross-Sport" },
            "color": { "type": "string", "value": "#96CEB4" },
            "description": { "type": "string", "value": "Cross-sport correlations" },
            "enabled": { "type": "boolean", "default": true }
          }
        }
      }
    },
    "apiEndpoints": {
      "type": "object",
      "properties": {
        "mcpHealth": {
          "type": "string",
          "value": "/api/v17/mcp/health",
          "method": "GET",
          "description": "MCP server health check endpoint"
        },
        "buildGraph": {
          "type": "string",
          "value": "/api/mcp/tools/research-build-multi-layer-graph",
          "method": "POST",
          "description": "Build multi-layer graph tool endpoint"
        },
        "generateVisualization": {
          "type": "string",
          "value": "/api/mcp/tools/research-generate-visualization",
          "method": "POST",
          "description": "Generate graph visualization endpoint"
        },
        "connectionPools": {
          "type": "string",
          "value": "/api/v17/monitoring/connection-pools",
          "method": "GET",
          "description": "Connection pool statistics endpoint (future)"
        }
      }
    },
    "ui": {
      "type": "object",
      "properties": {
        "sidebar": {
          "type": "object",
          "properties": {
            "width": { "type": "number", "value": 320, "unit": "px" },
            "sections": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["Event Configuration", "Layer Filters", "Confidence Filter", "Statistics", "System Status", "Export", "Developer Tools"]
              }
            }
          }
        },
        "graph": {
          "type": "object",
          "properties": {
            "nodeSize": { "type": "number", "default": 16 },
            "edgeWidth": { "type": "number", "default": 2 },
            "physicsEnabled": { "type": "boolean", "default": true },
            "stabilizationIterations": { "type": "number", "default": 200 }
          }
        },
        "colors": {
          "type": "object",
          "properties": {
            "background": { "type": "string", "value": "#0a0e27" },
            "sidebar": { "type": "string", "value": "#1a1f3a" },
            "header": { "type": "string", "value": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)" },
            "text": { "type": "string", "value": "#e0e0e0" },
            "textSecondary": { "type": "string", "value": "#9ca3af" },
            "accent": { "type": "string", "value": "#667eea" },
            "accentSecondary": { "type": "string", "value": "#00d4ff" }
          }
        }
      }
    },
    "features": {
      "type": "object",
      "properties": {
        "graphVisualization": {
          "type": "boolean",
          "value": true,
          "description": "vis-network graph visualization"
        },
        "layerFiltering": {
          "type": "boolean",
          "value": true,
          "description": "Filter graph by correlation layers"
        },
        "confidenceFiltering": {
          "type": "boolean",
          "value": true,
          "description": "Filter edges by confidence threshold"
        },
        "streaming": {
          "type": "boolean",
          "value": true,
          "description": "Real-time graph updates via polling"
        },
        "export": {
          "type": "boolean",
          "value": true,
          "description": "Export graph as JSON or GraphML"
        },
        "systemStatus": {
          "type": "boolean",
          "value": true,
          "description": "System status monitoring"
        },
        "connectionPoolMonitoring": {
          "type": "boolean",
          "value": true,
          "description": "Connection pool statistics display"
        },
        "developerDashboardLink": {
          "type": "boolean",
          "value": true,
          "description": "Link to developer dashboard"
        }
      }
    },
    "state": {
      "type": "object",
      "properties": {
        "network": {
          "type": "object",
          "description": "vis.Network instance",
          "nullable": true
        },
        "nodes": {
          "type": "object",
          "description": "vis.DataSet<GraphNode>",
          "nullable": false
        },
        "edges": {
          "type": "object",
          "description": "vis.DataSet<GraphEdge>",
          "nullable": false
        },
        "currentGraphData": {
          "type": "object",
          "description": "Current graph visualization data",
          "nullable": true
        },
        "streamingInterval": {
          "type": ["number", "null"],
          "description": "Streaming interval ID",
          "nullable": true
        },
        "isStreaming": {
          "type": "boolean",
          "default": false,
          "description": "Whether graph is currently streaming"
        },
        "csrfToken": {
          "type": ["string", "null"],
          "description": "CSRF token for API requests",
          "nullable": true
        }
      }
    },
    "functions": {
      "type": "object",
      "properties": {
        "initNetwork": {
          "type": "function",
          "description": "Initialize vis-network graph visualization",
          "parameters": [],
          "returns": "void"
        },
        "loadGraph": {
          "type": "function",
          "description": "Load graph data from API",
          "parameters": [],
          "returns": "Promise<void>"
        },
        "renderGraph": {
          "type": "function",
          "description": "Render graph visualization",
          "parameters": [
            { "name": "data", "type": "GraphVisualizationData" }
          ],
          "returns": "void"
        },
        "startStreaming": {
          "type": "function",
          "description": "Start real-time graph updates",
          "parameters": [],
          "returns": "void"
        },
        "stopStreaming": {
          "type": "function",
          "description": "Stop real-time graph updates",
          "parameters": [],
          "returns": "void"
        },
        "exportJSON": {
          "type": "function",
          "description": "Export graph as JSON",
          "parameters": [],
          "returns": "void"
        },
        "exportGraphML": {
          "type": "function",
          "description": "Export graph as GraphML",
          "parameters": [],
          "returns": "Promise<void>"
        },
        "refreshSystemStatus": {
          "type": "function",
          "description": "Refresh system status (router health, connection pool)",
          "parameters": [],
          "returns": "Promise<void>"
        },
        "showConnectionPoolStats": {
          "type": "function",
          "description": "Display connection pool statistics panel",
          "parameters": [],
          "returns": "Promise<void>"
        },
        "hideConnectionPoolStats": {
          "type": "function",
          "description": "Hide connection pool statistics panel",
          "parameters": [],
          "returns": "void"
        },
        "showNodeInfo": {
          "type": "function",
          "description": "Display node information panel",
          "parameters": [
            { "name": "nodeId", "type": "string" }
          ],
          "returns": "void"
        },
        "showEdgeInfo": {
          "type": "function",
          "description": "Display edge information panel",
          "parameters": [
            { "name": "edgeId", "type": "string" }
          ],
          "returns": "void"
        },
        "updateStatus": {
          "type": "function",
          "description": "Update connection status indicator",
          "parameters": [
            { "name": "text", "type": "string" },
            { "name": "connected", "type": "boolean" }
          ],
          "returns": "void"
        },
        "showLoading": {
          "type": "function",
          "description": "Show/hide loading overlay",
          "parameters": [
            { "name": "show", "type": "boolean" }
          ],
          "returns": "void"
        },
        "showToast": {
          "type": "function",
          "description": "Display toast notification",
          "parameters": [
            { "name": "message", "type": "string" }
          ],
          "returns": "void"
        }
      }
    },
    "domElements": {
      "type": "object",
      "properties": {
        "eventId": {
          "type": "string",
          "selector": "#eventId",
          "type": "HTMLInputElement",
          "description": "Event ID input field"
        },
        "confidenceSlider": {
          "type": "string",
          "selector": "#confidenceSlider",
          "type": "HTMLInputElement",
          "description": "Confidence threshold slider"
        },
        "layerFilters": {
          "type": "string",
          "selector": "#layerFilters",
          "type": "HTMLElement",
          "description": "Layer filter container"
        },
        "graphNetwork": {
          "type": "string",
          "selector": "#graph-network",
          "type": "HTMLElement",
          "description": "Graph visualization container"
        },
        "infoPanel": {
          "type": "string",
          "selector": "#infoPanel",
          "type": "HTMLElement",
          "description": "Node/edge info panel"
        },
        "connectionPoolPanel": {
          "type": "string",
          "selector": "#connectionPoolPanel",
          "type": "HTMLElement",
          "description": "Connection pool statistics panel"
        },
        "routerStatus": {
          "type": "string",
          "selector": "#routerStatus",
          "type": "HTMLElement",
          "description": "Router status display"
        },
        "connectionPoolStatus": {
          "type": "string",
          "selector": "#connectionPoolStatus",
          "type": "HTMLElement",
          "description": "Connection pool status display"
        },
        "totalNodes": {
          "type": "string",
          "selector": "#totalNodes",
          "type": "HTMLElement",
          "description": "Total nodes statistic"
        },
        "totalEdges": {
          "type": "string",
          "selector": "#totalEdges",
          "type": "HTMLElement",
          "description": "Total edges statistic"
        },
        "totalAnomalies": {
          "type": "string",
          "selector": "#totalAnomalies",
          "type": "HTMLElement",
          "description": "Total anomalies statistic"
        },
        "avgConfidence": {
          "type": "string",
          "selector": "#avgConfidence",
          "type": "HTMLElement",
          "description": "Average confidence statistic"
        }
      }
    },
    "events": {
      "type": "object",
      "properties": {
        "networkClick": {
          "type": "string",
          "value": "click",
          "description": "Network click event"
        },
        "networkHoverNode": {
          "type": "string",
          "value": "hoverNode",
          "description": "Network node hover event"
        },
        "networkBlurNode": {
          "type": "string",
          "value": "blurNode",
          "description": "Network node blur event"
        },
        "confidenceSliderInput": {
          "type": "string",
          "value": "input",
          "description": "Confidence slider input event"
        },
        "layerFilterChange": {
          "type": "string",
          "value": "change",
          "description": "Layer filter checkbox change event"
        },
        "windowLoad": {
          "type": "string",
          "value": "load",
          "description": "Window load event"
        }
      }
    },
    "dependencies": {
      "type": "object",
      "properties": {
        "visNetwork": {
          "type": "object",
          "properties": {
            "name": { "type": "string", "value": "vis-network" },
            "version": { "type": "string", "value": "latest" },
            "cdn": { "type": "string", "value": "https://unpkg.com/vis-network@latest/dist/vis-network.min.js" },
            "description": { "type": "string", "value": "Network visualization library" }
          }
        }
      }
    },
    "integration": {
      "type": "object",
      "properties": {
        "marketDataRouter17": {
          "type": "boolean",
          "value": true,
          "description": "Integration with MarketDataRouter17"
        },
        "mcpHealth": {
          "type": "boolean",
          "value": true,
          "description": "MCP health check integration"
        },
        "connectionPoolMonitoring": {
          "type": "boolean",
          "value": true,
          "description": "Connection pool monitoring integration"
        },
        "developerDashboard": {
          "type": "boolean",
          "value": true,
          "description": "Link to developer dashboard"
        }
      }
    }
  }
}
