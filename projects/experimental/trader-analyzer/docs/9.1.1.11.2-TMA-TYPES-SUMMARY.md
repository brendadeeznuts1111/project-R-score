# Telegram Mini App (TMA) Types Summary

**Version**: 9.1.1.11.2.0.0.0  
**Component**: TMA Type Definitions  
**Status**: ✅ Complete

---

## Overview

All Telegram Mini App (TMA) TypeScript interfaces have been created and updated with comprehensive versioning metadata, following the hierarchical versioning system (9.1.1.11.2.x.x.x.x.x).

---

## Types Defined (15 total)

### Trading Dashboard Types

#### 1. TMATradingDashboardData
- **Version**: `9.1.1.11.2.1.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Real-time trading dashboard data structure
- **Properties**:
  - `live_pnl_usd` (9.1.1.11.2.1.0.1) - Current aggregated P&L
  - `available_capital_usd` (9.1.1.11.2.1.0.2) - Total capital available
  - `open_positions_count` (9.1.1.11.2.1.0.3) - Number of active positions
  - `active_opportunities` (9.1.1.11.2.1.0.4) - List of opportunities

#### 2. TMAOpportunitySummary
- **Version**: `9.1.1.11.2.1.1.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Summary of trading opportunities
- **Properties**: 6 properties with versioning

---

### Balance & Liquidity Types

#### 3. TMABalanceOverview
- **Version**: `9.1.1.11.2.2.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Aggregated balance overview across bookmakers
- **Properties**: 2 properties with versioning

#### 4. TMABookmakerBalance
- **Version**: `9.1.1.11.2.2.0.3.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Detailed balance for a single bookmaker
- **Properties**: 4 properties with versioning

---

### Alert Management Types

#### 5. TMAAlertSummary
- **Version**: `9.1.1.11.2.3.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Alert summary with filtering and acknowledgment
- **Properties**: 7 properties with versioning
- **Status**: ✅ NEW - Added per user specification

#### 6. TMAAlertActionRequest
- **Version**: `9.1.1.11.2.3.3.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Request for acknowledging/dismissing alerts
- **Properties**: 3 properties with versioning
- **Status**: ✅ NEW - Added per user specification

#### 7. TMAAlertListResponse
- **Version**: `9.1.1.11.2.3.0.0.0` (legacy)
- **File**: `src/types/tma.ts`
- **Purpose**: Legacy alert list response format
- **Status**: Kept for backward compatibility

---

### Data Visualization Types

#### 8. TMAGraphData
- **Version**: `9.1.1.11.2.4.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Interactive graph data structure
- **Properties**: 5 properties with versioning

#### 9. TMAGraphSeries
- **Version**: `9.1.1.11.2.4.0.6.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Data series for graphs
- **Properties**: 3 properties with versioning

#### 10. TMAGraphOptions
- **Version**: `9.1.1.11.2.4.0.7.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Display options for graphs
- **Properties**: 4 properties with versioning

---

### Trading Execution Types

#### 11. TMATradeOrderRequest
- **Version**: `9.1.1.11.2.5.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Request for placing bets directly from TMA
- **Properties**: 9 properties with versioning
- **Status**: ✅ NEW - Added per user specification (replaces TMATradeExecutionRequest)

#### 12. TMATradeOrderResponse
- **Version**: `9.1.1.11.2.5.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Response for trade order requests
- **Properties**: 6 properties with versioning
- **Status**: ✅ NEW - Added per user specification (replaces TMATradeExecutionResponse)

#### 13. TMATradeExecutionRequest
- **Version**: Legacy (deprecated)
- **File**: `src/types/tma.ts`
- **Status**: ⚠️ Deprecated - Use TMATradeOrderRequest instead

#### 14. TMATradeExecutionResponse
- **Version**: Legacy (deprecated)
- **File**: `src/types/tma.ts`
- **Status**: ⚠️ Deprecated - Use TMATradeOrderResponse instead

#### 15. TMARiskAssessment
- **Version**: `9.1.1.11.2.5.3.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Risk assessment before trade confirmation
- **Properties**: 6 properties with versioning

---

### Action Trigger Types

#### 16. TMAActionTriggerRequest
- **Version**: `9.1.1.11.2.6.0.0.0`
- **File**: `src/types/tma.ts`
- **Purpose**: Request for triggering predefined actions
- **Properties**: 4 properties with versioning

#### 17. TMAActionTriggerResponse
- **Version**: Not versioned (utility type)
- **File**: `src/types/tma.ts`
- **Purpose**: Response for action triggers

---

## File Structure

```
src/types/
├── tma.ts                    # All TMA type definitions (9.1.1.11.2.0.0.0)
└── index.ts                  # Re-exports all TMA types
```

---

## Versioning Metadata

All types include:

1. **File Header**:
   - `@fileoverview` with version `9.1.1.11.2.0.0.0`
   - Comprehensive description
   - Module path: `src/types/tma`
   - Instance ID: `TMA-TYPES-001`
   - Blueprint: `BP-TYPES-TMA@9.1.1.11.2.0.0.0`

2. **Interface Headers**:
   - `@interface` tag with interface name
   - `@version` tag with specific version
   - `@component` tag with component name
   - Property-level versioning (e.g., `9.1.1.11.2.1.0.1`)

3. **Cross-References**:
   - `@see` tags linking to documentation sections
   - Links to related types
   - References to documentation sections

4. **Ripgrep Patterns**:
   - Version numbers
   - Instance IDs
   - Blueprint references
   - Type names

---

## Verification

### Ripgrep Commands

```bash
# Verify all TMA types
rg "9\.1\.1\.11\.2\.[0-6]\.0\.0\.0" src/types/tma.ts

# Verify new types
rg "TMAAlertSummary|TMATradeOrderRequest|TMATradeOrderResponse|TMAAlertActionRequest" src/types/tma.ts

# Verify instance ID
rg "TMA-TYPES-001" src/types/tma.ts

# Verify blueprint
rg "BP-TYPES-TMA@9\.1\.1\.11\.2\.0\.0\.0" src/types/tma.ts
```

---

## Exports

All types are exported from:
- `src/types/tma.ts` - Primary definitions
- `src/types/index.ts` - Re-exports for easy access

---

## Constants Integration

TMA types integrate with the centralized constants system for file paths, API endpoints, and deployment URLs:

### File Paths

```typescript
import { ROOT_DIR_PATHS } from "../src/utils/rss-constants.js";

// TMA type definitions location
ROOT_DIR_PATHS.SRC_DIR + "/types/tma.ts"; // "src/types/tma.ts"
ROOT_DIR_PATHS.SRC_DIR + "/types/index.ts"; // "src/types/index.ts"
```

### API Endpoints

TMA types are used with Mini App API endpoints defined in `RSS_API_PATHS`:

```typescript
import { RSS_API_PATHS } from "../src/utils/rss-constants.js";

// Mini App endpoints used with TMA types
RSS_API_PATHS.MINIAPP_STATUS; // "/api/miniapp/status"
RSS_API_PATHS.MINIAPP_INFO; // "/api/miniapp/info"
RSS_API_PATHS.MINIAPP_HEALTH; // "/api/miniapp/health"
RSS_API_PATHS.MINIAPP_SPORTSBOOKS; // "/api/miniapp/sportsbooks"
RSS_API_PATHS.MINIAPP_MARKETS; // "/api/miniapp/markets"
RSS_API_PATHS.MINIAPP_ARBITRAGE; // "/api/miniapp/arbitrage"
RSS_API_PATHS.MINIAPP_BETS; // "/api/miniapp/bets"

// v17 Mini App endpoints
RSS_API_PATHS.V17_MINIAPP_BASE; // "/api/v17/telegram/miniapp"
RSS_API_PATHS.V17_MINIAPP_SPORTSBOOKS; // "/api/v17/telegram/miniapp/sportsbooks"
RSS_API_PATHS.V17_MINIAPP_MARKETS; // "/api/v17/telegram/miniapp/markets"
RSS_API_PATHS.V17_MINIAPP_ARBITRAGE; // "/api/v17/telegram/miniapp/arbitrage"
RSS_API_PATHS.V17_MINIAPP_BETS; // "/api/v17/telegram/miniapp/bets"
```

### Deployment URLs

TMA types are used in conjunction with Factory Wager Mini App deployment URLs:

```typescript
import { TELEGRAM_MINIAPP_URLS } from "../src/utils/rss-constants.js";

TELEGRAM_MINIAPP_URLS.STAGING; // "https://staging.factory-wager-miniapp.pages.dev"
TELEGRAM_MINIAPP_URLS.PRODUCTION; // "https://factory-wager-miniapp.pages.dev"
TELEGRAM_MINIAPP_URLS.PRODUCTION_ALT; // "https://app.factory-wager.com"
```

**Usage**:
- File paths reference `ROOT_DIR_PATHS.SRC_DIR` for type definition locations
- API endpoints align with `RSS_API_PATHS` Mini App constants
- Deployment URLs align with `TELEGRAM_MINIAPP_URLS` for staging/production
- Cross-referenced with `docs/BUN-RSS-INTEGRATION.md` for complete constants documentation

---

## Status

✅ **All types created with**:
- Proper hierarchical versioning (7-level format)
- Comprehensive metadata tags
- Property-level versioning
- Cross-reference documentation
- Instance IDs and blueprints
- Ripgrep verification patterns
- Constants integration documentation

✅ **New types added**:
- `TMAAlertSummary` (9.1.1.11.2.3.0.0.0)
- `TMAAlertActionRequest` (9.1.1.11.2.3.3.0.0.0)
- `TMATradeOrderRequest` (9.1.1.11.2.5.0.0.0)
- `TMATradeOrderResponse` (9.1.1.11.2.5.0.0.0)

✅ **Legacy types maintained**:
- `TMATradeExecutionRequest` (deprecated)
- `TMATradeExecutionResponse` (deprecated)
- `TMAAlertListResponse` (legacy format)

---

**Status**: ✅ Complete & Verified  
**Next Steps**: Types ready for use in TMA implementation
