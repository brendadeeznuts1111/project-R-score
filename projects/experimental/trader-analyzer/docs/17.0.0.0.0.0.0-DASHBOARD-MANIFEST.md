# Dashboard Manifest Integration (17.0.1.0.0.0.0)

**Version**: 17.0.1.0.0.0.0  
**Purpose**: Web App Manifest integration with Design System and Terminal Environment  
**File**: `dashboard/manifest.json`  
**Status**: ‚úÖ Integrated  
**Last Updated**: 2024-12-07

---

## üéØ Overview

The `dashboard/manifest.json` file serves as the **Web App Manifest** for the NEXUS Dashboard, defining it as a Progressive Web App (PWA) while integrating with Hyper-Bun's Design System (17.0.0.0.0.0.0) and Terminal Environment (11.4.x).

**Key Integration Points**:
- Design System color tokens
- Terminal environment access patterns
- Closed-loop perception pipeline metadata
- Semantic color references

---

## üìã Manifest Structure

### Standard PWA Fields

```json
{
  "name": "NEXUS Trading Platform Dev Dashboard",
  "short_name": "NEXUS Dashboard",
  "version": "1.0.0",
  "manifest_version": 3,
  "start_url": "./index.html",
  "display": "standalone",
  "background_color": "#1a1a1a",
  "theme_color": "#667eea"
}
```

**Design System Alignment**:
- `background_color`: `#1a1a1a` ‚Üí Matches `--bg-primary: oklch(25% 0.05 250)` ‚âà `#1a1a1a`
- `theme_color`: `#667eea` ‚Üí Matches `--accent-purple: #667eea` (Dashboard department color)

---

## üé® Design System Integration (`_design_system`)

### Color Tokens

```json
"_design_system": {
  "version": "17.0.0.0.0.0.0",
  "color_tokens": {
    "background_primary": "#1a1a1a",
    "background_secondary": "#0f0f0f",
    "theme_color": "#667eea",
    "accent_cyan": "#00d4ff",
    "accent_purple": "#667eea",
    "accent_green": "#10b981",
    "accent_red": "#ef4444",
    "accent_yellow": "#f59e0b",
    "accent_orange": "#ff6b00"
  },
  "semantic_colors": {
    "risk_critical": "#ef4444",
    "risk_warning": "#f59e0b",
    "risk_info": "#00d4ff",
    "accent_electric": "#00d4ff"
  }
}
```

**Purpose**: 
- Provides color reference for PWA theming
- Ensures consistency with CSS Design System
- Enables browser UI theming (address bar, task switcher)

**CSS Variable Mapping**:
- `background_primary` ‚Üí `--bg-primary: oklch(25% 0.05 250)`
- `theme_color` ‚Üí `--accent-purple: #667eea`
- `risk_critical` ‚Üí `--color-risk-critical: #ef4444`
- `risk_warning` ‚Üí `--color-risk-warning: #f59e0b`

---

## üîó Terminal Environment Integration (`_terminal_integration`)

### Tmux Session Access Patterns

```json
"_terminal_integration": {
  "version": "11.4.4.0.0.0.0",
  "tmux_sessions": [
    "mlgs-core",
    "mlgs-analytics",
    "mlgs-research",
    "mlgs-monitoring"
  ],
  "access_patterns": [
    "w3m http://localhost:8080/index.html",
    "lynx http://localhost:8080/index.html",
    "Chrome tab (always open in tmux Analytics window)"
  ]
}
```

**Purpose**:
- Documents how dashboard is accessed from tmux sessions
- Provides access patterns for terminal browsers
- Ensures zero context switch cost

**Usage**:
- **Analytics Session**: Dashboard always open in Window 1
- **Core Session**: Dashboard accessible via `Ctrl-Space n`
- **Research Session**: Dashboard for visualization
- **Monitoring Session**: Dashboard for health checks

---

## üîÑ Closed-Loop Pipeline Integration

### Pipeline Metadata

```json
"closed_loop_pipeline": {
  "description": "Deterministic, cross-medium information radiance",
  "workflow": "Terminal log ‚Üí Dashboard visualization ‚Üí Same semantic token ‚Üí Zero context switch",
  "documentation": "../docs/17.0.0.0.0.0.0-CLOSED-LOOP-WORKFLOW.md"
}
```

**Purpose**:
- Documents the closed-loop perception pipeline
- Links to workflow documentation
- Ensures semantic token consistency

**Example Flow**:
1. Terminal log: `[WARN] HBMO-017` ‚Üí Yellow (`colour220`)
2. Dashboard alert: `border-left: 6px solid var(--color-risk-warning)` ‚Üí Yellow (`#f59e0b`)
3. **Same semantic token** ‚Üí **Same meaning** ‚Üí **Zero context switch**

---

## üéØ Philosophy Integration (`_philosophy`)

### Core Principles

```json
"_philosophy": {
  "core_principle": "Tmux is the OS, CSS is the GUI standard",
  "closed_loop_pipeline": "Keypress ‚Üí Token ‚Üí Photon ‚Üí Decision ‚Üí Keypress",
  "zero_context_switch": "Engineer never leaves tmux session - dashboard always accessible",
  "deterministic_radiance": "Same semantic token ‚Üí Same meaning ‚Üí All media"
}
```

**Purpose**:
- Captures Hyper-Bun's architectural philosophy
- Documents the unified nervous system approach
- Links to philosophy documentation

---

## üîß Implementation Details

### Browser Integration

**PWA Features**:
- **Standalone Display**: Dashboard runs as standalone app
- **Theme Color**: Browser UI matches dashboard theme (`#667eea`)
- **Background Color**: Splash screen matches dashboard background (`#1a1a1a`)
- **Icons**: SVG icons with purple theme (`#667eea`)

**Server Integration** (`scripts/dashboard-server.ts`):
```typescript
// Serve manifest.json
if (path === "/manifest.json" || path === "/dashboard/manifest.json") {
  const manifestPath = join(PROJECT_ROOT, "dashboard", "manifest.json");
  const file = Bun.file(manifestPath);
  // ... serve with ETag caching
}
```

**HTML Integration** (`dashboard/index.html`):
```javascript
// Add manifest.json link dynamically (only when served via HTTP)
if (window.location.protocol !== 'file:') {
  const manifestLink = document.createElement('link');
  manifestLink.rel = 'manifest';
  manifestLink.href = '/manifest.json';
  document.head.appendChild(manifestLink);
}
```

---

## üé® Color Alignment

### Design System Colors ‚Üí Manifest Colors

| CSS Variable | Hex Value | Manifest Field | Purpose |
|--------------|-----------|----------------|---------|
| `--bg-primary` | `#1a1a1a` | `background_color` | Splash screen, PWA background |
| `--accent-purple` | `#667eea` | `theme_color` | Browser UI, address bar |
| `--color-risk-critical` | `#ef4444` | `semantic_colors.risk_critical` | Error states |
| `--color-risk-warning` | `#f59e0b` | `semantic_colors.risk_warning` | Warning states |
| `--color-risk-info` | `#00d4ff` | `semantic_colors.risk_info` | Info states |

**Result**: **Perfect alignment** between CSS Design System and PWA manifest

---

## üìä Integration Benefits

### 1. **Consistent Theming**
- Browser UI matches dashboard theme
- Splash screen matches dashboard background
- **Zero visual jarring** when loading dashboard

### 2. **Terminal Integration**
- Dashboard accessible from all tmux sessions
- Terminal browsers supported (w3m, lynx)
- **Zero context switch** cost

### 3. **Semantic Consistency**
- Manifest colors match CSS tokens
- Same semantic meaning across all media
- **Deterministic radiance** maintained

### 4. **PWA Capabilities**
- Standalone app experience
- Installable on desktop/mobile
- Offline-capable (with service worker)

---

## üîç Usage Examples

### Example 1: Tmux Analytics Session

**Setup**:
```bash
# Start analytics session
./scripts/tmux-mlgs.sh analytics

# Window 1: Dashboard (already open)
# Browser: w3m http://localhost:8080/index.html
```

**Manifest Integration**:
- Browser reads `manifest.json`
- Applies `theme_color: #667eea` to browser UI
- Uses `background_color: #1a1a1a` for splash screen
- **Matches dashboard CSS theme**

---

### Example 2: PWA Installation

**User Action**: Install dashboard as PWA

**Manifest Provides**:
- App name: "NEXUS Dashboard"
- Icon: Purple "N" logo (`#667eea`)
- Theme: Purple browser UI
- Background: Dark (`#1a1a1a`)

**Result**: **Consistent branding** across all platforms

---

### Example 3: Closed-Loop Workflow

**Terminal**:
```
[WARN] HBMO-017 | ConcealedArbEngine | latency_spike_detected > 180ms
```

**Dashboard** (via manifest theming):
- Browser UI: Purple theme (`theme_color: #667eea`)
- Alert card: Yellow border (`semantic_colors.risk_warning: #f59e0b`)
- **Same semantic token** as terminal log

**Result**: **Deterministic radiance** from terminal to dashboard

---

## üìã Validation Checklist

### Design System Alignment ‚úÖ
- [x] `background_color` matches `--bg-primary`
- [x] `theme_color` matches `--accent-purple`
- [x] Semantic colors match CSS tokens
- [x] Color tokens documented in manifest

### Terminal Integration ‚úÖ
- [x] Tmux sessions documented
- [x] Access patterns specified
- [x] Closed-loop pipeline referenced
- [x] Zero context switch ensured

### PWA Features ‚úÖ
- [x] Standalone display mode
- [x] Icons provided (SVG)
- [x] Theme color for browser UI
- [x] Background color for splash screen

### MCP Error Codes Integration ‚úÖ
- [x] Error Codes tab added to MCP Monitoring Dashboard
- [x] Search functionality implemented
- [x] Category filtering implemented
- [x] Error code cards display all required information
- [x] Legacy code mappings documented
- [x] Quick reference section included
- [x] Documentation links functional
- [x] Design System colors used for severity indicators

### Documentation ‚úÖ
- [x] Design System version referenced
- [x] Terminal Environment version referenced
- [x] Philosophy documented
- [x] Cross-references included
- [x] MCP Error Codes section documented

---

## üîç Ripgrep Patterns

```bash
# Find manifest.json references
rg "manifest.json" dashboard/*.html scripts/*.ts

# Find design system integration
rg "_design_system|_terminal_integration|_philosophy" dashboard/manifest.json

# Find color token usage
rg "theme_color|background_color|semantic_colors" dashboard/manifest.json

# Find PWA features
rg "display.*standalone|start_url|manifest_version" dashboard/manifest.json

# Find MCP Error Codes integration
rg "mcpTabContentErrorCodes|loadMCPErrorCodes|filterMCPErrorCodes" dashboard/index.html

# Find error code definitions
rg "NX-MCP-001|NX-MCP-010|NX-MCP-020" src/errors/index.ts dashboard/index.html
```

---

## üìö Related Documentation

- `docs/17.0.0.0.0.0.0-DESIGN-SYSTEM.md` - Design system overview
- `docs/17.0.0.0.0.0.0-CLOSED-LOOP-WORKFLOW.md` - Closed-loop workflow
- `docs/11.4.6-TMUX-CSS-ECOSYSTEM-INTEGRATION.md` - Terminal integration
- `docs/HYPER-BUN-PHILOSOPHY-ARCHITECTURE.md` - Philosophy & architecture
- `docs/6.1.1.2.2.8.1.1.2.6-Enhanced-MCP-Error-Code-Management-and-Discoverability/MCP-ERROR-CODES.md` - MCP Error Codes reference
- `dashboard/manifest.json` - Manifest file
- `dashboard/index.html` - Dashboard implementation (MCP Error Codes tab)
- `src/errors/index.ts` - Error registry with MCP error codes

---

## üîß MCP Error Codes Integration (`_mcp_error_codes`)

### Error Code Reference Dashboard

**Version**: 6.1.1.2.2.8.1.1.2.6  
**Status**: ‚úÖ Integrated  
**Location**: `dashboard/index.html` ‚Üí MCP Monitoring Dashboard ‚Üí Error Codes Tab

**Purpose**:
- Provides comprehensive reference for Hyper-Bun's MCP error codes
- Enables rapid error diagnosis and resolution
- Integrates with `ripgrep`-driven contextual discovery
- Links to detailed documentation (`docs/6.1.1.2.2.8.1.1.2.6-Enhanced-MCP-Error-Code-Management-and-Discoverability/MCP-ERROR-CODES.md`)

**Features**:
- **Search Functionality**: Filter error codes by code (e.g., `NX-MCP-001`) or description
- **Category Filtering**: Filter by category (Execution, Resource, Validation, Server, Legacy)
- **Error Code Cards**: Display code, severity, HTTP status, category, recoverable status
- **Legacy Code Mapping**: Shows mappings from legacy codes (`NX-800`-`NX-804`) to new structured codes
- **Quick Reference**: Common `ripgrep` commands, console diagnostics, alert thresholds
- **Documentation Links**: Direct links to detailed error code documentation

**Error Code Categories**:
- **Execution Errors** (3 codes): `NX-MCP-001` to `NX-MCP-003`
- **Resource Errors** (3 codes): `NX-MCP-010` to `NX-MCP-012`
- **Validation Errors** (3 codes): `NX-MCP-020` to `NX-MCP-022`
- **Server Errors** (3 codes): `NX-MCP-030` to `NX-MCP-032`
- **Legacy Codes** (5 codes): `NX-800` to `NX-804` (with mappings to new codes)

**Integration Points**:
- **Design System**: Uses semantic colors (`risk_critical`, `risk_warning`, `risk_info`) for severity indicators
- **Terminal Integration**: Supports `ripgrep` commands for error code discovery
- **Closed-Loop Pipeline**: Error codes maintain semantic consistency from terminal logs to dashboard visualization

**Example Usage**:
1. **Search Error**: Type `NX-MCP-001` in search box
2. **View Details**: Click "View Details ‚Üí" link to open full documentation
3. **Filter by Category**: Click "Execution" button to show only execution errors
4. **Quick Reference**: Use `ripgrep` commands from Quick Reference section

**Color Coding**:
- **FATAL** (`#ef4444`): Critical errors requiring immediate attention
- **ERROR** (`#f59e0b`): Errors that may impact functionality
- **WARN** (`#3b82f6`): Warnings that should be reviewed
- **INFO** (`#9ca3af`): Informational messages

**Documentation Reference**:
- Full documentation: `docs/6.1.1.2.2.8.1.1.2.6-Enhanced-MCP-Error-Code-Management-and-Discoverability/MCP-ERROR-CODES.md`
- Error registry: `src/errors/index.ts`
- MCP server: `src/mcp/server.ts`

---

## üéØ Future Enhancements

### Potential Additions

1. **Service Worker Integration**
   - Offline capability
   - Cache management
   - Background sync

2. **Theme Switching**
   - Light/dark mode detection
   - Dynamic theme color updates
   - System preference sync

3. **Module-Specific Manifests**
   - Core session manifest
   - Analytics session manifest
   - Research session manifest
   - Monitoring session manifest

4. **Semantic Color Expansion**
   - Department-specific colors
   - Status-specific colors
   - Severity-specific colors

5. **MCP Error Code Enhancements**
   - Real-time error code occurrence tracking
   - Error code frequency analytics
   - Integration with Prometheus metrics
   - Automated error code drift detection

---

**Version**: 17.0.1.0.0.0.0  
**Status**: ‚úÖ Integrated  
**Philosophy**: **"Same semantic token ‚Üí Same meaning ‚Üí All media"**
