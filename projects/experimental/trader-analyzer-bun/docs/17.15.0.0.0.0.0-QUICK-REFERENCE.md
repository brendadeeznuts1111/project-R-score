# 17.15.0.0.0.0.0 â€” Quick Reference Guide

**Radiance v17 â€” Zero-Ambiguity Semantic Architecture**

---

## Import Everything

```typescript
import * as Radiance17 from "./17.15.0.0.0.0.0-radiance/index.17";
```

Or import specific modules:

```typescript
import { 
  queryPropertiesRegistry17,
  probePropertiesHealth17,
  v17,
  radianceMiddleware17,
  emitRadianceDiscovery17
} from "./17.15.0.0.0.0.0-radiance/index.17";
```

---

## Registry Queries

### Properties

```typescript
// Query properties
const props = await queryPropertiesRegistry17({
  namespace: "users",
  validationMode: "strict"
});

// Health check
const health = await probePropertiesHealth17();
```

### MCP Tools

```typescript
// Query MCP tools
const tools = await queryMcpToolsRegistry17({
  category: "research"
});

// Health check
const health = await probeMcpToolsHealth17();
```

### Sharp Books

```typescript
// Query sharp books
const books = await querySharpBooksRegistry17({
  tier: 1,
  status: "active",
  cryptoAccepted: true
});

// Health check
const health = await probeSharpBooksHealth17();
```

### Data Sources

```typescript
// Query data sources
const sources = await queryDataSourcesRegistry17({
  type: "rest",
  auth: "bearer",
  namespace: "api"
});

// Health check
const health = await probeDataSourcesHealth17();
```

---

## Routing

### Use Versioned Routes

```typescript
import { v17 } from "./17.15.0.0.0.0.0-radiance/routing.v17";

// Properties registry
app.get(v17.registry.properties, handler);

// MCP tools registry
app.get(v17.registry["mcp-tools"], handler);

// Sharp books registry
app.get(v17.registry["sharp-books"], handler);

// Data sources registry
app.get(v17.registry["data-sources"], handler);
```

### Check if Route is v17

```typescript
import { isV17Route } from "./17.15.0.0.0.0.0-radiance/routing.v17";

if (isV17Route("/api/v17/registry/properties")) {
  // Handle v17 route
}
```

---

## Middleware

### Apply Radiance Middleware

```typescript
import { radianceMiddleware17 } from "./17.15.0.0.0.0.0-radiance/middleware.radiance.17";

const app = new Hono();

// Apply to all routes
app.use("*", radianceMiddleware17({ version: "17.15.0" }));

// Or apply to specific routes
app.use("/api/v17/*", radianceMiddleware17());
```

---

## Headers

### Build Radiance Headers

```typescript
import { buildRadianceHeaders17 } from "./17.15.0.0.0.0.0-radiance/headers.radiance.17";

const headers = buildRadianceHeaders17({
  version: "17.15.0",
  channel: "radiance-properties",
  registryId: "properties",
  semanticType: "PropertyDefinition",
  compression: "permessage-deflate"
});
```

### Build Content-Type

```typescript
import { buildRadianceContentType17 } from "./17.15.0.0.0.0.0-radiance/headers.radiance.17";

const contentType = buildRadianceContentType17("17.15", "PropertyDefinition");
// Returns: "application/radiance+json; version=17.15; schema=PropertyDefinition"
```

### Extract Headers

```typescript
import { extractRadianceHeaders17 } from "./17.15.0.0.0.0.0-radiance/headers.radiance.17";

const headers = extractRadianceHeaders17(response.headers);
console.log(headers.version); // "17.15.0"
console.log(headers.channel); // "radiance-properties"
```

---

## Radiance Events

### Emit Discovery Event

```typescript
import { emitRadianceDiscovery17 } from "./17.15.0.0.0.0.0-radiance/emit.radiance.17";

emitRadianceDiscovery17(
  "properties",
  "radiance-properties",
  "new_property_added",
  { propertyId: "prop_user_id", namespace: "users" },
  "info"
);
```

### Emit Failure Event

```typescript
import { emitRadianceFailure17 } from "./17.15.0.0.0.0.0-radiance/emit.radiance.17";

try {
  // ... operation ...
} catch (error) {
  emitRadianceFailure17(
    "properties",
    "radiance-properties",
    error instanceof Error ? error : new Error(String(error)),
    "OPERATION_FAILED"
  );
}
```

### Emit Schema Drift Event

```typescript
import { emitRadianceSchemaDrift17 } from "./17.15.0.0.0.0.0-radiance/emit.radiance.17";

emitRadianceSchemaDrift17(
  "properties",
  "radiance-properties",
  {
    property: "user_id",
    expected: "string",
    actual: "number"
  }
);
```

### Emit Health Change Event

```typescript
import { emitRadianceHealthChange17 } from "./17.15.0.0.0.0.0-radiance/emit.radiance.17";

emitRadianceHealthChange17(
  "properties",
  "radiance-properties",
  true, // healthy
  "degraded" // previous status
);
```

---

## Type Guards

### Check Type

```typescript
import { isPropertyDefinition17, isDataSourceConfig17 } from "./17.15.0.0.0.0.0-radiance/types.radiance.17";

const item: RegistryItem17 = await queryPropertiesRegistry17()[0];

if (isPropertyDefinition17(item)) {
  // TypeScript knows item is PropertyDefinition
  console.log(item.__radianceChannel); // "radiance-properties"
}
```

---

## API Endpoints

### Version 17 Endpoints

```bash
# Properties
GET /api/v17/registry/properties
GET /api/v17/registry/properties/health

# MCP Tools
GET /api/v17/registry/mcp-tools
GET /api/v17/registry/mcp-tools/health

# Sharp Books
GET /api/v17/registry/sharp-books?tier=1&status=active
GET /api/v17/registry/sharp-books/health

# Data Sources
GET /api/v17/registry/data-sources?type=rest&auth=bearer
GET /api/v17/registry/data-sources/health

# Registry Overview
GET /api/v17/registry
GET /api/v17/registry/registry-of-registries

# Health Status
GET /api/v17/registry/:id/health
```

### Example Request

```bash
curl -H "Accept: application/radiance+json" \
     http://localhost:3001/api/v17/registry/properties
```

### Example Response Headers

```http
X-Radiance-Version: 17.15.0
X-Radiance-Channel: radiance-properties
X-Registry-ID: properties
X-Semantic-Type: PropertyDefinition
X-Compression: permessage-deflate
X-Timestamp: 1734123456789
X-Trace-ID: rad-17-15-9f3a1c
Content-Type: application/radiance+json; version=17.15; schema=PropertyDefinition
```

---

## Common Patterns

### Query with Filters

```typescript
// Properties with namespace filter
const userProps = await queryPropertiesRegistry17({
  namespace: "users",
  validationMode: "strict"
});

// Sharp books tier 1 only
const tier1Books = await querySharpBooksRegistry17({
  tier: 1,
  status: "active"
});

// REST data sources with bearer auth
const restSources = await queryDataSourcesRegistry17({
  type: "rest",
  auth: "bearer"
});
```

### Health Monitoring

```typescript
// Check all registries
const [propsHealth, toolsHealth, booksHealth, sourcesHealth] = await Promise.all([
  probePropertiesHealth17(),
  probeMcpToolsHealth17(),
  probeSharpBooksHealth17(),
  probeDataSourcesHealth17()
]);

// Emit events on status change
if (propsHealth.status === "degraded") {
  emitRadianceHealthChange17("properties", "radiance-properties", false, "healthy");
}
```

### Type-Safe Registry Operations

```typescript
// Type-safe property operations
const props = await queryPropertiesRegistry17();
props.forEach(prop => {
  // TypeScript knows prop is PropertyDefinition
  if (prop.validationMode === "strict") {
    // Validate with zod schema
    prop.schema.parse(data);
  }
});
```

---

## Error Handling

```typescript
try {
  const props = await queryPropertiesRegistry17();
} catch (error) {
  emitRadianceFailure17(
    "properties",
    "radiance-properties",
    error instanceof Error ? error : new Error(String(error)),
    "QUERY_FAILED"
  );
  throw error;
}
```

---

## Testing

### Mock Radiance Events

```typescript
import { emitRadianceEvent17 } from "./17.15.0.0.0.0.0-radiance/emit.radiance.17";

// Emit test event
emitRadianceEvent17({
  type: "REGISTRY_DISCOVERY",
  registry: "properties",
  timestamp: Date.now(),
  severity: "info",
  channel: "radiance-properties",
  data: {
    discovery: {
      type: "test",
      details: { test: true }
    }
  }
});
```

---

**Version**: 17.15.0.0.0.0.0  
**Status**: âœ… Operational  
**Radiance**: ðŸŒŸ Total
