<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One-Pay Unified Platform Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .metric-card {
            transition: all 0.3s ease;
        }
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .risk-high { border-left: 4px solid #ef4444; }
        .risk-medium { border-left: 4px solid #f59e0b; }
        .risk-low { border-left: 4px solid #22c55e; }
        .flow-high { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .flow-medium { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
        .flow-low { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
        .platform-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .platform-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
        }
        .flow-path {
            stroke-dasharray: 5, 5;
            animation: flow 2s linear infinite;
        }
        @keyframes flow {
            to {
                stroke-dashoffset: -10;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-gradient-to-r from-indigo-600 to-blue-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-exchange-alt text-3xl"></i>
                    <div>
                        <h1 class="text-2xl font-bold">One-Pay Unified Platform</h1>
                        <p class="text-indigo-100">Cross-platform payment analytics & smart routing</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm">Last Updated: <span id="lastUpdated" class="font-mono"></span></span>
                    <button onclick="refreshData()" class="bg-white text-indigo-600 px-4 py-2 rounded-lg hover:bg-indigo-50 transition">
                        <i class="fas fa-sync-alt mr-2"></i>Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Key Metrics -->
        <section class="mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">üí∏ Platform Overview</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="metric-card bg-white rounded-xl shadow-md p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm">Connected Apps</p>
                            <p class="text-3xl font-bold text-blue-600">6.3</p>
                            <p class="text-xs text-blue-600 mt-1">
                                <i class="fas fa-arrow-up"></i> 0.8 growth
                            </p>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-full">
                            <i class="fas fa-link text-blue-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="metric-card bg-white rounded-xl shadow-md p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm">Unified Volume</p>
                            <p class="text-3xl font-bold text-green-600">$1.8M</p>
                            <p class="text-xs text-green-600 mt-1">
                                <i class="fas fa-arrow-up"></i> 15% monthly
                            </p>
                        </div>
                        <div class="bg-green-100 p-3 rounded-full">
                            <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="metric-card bg-white rounded-xl shadow-md p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm">Smart Routing Success</p>
                            <p class="text-3xl font-bold text-purple-600">96.4%</p>
                            <p class="text-xs text-green-600 mt-1">
                                <i class="fas fa-arrow-up"></i> 2.1% improvement
                            </p>
                        </div>
                        <div class="bg-purple-100 p-3 rounded-full">
                            <i class="fas fa-route text-purple-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="metric-card bg-white rounded-xl shadow-md p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-500 text-sm">Unified Risk Score</p>
                            <p class="text-3xl font-bold text-orange-600">34/100</p>
                            <p class="text-xs text-green-600 mt-1">
                                <i class="fas fa-arrow-down"></i> 5 points
                            </p>
                        </div>
                        <div class="bg-orange-100 p-3 rounded-full">
                            <i class="fas fa-shield-alt text-orange-600 text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Connected Platforms -->
        <section class="mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">üîó Connected Payment Platforms</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="platform-card bg-white rounded-xl shadow-md p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="flow-high w-12 h-12 rounded-full flex items-center justify-center">
                                <i class="fab fa-cc-paypal text-white text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-gray-800">PayPal</h3>
                                <p class="text-sm text-gray-600">Primary platform</p>
                            </div>
                        </div>
                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Active</span>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Monthly Volume</span>
                            <span class="font-bold text-gray-900">$1.2M</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Success Rate</span>
                            <span class="font-bold text-green-600">98.2%</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Risk Score</span>
                            <span class="font-bold text-green-600">12/100</span>
                        </div>
                    </div>
                </div>

                <div class="platform-card bg-white rounded-xl shadow-md p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="flow-medium w-12 h-12 rounded-full flex items-center justify-center">
                                <i class="fab fa-cc-stripe text-white text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-gray-800">Cash App</h3>
                                <p class="text-sm text-gray-600">Secondary platform</p>
                            </div>
                        </div>
                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Active</span>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Monthly Volume</span>
                            <span class="font-bold text-gray-900">$450K</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Success Rate</span>
                            <span class="font-bold text-green-600">96.8%</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Risk Score</span>
                            <span class="font-bold text-orange-600">28/100</span>
                        </div>
                    </div>
                </div>

                <div class="platform-card bg-white rounded-xl shadow-md p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <div class="flow-low w-12 h-12 rounded-full flex items-center justify-center">
                                <i class="fab fa-cc-apple-pay text-white text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-gray-800">Apple Pay</h3>
                                <p class="text-sm text-gray-600">Mobile platform</p>
                            </div>
                        </div>
                        <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Active</span>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Monthly Volume</span>
                            <span class="font-bold text-gray-900">$160K</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Success Rate</span>
                            <span class="font-bold text-green-600">97.5%</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Risk Score</span>
                            <span class="font-bold text-green-600">8/100</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Smart Routing Analytics -->
        <section class="mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">‚ö° Smart Routing Analytics</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-white rounded-xl shadow-md p-6 text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-dollar-sign text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-800">Fee Savings</h3>
                    <p class="text-2xl font-bold text-green-600 mt-2">$23.7/hr</p>
                    <p class="text-sm text-gray-600">Average savings</p>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-clock text-blue-600 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-800">Time Reduction</h3>
                    <p class="text-2xl font-bold text-blue-600 mt-2">8.5s</p>
                    <p class="text-sm text-gray-600">Average improvement</p>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 text-center">
                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-percentage text-purple-600 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-800">Success Boost</h3>
                    <p class="text-2xl font-bold text-purple-600 mt-2">5.2%</p>
                    <p class="text-sm text-gray-600">Rate improvement</p>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6 text-center">
                    <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-brain text-orange-600 text-2xl"></i>
                    </div>
                    <h3 class="text-lg font-bold text-gray-800">ML Accuracy</h3>
                    <p class="text-2xl font-bold text-orange-600 mt-2">94.1%</p>
                    <p class="text-sm text-gray-600">Model accuracy</p>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="mb-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Cross-App Flow Trends -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">üìà Cross-App Flow Trends</h3>
                    <div class="chart-container">
                        <canvas id="flowChart"></canvas>
                    </div>
                </div>

                <!-- Routing Performance -->
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">üéØ Routing Performance Metrics</h3>
                    <div class="chart-container">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Money Flow Visualization -->
        <section class="mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">üí∞ Money Flow Visualization</h2>
            <div class="bg-white rounded-xl shadow-md p-6">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Flow Paths -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-4">üîÑ Most Common Paths</h3>
                        <div class="space-y-3" id="flowPaths">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Flow Metrics -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-4">üìä Flow Metrics</h3>
                        <div class="space-y-3" id="flowMetrics">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Risk Analysis -->
        <section class="mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">üö® Cross-App Risk Analysis</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">‚ö†Ô∏è High Risk Users</h3>
                    <div class="space-y-3" id="highRiskUsers">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">üîç Suspicious Patterns</h3>
                    <div class="space-y-3" id="suspiciousPatterns">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">üö® Velocity Breaches</h3>
                    <div class="space-y-3" id="velocityBreaches">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Recent Cross-App Transactions -->
        <section class="mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">üí∏ Recent Cross-App Transactions</h2>
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Source</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Destination</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Risk Score</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Routing</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="transactionsTable">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400">One-Pay Unified Platform Dashboard ‚Ä¢ Cross-platform payment analytics & smart routing</p>
            <p class="text-xs text-gray-500 mt-2">Data refreshes every 30 seconds ‚Ä¢ Last sync: <span id="lastSync"></span></p>
        </div>
    </footer>

    <script>
        // Sample data generation
        const onePayData = {
            flowPaths: [
                { path: 'Bank ‚Üí PayPal ‚Üí Cash App', percentage: 28, volume: 504000, riskScore: 12 },
                { path: 'Direct Deposit ‚Üí Venmo ‚Üí Bank', percentage: 22, volume: 396000, riskScore: 8 },
                { path: 'PayPal ‚Üí Zelle ‚Üí Recipient', percentage: 18, volume: 324000, riskScore: 15 },
                { path: 'Cash App ‚Üí Crypto Wallet', percentage: 12, volume: 216000, riskScore: 35 },
                { path: 'Apple Pay ‚Üí Google Pay ‚Üí Bank', percentage: 8, volume: 144000, riskScore: 6 }
            ],
            flowMetrics: [
                { metric: 'Total Flows', value: '1,247', change: '+8%', trend: 'up' },
                { metric: 'Average Flow Value', value: '$1,445', change: '+12%', trend: 'up' },
                { metric: 'Success Rate', value: '96.4%', change: '+2.1%', trend: 'up' },
                { metric: 'Avg Processing Time', value: '185ms', change: '-15%', trend: 'down' }
            ],
            highRiskUsers: [
                { user: 'user_89', riskScore: 78, platforms: 'PayPal, Cash App', alerts: 5 },
                { user: 'user_156', riskScore: 65, platforms: 'Venmo, Zelle', alerts: 3 },
                { user: 'user_234', riskScore: 52, platforms: 'Cash App, PayPal', alerts: 2 },
                { user: 'user_78', riskScore: 48, platforms: 'Apple Pay, Google Pay', alerts: 2 }
            ],
            suspiciousPatterns: [
                { pattern: 'Circular Routing', instances: 23, severity: 'high', platforms: 'PayPal ‚Üí Cash App' },
                { pattern: 'Layering', instances: 45, severity: 'medium', platforms: 'Multiple' },
                { pattern: 'Rapid Switching', instances: 15, severity: 'medium', platforms: 'All platforms' },
                { pattern: 'Structuring', instances: 9, severity: 'high', platforms: 'Zelle, Venmo' }
            ],
            velocityBreaches: [
                { type: 'Daily Limit', breaches: 12, users: 8, severity: 'medium' },
                { type: 'Cross-App Volume', breaches: 8, users: 5, severity: 'high' },
                { type: 'Rapid Transfers', breaches: 23, users: 15, severity: 'medium' },
                { type: 'Pattern Anomaly', breaches: 5, users: 3, severity: 'low' }
            ],
            recentTransactions: [
                { date: '2024-01-24 14:32', source: 'PayPal', destination: 'Cash App', amount: 250, riskScore: 12, routing: 'Smart', status: 'completed' },
                { date: '2024-01-24 14:28', source: 'Venmo', destination: 'Bank', amount: 180, riskScore: 8, routing: 'Direct', status: 'completed' },
                { date: '2024-01-24 14:25', source: 'Zelle', destination: 'PayPal', amount: 500, riskScore: 15, routing: 'Smart', status: 'completed' },
                { date: '2024-01-24 14:22', source: 'Cash App', destination: 'Crypto', amount: 1200, riskScore: 35, routing: 'Smart', status: 'flagged' },
                { date: '2024-01-24 14:18', source: 'Apple Pay', destination: 'Google Pay', amount: 75, riskScore: 6, routing: 'Optimized', status: 'completed' }
            ]
        };

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', () => {
            updateLastUpdated();
            populateFlowPaths();
            populateFlowMetrics();
            populateHighRiskUsers();
            populateSuspiciousPatterns();
            populateVelocityBreaches();
            populateTransactionsTable();
            createFlowChart();
            createPerformanceChart();
            
            // Auto-refresh every 30 seconds
            setInterval(refreshData, 30000);
        });

        function updateLastUpdated() {
            const now = new Date();
            document.getElementById('lastUpdated').textContent = now.toLocaleTimeString();
            document.getElementById('lastSync').textContent = now.toLocaleString();
        }

        function populateFlowPaths() {
            const container = document.getElementById('flowPaths');
            container.innerHTML = '';
            
            onePayData.flowPaths.forEach((path, _index) => {
                const riskClass = path.riskScore > 25 ? 'risk-high' : 
                                 path.riskScore > 15 ? 'risk-medium' : 'risk-low';
                
                const item = `
                    <div class="p-4 rounded-lg border ${riskClass}">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-gray-900">${path.path}</span>
                            <span class="text-lg font-bold text-blue-600">${path.percentage}%</span>
                        </div>
                        <div class="flex justify-between text-xs text-gray-500">
                            <span>$${(path.volume / 1000).toFixed(0)}K monthly</span>
                            <span>Risk: ${path.riskScore}/100</span>
                        </div>
                    </div>
                `;
                container.innerHTML += item;
            });
        }

        function populateFlowMetrics() {
            const container = document.getElementById('flowMetrics');
            container.innerHTML = '';
            
            onePayData.flowMetrics.forEach(metric => {
                const trendIcon = metric.trend === 'up' ? 'fa-arrow-up text-green-600' : 'fa-arrow-down text-red-600';
                const trendColor = metric.trend === 'up' ? 'text-green-600' : 'text-red-600';
                
                const item = `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div>
                            <p class="text-sm text-gray-600">${metric.metric}</p>
                            <p class="text-lg font-bold text-gray-900">${metric.value}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm ${trendColor}">
                                <i class="fas ${trendIcon}"></i> ${metric.change}
                            </p>
                        </div>
                    </div>
                `;
                container.innerHTML += item;
            });
        }

        function populateHighRiskUsers() {
            const container = document.getElementById('highRiskUsers');
            container.innerHTML = '';
            
            onePayData.highRiskUsers.forEach((user, _index) => {
                const severityClass = user.riskScore > 70 ? 'bg-red-50 border-red-200' : 
                                   user.riskScore > 50 ? 'bg-orange-50 border-orange-200' : 
                                   'bg-yellow-50 border-yellow-200';
                
                const item = `
                    <div class="p-4 rounded-lg border ${severityClass}">
                        <div class="flex items-start justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-900">${user.user}</p>
                                <p class="text-xs text-gray-500 mt-1">${user.platforms}</p>
                                <p class="text-xs text-gray-500">${user.alerts} alerts</p>
                            </div>
                            <div class="text-right">
                                <p class="text-lg font-bold text-red-600">${user.riskScore}/100</p>
                                <p class="text-xs text-gray-500">risk score</p>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += item;
            });
        }

        function populateSuspiciousPatterns() {
            const container = document.getElementById('suspiciousPatterns');
            container.innerHTML = '';
            
            onePayData.suspiciousPatterns.forEach((pattern, _index) => {
                const severityClass = pattern.severity === 'high' ? 'bg-red-50 border-red-200' : 
                                   pattern.severity === 'medium' ? 'bg-orange-50 border-orange-200' : 
                                   'bg-yellow-50 border-yellow-200';
                
                const severityBadge = pattern.severity === 'high' ? 'bg-red-100 text-red-800' :
                                     pattern.severity === 'medium' ? 'bg-orange-100 text-orange-800' :
                                     'bg-yellow-100 text-yellow-800';
                
                const item = `
                    <div class="p-4 rounded-lg border ${severityClass}">
                        <div class="flex items-start justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-900">${pattern.pattern}</p>
                                <p class="text-xs text-gray-500 mt-1">${pattern.instances} instances</p>
                                <p class="text-xs text-gray-500">${pattern.platforms}</p>
                            </div>
                            <div class="text-right">
                                <span class="px-2 py-1 text-xs rounded-full ${severityBadge}">${pattern.severity.toUpperCase()}</span>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += item;
            });
        }

        function populateVelocityBreaches() {
            const container = document.getElementById('velocityBreaches');
            container.innerHTML = '';
            
            onePayData.velocityBreaches.forEach((breach, _index) => {
                const severityClass = breach.severity === 'high' ? 'bg-red-50 border-red-200' : 
                                   breach.severity === 'medium' ? 'bg-orange-50 border-orange-200' : 
                                   'bg-yellow-50 border-yellow-200';
                
                const severityBadge = breach.severity === 'high' ? 'bg-red-100 text-red-800' :
                                     breach.severity === 'medium' ? 'bg-orange-100 text-orange-800' :
                                     'bg-yellow-100 text-yellow-800';
                
                const item = `
                    <div class="p-4 rounded-lg border ${severityClass}">
                        <div class="flex items-start justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-900">${breach.type}</p>
                                <p class="text-xs text-gray-500 mt-1">${breach.breaches} breaches</p>
                                <p class="text-xs text-gray-500">${breach.users} users affected</p>
                            </div>
                            <div class="text-right">
                                <span class="px-2 py-1 text-xs rounded-full ${severityBadge}">${breach.severity.toUpperCase()}</span>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += item;
            });
        }

        function populateTransactionsTable() {
            const tbody = document.getElementById('transactionsTable');
            tbody.innerHTML = '';
            
            onePayData.recentTransactions.forEach(transaction => {
                const riskClass = transaction.riskScore > 25 ? 'risk-high' : 
                                 transaction.riskScore > 15 ? 'risk-medium' : 'risk-low';
                
                const statusBadge = transaction.status === 'completed' ? 
                    '<span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Completed</span>' :
                    '<span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800">Flagged</span>';
                
                const routingBadge = transaction.routing === 'Smart' ? 
                    '<span class="px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-800">Smart</span>' :
                    transaction.routing === 'Optimized' ? 
                    '<span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">Optimized</span>' :
                    '<span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800">Direct</span>';
                
                const row = `
                    <tr class="${riskClass}">
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${transaction.date}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${transaction.source}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${transaction.destination}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">$${transaction.amount}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs rounded-full ${getRiskBadgeClass(transaction.riskScore)}">${transaction.riskScore}/100</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">${routingBadge}</td>
                        <td class="px-6 py-4 whitespace-nowrap">${statusBadge}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function getRiskBadgeClass(score) {
            if (score > 25) return 'bg-red-100 text-red-800';
            if (score > 15) return 'bg-yellow-100 text-yellow-800';
            return 'bg-green-100 text-green-800';
        }

        function createFlowChart() {
            const ctx = document.getElementById('flowChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [
                        {
                            label: 'Cross-App Flows',
                            data: [890, 950, 1020, 1100, 1180, 1247],
                            borderColor: 'rgb(99, 102, 241)',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Smart Routing Success',
                            data: [92.1, 93.2, 94.5, 95.3, 95.8, 96.4],
                            borderColor: 'rgb(34, 197, 94)',
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Risk Score Reduction',
                            data: [42, 39, 37, 35, 34, 34],
                            borderColor: 'rgb(245, 158, 11)',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function createPerformanceChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Fee Savings', 'Time Reduction', 'Success Boost', 'ML Accuracy'],
                    datasets: [{
                        label: 'Performance Metrics',
                        data: [23.7, 8.5, 5.2, 94.1],
                        backgroundColor: [
                            'rgba(34, 197, 94, 0.8)',
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(245, 158, 11, 0.8)'
                        ],
                        borderColor: [
                            'rgb(34, 197, 94)',
                            'rgb(59, 130, 246)',
                            'rgb(139, 92, 246)',
                            'rgb(245, 158, 11)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function refreshData() {
            // Simulate data refresh
            updateLastUpdated();
            
            // Add loading animation
            const cards = document.querySelectorAll('.metric-card');
            cards.forEach(card => {
                card.classList.add('animate-pulse-slow');
            });
            
            // Simulate API call delay
            setTimeout(() => {
                cards.forEach(card => {
                    card.classList.remove('animate-pulse-slow');
                });
                
                // Show success notification
                showNotification('One-Pay platform data refreshed successfully', 'success');
            }, 1000);
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg text-white ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-blue-500'
            } z-50`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
</body>
</html>
