# üåê Cloudflare Status Worker Configuration
# Empire Pro CLI Status Endpoints Deployment

name = "empire-pro-status"
main = "deployment/workers/status-worker.ts"
compatibility_date = "2026-01-15"
compatibility_flags = ["nodejs_compat"]

# Environment variables
[vars]
ENVIRONMENT = "production"
SERVICE_NAME = "Empire Pro CLI Status API"
VERSION = "3.7.0"

# Production environment
[env.production]
vars = { 
  ENVIRONMENT = "production",
  DEBUG = "false"
}

# R2 Bucket Configuration
[[env.production.r2_buckets]]
binding = "REPORTS_BUCKET"
bucket_name = "empire-pro-reports"

# Domain routing
[[env.production.routes]]
pattern = "status.empire-pro-cli.com/*"
zone_name = "empire-pro-cli.com"

# Scheduled health checks
[env.production.triggers]
crons = ["*/5 * * * *"]  # Every 5 minutes

# Staging environment
[env.staging]
vars = { 
  ENVIRONMENT = "staging",
  DEBUG = "true"
}

[[env.staging.r2_buckets]]
binding = "REPORTS_BUCKET"
bucket_name = "empire-pro-reports-staging"

[[env.staging.routes]]
pattern = "status-staging.empire-pro-cli.com/*"
zone_name = "empire-pro-cli.com"

# Development environment
[env.dev]
vars = { 
  ENVIRONMENT = "development",
  DEBUG = "true"
}

[[env.dev.r2_buckets]]
binding = "REPORTS_BUCKET"
bucket_name = "empire-pro-reports-dev"
