<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duo Automation Dashboard - Control Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .glass-effect {
            background: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .dashboard-card {
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        .dashboard-card:hover {
            border-color: #3b82f6;
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.3);
        }
        .status-online { background-color: #10b981; }
        .status-offline { background-color: #ef4444; }
        .status-warning { background-color: #f59e0b; }
        .dashboard-icon {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .gradient-bg {
            background: linear-gradient(135deg, #3b82f6 0%, #3b82f6 100%);
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        .notification-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #ef4444;
            position: absolute;
            top: -2px;
            right: -2px;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <!-- Background Gradient -->
    <div class="fixed inset-0 gradient-bg opacity-10"></div>
    
    <!-- Header -->
    <header class="glass-effect sticky top-0 z-50 relative">
        <nav class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-6">
                    <div class="flex items-center space-x-3">
                        <i data-lucide="layout-dashboard" class="w-10 h-10 text-blue-500"></i>
                        <div>
                            <h1 class="text-3xl font-bold">Duo Automation</h1>
                            <p class="text-sm text-gray-400">Control Center</p>
                        </div>
                    </div>
                </div>
                <div class="flex items-center space-x-6">
                    <div class="flex items-center space-x-3">
                        <div class="w-3 h-3 rounded-full status-online pulse-animation"></div>
                        <span class="text-sm font-medium">All Systems Operational</span>
                    </div>
                    <div class="text-sm text-gray-400" id="currentTime">--:--:--</div>
                    <button onclick="refreshAllDashboards()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors flex items-center">
                        <i data-lucide="refresh-cw" class="w-4 h-4 mr-2"></i>
                        Refresh All
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 relative">
        <!-- System Overview -->
        <section class="mb-12">
            <div class="metric-grid">
                <div class="glass-effect rounded-xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <i data-lucide="server" class="w-8 h-8 text-blue-500"></i>
                        <span class="text-3xl font-bold">9</span>
                    </div>
                    <h3 class="text-lg font-semibold mb-1">Active Services</h3>
                    <p class="text-sm text-gray-400">All systems running normally</p>
                </div>
                <div class="glass-effect rounded-xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <i data-lucide="activity" class="w-8 h-8 text-green-500"></i>
                        <span class="text-3xl font-bold">99.9%</span>
                    </div>
                    <h3 class="text-lg font-semibold mb-1">System Uptime</h3>
                    <p class="text-sm text-gray-400">Last 30 days</p>
                </div>
                <div class="glass-effect rounded-xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <i data-lucide="cpu" class="w-8 h-8 text-orange-500"></i>
                        <span class="text-3xl font-bold">24%</span>
                    </div>
                    <h3 class="text-lg font-semibold mb-1">CPU Usage</h3>
                    <p class="text-sm text-gray-400">Average across all services</p>
                </div>
                <div class="glass-effect rounded-xl p-6">
                    <div class="flex items-center justify-between mb-4">
                        <i data-lucide="hard-drive" class="w-8 h-8 text-purple-500"></i>
                        <span class="text-3xl font-bold">2.4TB</span>
                    </div>
                    <h3 class="text-lg font-semibold mb-1">Storage Used</h3>
                    <p class="text-sm text-gray-400">Out of 10TB available</p>
                </div>
            </div>
        </section>

        <!-- Dashboard Grid -->
        <section class="mb-12">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-2xl font-semibold flex items-center">
                    <i data-lucide="grid-3x3" class="w-6 h-6 mr-3"></i>
                    Dashboard Modules
                </h2>
                <div class="flex items-center space-x-4">
                    <input 
                        type="text" 
                        id="dashboardSearch" 
                        placeholder="Search dashboards..."
                        class="px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg"
                    >
                    <select id="categoryFilter" class="px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg">
                        <option value="all">All Categories</option>
                        <option value="analytics">Analytics</option>
                        <option value="management">Management</option>
                        <option value="monitoring">Monitoring</option>
                    </select>
                </div>
            </div>
            
            <div id="dashboardGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Dashboard cards will be dynamically added here -->
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="mb-12">
            <div class="glass-effect rounded-xl p-8">
                <h2 class="text-2xl font-semibold mb-6 flex items-center">
                    <i data-lucide="zap" class="w-6 h-6 mr-3"></i>
                    Quick Actions
                </h2>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <button onclick="runSystemCheck()" class="p-6 bg-gray-800 hover:bg-gray-700 rounded-xl transition-all hover:scale-105">
                        <i data-lucide="stethoscope" class="w-8 h-8 mx-auto mb-3 text-green-500"></i>
                        <span class="text-sm font-medium">System Check</span>
                    </button>
                    <button onclick="generateReport()" class="p-6 bg-gray-800 hover:bg-gray-700 rounded-xl transition-all hover:scale-105">
                        <i data-lucide="file-text" class="w-8 h-8 mx-auto mb-3 text-blue-500"></i>
                        <span class="text-sm font-medium">Generate Report</span>
                    </button>
                    <button onclick="backupAll()" class="p-6 bg-gray-800 hover:bg-gray-700 rounded-xl transition-all hover:scale-105">
                        <i data-lucide="download" class="w-8 h-8 mx-auto mb-3 text-purple-500"></i>
                        <span class="text-sm font-medium">Backup All</span>
                    </button>
                    <button onclick="showSettings()" class="p-6 bg-gray-800 hover:bg-gray-700 rounded-xl transition-all hover:scale-105">
                        <i data-lucide="settings" class="w-8 h-8 mx-auto mb-3 text-orange-500"></i>
                        <span class="text-sm font-medium">Settings</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- System Activity -->
        <section>
            <div class="glass-effect rounded-xl p-8">
                <h2 class="text-2xl font-semibold mb-6 flex items-center">
                    <i data-lucide="activity" class="w-6 h-6 mr-3"></i>
                    System Activity
                </h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-lg font-medium mb-4">Performance Overview</h3>
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-medium mb-4">Resource Usage</h3>
                        <div class="chart-container">
                            <canvas id="resourceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="glass-effect mt-12">
        <div class="container mx-auto px-4 py-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-6">
                    <p class="text-sm text-gray-400">© 2026 Duo Automation. All rights reserved.</p>
                    <div class="flex items-center space-x-4">
                        <a href="../../REGISTRY_README.md" class="text-gray-400 hover:text-white text-sm">Registry</a>
                        <a href="../../docs/API.md" class="text-gray-400 hover:text-white text-sm">Documentation</a>
                        <a href="../../docs/CLI.md" class="text-gray-400 hover:text-white text-sm">Support</a>
                        <a href="../../docs/API.md" class="text-gray-400 hover:text-white text-sm">API</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <span class="text-xs text-gray-400">v2.5.0</span>
                        <span class="text-xs text-green-400">•</span>
                        <span class="text-xs text-purple-400">Registry v3.7</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i data-lucide="git-branch" class="w-4 h-4 text-gray-400"></i>
                        <span class="text-sm text-gray-400">main</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 rounded-full bg-green-500"></div>
                        <span class="text-xs text-green-400">Production Ready</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Main Dashboard Controller
        class MainDashboard {
            constructor() {
                this.dashboards = [
                    {
                        id: 'registry',
                        name: 'NPM Registry v3.7',
                        description: 'Custom package registry with R2 storage',
                        category: 'storage',
                        status: 'active',
                        users: 1,
                        icon: { bg: '#8b5cf6', icon: 'package' },
                        url: 'https://duo-npm-registry.utahj4754.workers.dev',
                        notifications: 0,
                        lastUpdate: 'Just now'
                    },
                    {
                        id: 'cashapp',
                        name: 'CashApp Integration',
                        description: 'Real-time CashApp monitoring and analysis',
                        category: 'analytics',
                        status: 'active',
                        users: 1234,
                        icon: { bg: '#3b82f6', icon: 'dollar-sign' },
                        url: 'cashapp-dashboard-live.html',
                        notifications: 3,
                        lastUpdate: '2 min ago'
                    },
                    {
                        id: 'phone',
                        name: 'Phone Intelligence',
                        description: 'Advanced phone number analysis and tracking',
                        category: 'analytics',
                        status: 'active',
                        users: 892,
                        icon: { bg: '#3b82f6', icon: 'smartphone' },
                        url: 'phone-info-template.html',
                        notifications: 0,
                        lastUpdate: '5 min ago'
                    },
                    {
                        id: 'appleid',
                        name: 'Apple ID Grading',
                        description: 'Optimize Apple ID creation with AI-powered grading system',
                        category: 'analytics',
                        status: 'active',
                        users: 2156,
                        icon: { bg: '#3b82f6', icon: 'apple' },
                        url: 'apple-id-grading-dashboard.html',
                        notifications: 0,
                        lastUpdate: 'Just now'
                    },
                    {
                        id: 'carriers',
                        name: 'Carrier Networks',
                        description: 'Mobile carrier monitoring and analytics',
                        category: 'monitoring',
                        status: 'active',
                        users: 456,
                        icon: { bg: '#10b981', icon: 'wifi' },
                        url: 'carriers-info.html',
                        notifications: 1,
                        lastUpdate: '1 min ago'
                    },
                    {
                        id: 'utilities',
                        name: 'System Utilities',
                        description: 'System monitoring and maintenance tools',
                        category: 'monitoring',
                        status: 'active',
                        users: 234,
                        icon: { bg: '#f59e0b', icon: 'settings' },
                        url: 'utilities-dashboard.html',
                        notifications: 0,
                        lastUpdate: '3 min ago'
                    },
                    {
                        id: 'database',
                        name: 'Database Management',
                        description: 'Multi-database administration and monitoring',
                        category: 'management',
                        status: 'active',
                        users: 178,
                        icon: { bg: '#8b5cf6', icon: 'database' },
                        url: 'database-management.html',
                        notifications: 2,
                        lastUpdate: '4 min ago'
                    },
                    {
                        id: 'bucket',
                        name: 'Bucket Storage',
                        description: 'Cloudflare R2 storage management',
                        category: 'management',
                        status: 'active',
                        users: 312,
                        icon: { bg: '#ef4444', icon: 'cloud' },
                        url: 'bucket-management.html',
                        notifications: 0,
                        lastUpdate: '6 min ago'
                    }
                ];
                
                this.filteredDashboards = [...this.dashboards];
                this.charts = {};
                this.init();
            }

            init() {
                // Initialize Lucide icons
                lucide.createIcons();
                
                // Set up event listeners
                this.setupEventListeners();
                
                // Render dashboards
                this.renderDashboards();
                
                // Initialize charts
                this.initializeCharts();
                
                // Start real-time updates
                this.startRealTimeUpdates();
                
                // Update time
                this.updateTime();
                setInterval(() => this.updateTime(), 1000);
            }

            setupEventListeners() {
                // Search functionality
                document.getElementById('dashboardSearch').addEventListener('input', () => {
                    this.filterDashboards();
                });
                
                // Category filter
                document.getElementById('categoryFilter').addEventListener('change', () => {
                    this.filterDashboards();
                });
            }

            filterDashboards() {
                const searchTerm = document.getElementById('dashboardSearch').value.toLowerCase();
                const categoryFilter = document.getElementById('categoryFilter').value;
                
                this.filteredDashboards = this.dashboards.filter(dashboard => {
                    const matchesSearch = dashboard.name.toLowerCase().includes(searchTerm) ||
                                         dashboard.description.toLowerCase().includes(searchTerm);
                    const matchesCategory = categoryFilter === 'all' || dashboard.category === categoryFilter;
                    
                    return matchesSearch && matchesCategory;
                });
                
                this.renderDashboards();
            }

            renderDashboards() {
                const grid = document.getElementById('dashboardGrid');
                
                if (this.filteredDashboards.length === 0) {
                    grid.innerHTML = `
                        <div class="col-span-full text-center py-16">
                            <i data-lucide="search-x" class="w-16 h-16 mx-auto mb-6 text-gray-500"></i>
                            <h3 class="text-xl font-semibold mb-2">No dashboards found</h3>
                            <p class="text-gray-400">Try adjusting your search or filter criteria</p>
                        </div>
                    `;
                    lucide.createIcons();
                    return;
                }
                
                grid.innerHTML = this.filteredDashboards.map(dashboard => `
                    <div class="dashboard-card glass-effect rounded-xl p-8 cursor-pointer relative" onclick="openDashboard('${dashboard.url}')">
                        ${dashboard.notifications > 0 ? '<div class="notification-dot"></div>' : ''}
                        
                        <div class="flex items-start justify-between mb-6">
                            <div class="flex items-center space-x-4">
                                <div class="dashboard-icon" style="background-color: ${dashboard.icon.bg}; color: white;">
                                    <i data-lucide="${dashboard.icon.icon}" class="w-8 h-8"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold mb-1">${dashboard.name}</h3>
                                    <span class="px-2 py-1 text-xs rounded-full ${
                                        dashboard.status === 'active' ? 'bg-green-600 text-white' : 'bg-gray-600 text-white'
                                    }">${dashboard.status}</span>
                                </div>
                            </div>
                        </div>
                        
                        <p class="text-gray-300 mb-6">${dashboard.description}</p>
                        
                        <div class="space-y-3">
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-400">Active Users</span>
                                <span class="font-medium">${dashboard.users.toLocaleString()}</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-400">Last Update</span>
                                <span class="font-medium">${dashboard.lastUpdate}</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-400">Category</span>
                                <span class="font-medium capitalize">${dashboard.category}</span>
                            </div>
                        </div>
                        
                        <div class="mt-6 pt-6 border-t border-gray-700">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <div class="w-2 h-2 rounded-full ${this.getStatusClass(dashboard.status)}"></div>
                                    <span class="text-xs text-gray-400">Live</span>
                                </div>
                                <button class="text-blue-400 hover:text-blue-300 font-medium flex items-center">
                                    Launch Dashboard
                                    <i data-lucide="arrow-right" class="w-4 h-4 ml-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                // Re-initialize icons
                setTimeout(() => lucide.createIcons(), 100);
            }

            initializeCharts() {
                // Performance Chart
                const perfCtx = document.getElementById('performanceChart').getContext('2d');
                this.charts.performance = new Chart(perfCtx, {
                    type: 'line',
                    data: {
                        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                        datasets: [
                            {
                                label: 'Response Time',
                                data: [45, 52, 38, 65, 42, 58],
                                borderColor: '#3b82f6',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: 'Error Rate',
                                data: [2, 1, 3, 1, 2, 1],
                                borderColor: '#ef4444',
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#3b82f6' }
                            }
                        },
                        scales: {
                            y: {
                                ticks: { color: '#3b82f6' },
                                grid: { color: 'rgba(156, 163, 175, 0.1)' }
                            },
                            x: {
                                ticks: { color: '#3b82f6' },
                                grid: { display: false }
                            }
                        }
                    }
                });

                // Resource Chart
                const resourceCtx = document.getElementById('resourceChart').getContext('2d');
                this.charts.resource = new Chart(resourceCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['CPU', 'Memory', 'Storage', 'Network'],
                        datasets: [{
                            data: [24, 45, 68, 32],
                            backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#ef4444'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: { color: '#3b82f6' }
                            }
                        }
                    }
                });
            }

            startRealTimeUpdates() {
                // Update metrics every 30 seconds
                setInterval(() => {
                    this.updateMetrics();
                    this.updateCharts();
                }, 30000);
            }

            updateMetrics() {
                // Simulate real-time metric updates
                this.dashboards.forEach(dashboard => {
                    dashboard.users += Math.floor((Math.random() - 0.5) * 10);
                    dashboard.users = Math.max(0, dashboard.users);
                });
                
                this.renderDashboards();
            }

            updateCharts() {
                // Update charts with new data
                if (this.charts.performance) {
                    const newData = this.charts.performance.data.datasets[0].data.map(() => 
                        Math.floor(Math.random() * 30) + 30
                    );
                    this.charts.performance.data.datasets[0].data = newData;
                    this.charts.performance.update();
                }
            }

            getStatusClass(status) {
                const classes = {
                    'active': 'bg-green-500',
                    'warning': 'bg-yellow-500',
                    'error': 'bg-red-500',
                    'maintenance': 'bg-orange-500'
                };
                return classes[status] || 'bg-gray-500';
            }

            updateTime() {
                const now = new Date();
                document.getElementById('currentTime').textContent = now.toLocaleTimeString();
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `fixed top-20 right-4 px-6 py-4 rounded-lg shadow-lg z-50 transform transition-all duration-300 translate-x-full`;
                
                const colors = {
                    success: 'bg-green-600 text-white',
                    error: 'bg-red-600 text-white',
                    warning: 'bg-yellow-600 text-white',
                    info: 'bg-blue-600 text-white'
                };
                
                notification.className += ` ${colors[type]}`;
                notification.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <i data-lucide="${type === 'success' ? 'check-circle' : type === 'error' ? 'x-circle' : 'info'}" class="w-6 h-6"></i>
                        <span class="font-medium">${message}</span>
                    </div>
                `;
                
                document.body.appendChild(notification);
                lucide.createIcons();
                
                setTimeout(() => {
                    notification.classList.remove('translate-x-full');
                    notification.classList.add('translate-x-0');
                }, 100);
                
                setTimeout(() => {
                    notification.classList.add('translate-x-full');
                    setTimeout(() => notification.remove(), 300);
                }, 4000);
            }
        }

        // Global Functions
        function openDashboard(url) {
            window.open(url, '_blank');
        }

        function refreshAllDashboards() {
            window.mainDashboard.showNotification('Refreshing all dashboards...', 'info');
            
            setTimeout(() => {
                window.mainDashboard.updateMetrics();
                window.mainDashboard.showNotification('All dashboards refreshed successfully', 'success');
            }, 2000);
        }

        function runSystemCheck() {
            window.mainDashboard.showNotification('Running system health check...', 'info');
            
            setTimeout(() => {
                window.mainDashboard.showNotification('System check completed - All systems operational', 'success');
            }, 3000);
        }

        function generateReport() {
            window.mainDashboard.showNotification('Generating comprehensive report...', 'info');
            
            setTimeout(() => {
                window.mainDashboard.showNotification('Report generated successfully', 'success');
            }, 2500);
        }

        function backupAll() {
            window.mainDashboard.showNotification('Initiating system backup...', 'warning');
            
            setTimeout(() => {
                window.mainDashboard.showNotification('System backup completed successfully', 'success');
            }, 4000);
        }

        function showSettings() {
            window.mainDashboard.showNotification('Settings panel coming soon', 'info');
        }

        // Initialize the main dashboard when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            window.mainDashboard = new MainDashboard();
        });
    </script>
</body>
</html>
